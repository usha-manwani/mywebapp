(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"0054":function(t,e,a){},"0b86":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABq0lEQVRYR+1XQVLCQBDszgcMfMAcDFf1B/gC8QVyNRyEF4gvMB6CV3yB/ED9Qc7GKnkBxLuVtnYRyxI0i1LAgRyT6Z2enp7dDbHmh2vOjy0Bq4B/k9UhaNXtyKPwkdXkOQZ1vurkNp94zWovW3nlX4vdEpirgIBXAjuL+uIvuBkCAh7HUVj3b14C6i01RAqgk0dh7PeytgdcGWKFdJi3amklyQYkjl1x34uaVUC8HrX22iawkmRDErsFeJJHewMzrp5wLyEft8KKifmcIgfcPEV/MmEsICDQsNMCDUn2JTUJBpN3GBAYSmiS8D8WL8WVK7Bo4/8Zv3ljaJwssAkomBrOGExE15OaAE+tCYEOwCGl2PjEFVfeAuFy1Aq71oS9p5TgfkEc5Wfhw9SE5tsoCu05Uk2yLogLOOJKCRjDqWAbVOCR8WTPVr8g+1YBGnXsGLZBpoT6xpiuuFIC//TUwvDNNCGAdOFSfgXIN15y3Ih0O4pqts/Levzec8OD7hwJLCut2zqb5wE33suL2gAF1n0pNWL6ydMBPE6P1OXp+9tKhXJzodn+GW0VeAcQOhB+j9ppoQAAAABJRU5ErkJggg=="},"0cea":function(t,e,a){},"0e0c":function(t,e,a){"use strict";var s=a("0054"),i=a.n(s);i.a},"0f4b":function(t,e,a){"use strict";var s=a("df7c"),i=a.n(s);i.a},1076:function(t,e,a){},12:function(t,e,a){t.exports=a("c362")},"12c1":function(t,e,a){"use strict";var s=a("7cdc"),i=a.n(s);i.a},"161d":function(t,e,a){"use strict";var s=a("1076"),i=a.n(s);i.a},"183d":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s,i=a("19d5"),l=[],n=[],r=function(t){var e,a=Object(i["a"])(n);try{for(a.s();!(e=a.n()).done;){var s=e.value;s(t)}}catch(l){a.e(l)}finally{a.f()}},o=function(t){var e,a=Object(i["a"])(l);try{for(a.s();!(e=a.n()).done;){var s=e.value;s(t)}}catch(n){a.e(n)}finally{a.f()}};function c(t){var e=t.cb_broadcastMessage,a=t.cb_initEvent;e&&l.push(e),a&&n.push(a),s=$.connection.myHub,s.client.AlarmEvent=function(t,e){console.log("广播 AlarmEvent",e),o({name:t,message:e,from:"messageALarm"})},s.client.desktopEvent=function(t,e){o({name:t,message:e,from:"desktopEvent"})},s.client.broadcastMessage=function(t,e){o({name:t,message:e,from:"broadcastMessage"})},s.client.envMessage=function(t,e){o({name:t,message:e,from:"envMessage"})};var i=100;return axios.post("../Services/getOrganisationData.asmx/GetClassData",{data:{pageIndex:1,pageSize:1}}).then((function(t){var e=t.data.d;i=e.totalRow,$("#totaldevicescount").text(i),$("#offlinedevicecount").text(i-$("#onlinedevicescount").text())})),s.client.machineCounts=function(t){$("#onlinedevicescount").text(t),$("#offlinedevicecount").text(i-t),$("#totaldevicescount").text(i)},$.connection.hub.start({waitForPageLoad:!1}).done((function(){s.server.countMachinesAll(1),s.server.getStatus(),r()})),$.connection.hub.reconnected((function(){s.server.countMachinesAll(1),s.server.getStatus()})),$.connection.hub.stateChanged((function(t){t.newState===$.signalR.connectionState.reconnecting?console.log("change.newState","Re-connecting"):t.newState===$.signalR.connectionState.connected?console.log("change.newState","The server is online"):t.newState===$.signalR.connectionState.disconnected?setTimeout((function(){$.connection.hub.start({waitForPageLoad:!1}).done((function(){s.server.countMachinesAll(1),s.server.getStatus(),console.log("connection to signalR done ")}))}),50):console.log("change.newState","未知状态",t.newState,t)})),{chat:s}}},"270a":function(t,e,a){},3563:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABaElEQVRYR+1XwU3DQBCcrQCogHQAdBAqACqADthUAFTgSQehAtIBuAOXkBKggkMTrSUDjnxYluOHT8rntHM7Ozt75xiOvOzI+TET2Cvg7kszS2O3oyiK0tydAB7HTh751iIweuXNYmcChxT4AnDSwxf/xrURKEku3X0BoAoiK5J0dwdQBLErkpW7bwHcAMjF/airjcBauWI8dwDOAdyR3GpcAbwD+CR5FjH1FOXg/oh6qAU6VArcBkJENgAeYl/bqlz72juNuBxcpwI9Wt8fMskxlJNrqWvDlQCeY/8+6l1FCyS7fJKL62zBC0kl0xuhKbgAcE3yo2FCkKzfEcU+AcjC/W5WWwt2ZqYpWKSUVJ3Wxsw2KSUpox8ipkopyZwybBYuh0B/R/VATtaE6v2QS/eEvJR1Eb2S3Pd5qOXuutDecgkMlTfrnEl6IIv5UEGTUOC4H6Vx5V42ntSh1O06R98U1fzPaFbgG5zMvA2SnqGBAAAAAElFTkSuQmCC"},"448d":function(t,e,a){},4682:function(t,e,a){"use strict";var s,i,l,n,r,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"float-left ml-4 nav_page JCHANNAV vuepage",staticStyle:{"margin-top":"33px"}},t._l(t.menuList,(function(e,s){return a("div",{key:s,staticClass:"jbtn JCHANMENU JURL TEST",class:{active:t.curPage===e.num},on:{click:function(a){return t.loadPage(e)}}},[a("i",{class:[e.fa,"fa"]}),t._v(" "+t._s(e.title)),a("i",{staticClass:"jdown fa fa-caret-down"})])})),0),a("div",{staticClass:"stat-card col-12 float-left"},[a("keep-alive",[a(t.getCompentById(t.curPage-1),{tag:"component"})],1)],1)])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-cog"}),t._v(" 系统设置 ")])}],d=(a("2eeb"),a("e35a"),a("5e9f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"sec_box"},[t._m(1),a("table",{staticClass:"info_normal maxw900 w-100"},[a("tr",[a("td",[t._v(" 学期开始时间 "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.dbItem.SemsterInfo.StartDate,callback:function(e){t.$set(t.dbItem.SemsterInfo,"StartDate",e)},expression:"dbItem.SemsterInfo.StartDate"}})],1),a("td",[t._v(" 学期总计周数 "),a("el-input-number",{attrs:{size:"small"},model:{value:t.dbItem.SemsterInfo.TotalWeeks,callback:function(e){t.$set(t.dbItem.SemsterInfo,"TotalWeeks",e)},expression:"dbItem.SemsterInfo.TotalWeeks"}})],1),a("td",{staticClass:"text-right"},[t._v("学期")]),a("td",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.loadDataBySemno(e)}},model:{value:t.form.Semesterno,callback:function(e){t.$set(t.form,"Semesterno",e)},expression:"form.Semesterno"}},t._l([{value:1,label:"上学期"},{value:2,label:"下学期"}],(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(2),a("table",{staticClass:"info_normal w-100",staticStyle:{"max-width":"1200px"}},[a("tr",[a("td",[a("span",[t._v("学校中文名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dbItem.SchoolInfo.SchoolName,expression:"dbItem.SchoolInfo.SchoolName"}],attrs:{type:"text",name:"SchoolName"},domProps:{value:t.dbItem.SchoolInfo.SchoolName},on:{input:function(e){e.target.composing||t.$set(t.dbItem.SchoolInfo,"SchoolName",e.target.value)}}})]),a("td",[a("span",[t._v("学校英文名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dbItem.SchoolInfo.SchoolEngName,expression:"dbItem.SchoolInfo.SchoolEngName"}],attrs:{type:"text",name:"SchoolEngName"},domProps:{value:t.dbItem.SchoolInfo.SchoolEngName},on:{input:function(e){e.target.composing||t.$set(t.dbItem.SchoolInfo,"SchoolEngName",e.target.value)}}})]),a("td",[a("span",[t._v("学校LOGO")]),a("form",{attrs:{id:"form1",runat:"server"}},[a("input",{attrs:{type:"file",name:"postedFile",id:"SchoolLogo",accept:"image/*"},on:{change:t.updateFile}})]),t.dbItem.SchoolInfo.LogoLocation?[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.fmtPath(t.dbItem.SchoolInfo.LogoLocation)}})]:t._e(),a("i",{staticClass:"fa fa-info-circle green"}),t._v(" 图片尺寸：500 × 500px"),a("progress",{staticStyle:{display:"none"},attrs:{id:"fileProgress"}})],2),t._m(3)])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(4),a("table",{staticClass:"info_normal maxw900 w-100"},[a("tr",[a("td",[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.Reserve.NonWorkingDays,expression:"form.Reserve.NonWorkingDays"}],attrs:{type:"checkbox",name:"ReserveNonWorkDay"},domProps:{checked:Array.isArray(t.form.Reserve.NonWorkingDays)?t._i(t.form.Reserve.NonWorkingDays,null)>-1:t.form.Reserve.NonWorkingDays},on:{change:function(e){var a=t.form.Reserve.NonWorkingDays,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l=null,n=t._i(a,l);s.checked?n<0&&t.$set(t.form.Reserve,"NonWorkingDays",a.concat([l])):n>-1&&t.$set(t.form.Reserve,"NonWorkingDays",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.form.Reserve,"NonWorkingDays",i)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" 允许非工作日预约")])]),a("td",[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.Reserve.AutoReview,expression:"form.Reserve.AutoReview"}],attrs:{type:"checkbox",name:"ReserveAutoReview"},domProps:{checked:Array.isArray(t.form.Reserve.AutoReview)?t._i(t.form.Reserve.AutoReview,null)>-1:t.form.Reserve.AutoReview},on:{change:function(e){var a=t.form.Reserve.AutoReview,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l=null,n=t._i(a,l);s.checked?n<0&&t.$set(t.form.Reserve,"AutoReview",a.concat([l])):n>-1&&t.$set(t.form.Reserve,"AutoReview",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.form.Reserve,"AutoReview",i)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" 预约内容自动审核")])]),a("td",[a("el-date-picker",{staticStyle:{width:"70%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.Reserve.ResTime,callback:function(e){t.$set(t.form.Reserve,"ResTime",e)},expression:"form.Reserve.ResTime"}})],1)])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(5),a("table",{staticClass:"info_normal maxw900 w-100"},[a("tr",[a("td",[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.Transfer.NonWorkingDays,expression:"form.Transfer.NonWorkingDays"}],attrs:{type:"checkbox",name:"TransferNonWorkDay"},domProps:{checked:Array.isArray(t.form.Transfer.NonWorkingDays)?t._i(t.form.Transfer.NonWorkingDays,null)>-1:t.form.Transfer.NonWorkingDays},on:{change:function(e){var a=t.form.Transfer.NonWorkingDays,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l=null,n=t._i(a,l);s.checked?n<0&&t.$set(t.form.Transfer,"NonWorkingDays",a.concat([l])):n>-1&&t.$set(t.form.Transfer,"NonWorkingDays",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.form.Transfer,"NonWorkingDays",i)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" 允许非工作日调课")])]),a("td",[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.Transfer.AutoReview,expression:"form.Transfer.AutoReview"}],attrs:{type:"checkbox",name:"TransferAutoReview"},domProps:{checked:Array.isArray(t.form.Transfer.AutoReview)?t._i(t.form.Transfer.AutoReview,null)>-1:t.form.Transfer.AutoReview},on:{change:function(e){var a=t.form.Transfer.AutoReview,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l=null,n=t._i(a,l);s.checked?n<0&&t.$set(t.form.Transfer,"AutoReview",a.concat([l])):n>-1&&t.$set(t.form.Transfer,"AutoReview",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.form.Transfer,"AutoReview",i)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" 调课内容自动审核")])]),a("td",[a("el-date-picker",{staticStyle:{width:"70%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.Transfer.TransferTime,callback:function(e){t.$set(t.form.Transfer,"TransferTime",e)},expression:"form.Transfer.TransferTime"}})],1)])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(6),a("table",{staticClass:"info_normal w-100"},t._l([1,7],(function(e,s){return a("tr",{key:e},t._l([e,e+2,e+4],(function(e,i){return a("td",{key:i},[t.form.SectionInfo[3*s+i]?[a("label",{staticStyle:{width:"100px","text-align":"right","padding-right":"1rem"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.SectionInfo[3*s+i].isCheck,expression:"form.SectionInfo[r * 3 + key].isCheck"}],attrs:{type:"checkbox",name:"Section"},domProps:{value:e+","+(1+e),checked:Array.isArray(t.form.SectionInfo[3*s+i].isCheck)?t._i(t.form.SectionInfo[3*s+i].isCheck,e+","+(1+e))>-1:t.form.SectionInfo[3*s+i].isCheck},on:{change:function(a){var l=t.form.SectionInfo[3*s+i].isCheck,n=a.target,r=!!n.checked;if(Array.isArray(l)){var o=e+","+(1+e),c=t._i(l,o);n.checked?c<0&&t.$set(t.form.SectionInfo[3*s+i],"isCheck",l.concat([o])):c>-1&&t.$set(t.form.SectionInfo[3*s+i],"isCheck",l.slice(0,c).concat(l.slice(c+1)))}else t.$set(t.form.SectionInfo[3*s+i],"isCheck",r)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v("第"+t._s(("0"+e).substr(-2)+","+("0"+(1+e)).substr(-2))+"节 ")]),a("el-time-picker",{staticStyle:{width:"70%"},attrs:{"is-range":"",format:"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.form.SectionInfo[3*s+i].value,callback:function(e){t.$set(t.form.SectionInfo[3*s+i],"value",e)},expression:"form.SectionInfo[r * 3 + key].value"}})]:t._e()],2)})),0)})),0),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("h5",[a("i",{staticClass:"fa fa-calendar"}),t._v("工作日 "),a("span",{staticClass:"jf-12 font-weight-normal ml-5 gray"},[a("switchbtn",{model:{value:t.dbItem.SemsterInfo.AutoHoliday,callback:function(e){t.$set(t.dbItem.SemsterInfo,"AutoHoliday",e)},expression:"dbItem.SemsterInfo.AutoHoliday"}}),a("span",[t._v("自动过滤节假日")])],1)]),a("table",{staticClass:"info_normal maxw900 w-100"},[a("tr",t._l([{value:"Monday",label:"星期一"},{value:"Tuesday",label:"星期二"},{value:"Wednesday",label:"星期三"},{value:"Thursday",label:"星期四"},{value:"Friday",label:"星期五"},{value:"Saturday",label:"星期六"},{value:"Sunday",label:"星期日"}],(function(e,s){return a("td",{key:s},[t.dbItem.SemsterInfo?a("label",[a("input",{ref:e.value,refInFor:!0,attrs:{type:"checkbox",name:"weekday","v-model":t.dbItem.SemsterInfo[e.value]},on:{change:function(a){return t.updateWeekday(a.target.checked,e.value)}}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" "+t._s(e.label)+" ")]):t._e()])})),0)]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm",attrs:{id:"submitButton"},on:{click:t.SaveAllData}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])])])])])}),u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar01"},[a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-braille mr-1"}),t._v("常规设置")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-calendar"}),t._v("学期设置")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-bank"}),t._v("学校")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("span",{staticStyle:{color:"Green"},attrs:{id:"lblMessage"}}),a("input",{attrs:{type:"hidden",id:"filepath"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-calendar-check-o"}),t._v("预约")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-random"}),t._v("调课")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-clock-o"}),t._v("课时")])}],m=a("b165"),f=m["a"],p=a("9ca4"),h=Object(p["a"])(f,d,u,!1,null,null,null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[{active:"systempage"==t.subPage}],attrs:{"page-href":"window/p-settings/002-1.html","page-box":"#sec_box"},on:{click:function(e){t.subPage="systempage"}}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" 系统设置")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[{active:"projectorpage"==t.subPage}],attrs:{"page-href":"window/p-settings/002-2.html","page-box":"#sec_box"},on:{click:function(e){t.subPage="projectorpage"}}},[a("i",{staticClass:"fa fa-video-camera"}),t._v(" 投影机")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[{active:"devicepage"==t.subPage}],attrs:{"page-href":"window/p-settings/002-3.html","page-box":"#sec_box"},on:{click:function(e){t.subPage="devicepage"}}},[a("i",{staticClass:"fa fa-dropbox"}),t._v(" 设备")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[{active:"computerpage"==t.subPage}],attrs:{"page-href":"window/p-settings/002-4.html","page-box":"#sec_box"},on:{click:function(e){t.subPage="computerpage"}}},[a("i",{staticClass:"fa fa-desktop"}),t._v(" 电脑")])])]),a("div",{staticClass:"sec_box"},[a(t.subPage,{tag:"component"})],1)])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-sliders mr-1"}),t._v("控制设备设置")])}],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("table",{staticClass:"info_normal w-100"},[a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ProjectorAutoOn,callback:function(e){t.$set(t.systemOptions,"ProjectorAutoOn",e)},expression:"systemOptions.ProjectorAutoOn"}},[t._v("投影机自动开机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.ScreenLinkageOn,callback:function(e){t.$set(t.systemOptions,"ScreenLinkageOn",e)},expression:"systemOptions.ScreenLinkageOn"}},[t._v("幕布联动投影机开")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.Projector232Signal,callback:function(e){t.$set(t.systemOptions,"Projector232Signal",e)},expression:"systemOptions.Projector232Signal"}},[t._v("投影机关发2次232码")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.FingerPrintOn,callback:function(e){t.$set(t.systemOptions,"FingerPrintOn",e)},expression:"systemOptions.FingerPrintOn"}},[t._v("指纹开")])],1)]),a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ProjectorAutoOff,callback:function(e){t.$set(t.systemOptions,"ProjectorAutoOff",e)},expression:"systemOptions.ProjectorAutoOff"}},[t._v("投影机自动关机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.ScreenLinkageOff,callback:function(e){t.$set(t.systemOptions,"ScreenLinkageOff",e)},expression:"systemOptions.ScreenLinkageOff"}},[t._v("幕布联动投影机关")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.projector2Infrared,callback:function(e){t.$set(t.systemOptions,"projector2Infrared",e)},expression:"systemOptions.projector2Infrared"}},[t._v("投影机关发2次红外码")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.FingerPrintOff,callback:function(e){t.$set(t.systemOptions,"FingerPrintOff",e)},expression:"systemOptions.FingerPrintOff"}},[t._v("指纹关")])],1)]),a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ScreenAutoDrop,callback:function(e){t.$set(t.systemOptions,"ScreenAutoDrop",e)},expression:"systemOptions.ScreenAutoDrop"}},[t._v("系统开启时降幕")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.VolumeMemoryOn,callback:function(e){t.$set(t.systemOptions,"VolumeMemoryOn",e)},expression:"systemOptions.VolumeMemoryOn"}},[t._v("开启音量记忆")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.IODetectionOff,callback:function(e){t.$set(t.systemOptions,"IODetectionOff",e)},expression:"systemOptions.IODetectionOff"}},[t._v("开启IO检测开机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.ComputerLinkageOff,callback:function(e){t.$set(t.systemOptions,"ComputerLinkageOff",e)},expression:"systemOptions.ComputerLinkageOff"}},[t._v("电脑联动系统关")])],1)]),a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ComputerAutoOn,callback:function(e){t.$set(t.systemOptions,"ComputerAutoOn",e)},expression:"systemOptions.ComputerAutoOn"}},[t._v("电脑自动开机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.BuzzerOn,callback:function(e){t.$set(t.systemOptions,"BuzzerOn",e)},expression:"systemOptions.BuzzerOn"}},[t._v("开启蜂鸣器")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.SwipeOn,callback:function(e){t.$set(t.systemOptions,"SwipeOn",e)},expression:"systemOptions.SwipeOn"}},[t._v("刷卡开")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.HdmiAudio,callback:function(e){t.$set(t.systemOptions,"HdmiAudio",e)},expression:"systemOptions.HdmiAudio"}},[t._v("HDMI音频分离")])],1)]),a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ComputerAutoOff,callback:function(e){t.$set(t.systemOptions,"ComputerAutoOff",e)},expression:"systemOptions.ComputerAutoOff"}},[t._v("电脑自动关机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.IODetectionOn,callback:function(e){t.$set(t.systemOptions,"IODetectionOn",e)},expression:"systemOptions.IODetectionOn"}},[t._v("开启IO检测关机")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.SwipeOff,callback:function(e){t.$set(t.systemOptions,"SwipeOff",e)},expression:"systemOptions.SwipeOff"}},[t._v("刷卡关")])],1),a("td",[a("el-checkbox",{model:{value:t.systemOptions.SystemAlarm,callback:function(e){t.$set(t.systemOptions,"SystemAlarm",e)},expression:"systemOptions.SystemAlarm"}},[t._v("系统报警")])],1)]),a("tr",[a("td",[a("el-checkbox",{model:{value:t.systemOptions.ProjectorSwitchAuto,callback:function(e){t.$set(t.systemOptions,"ProjectorSwitchAuto",e)},expression:"systemOptions.ProjectorSwitchAuto"}},[t._v("投影机自动切换")])],1),a("td",[a("table",{staticClass:"table_nostyle"},[a("tr",[a("td",[t._v("投影机关机延时")]),a("td",[a("el-input-number",{attrs:{min:1,max:20,label:""},model:{value:t.systemOptions.ProjectorOffDelayMinute,callback:function(e){t.$set(t.systemOptions,"ProjectorOffDelayMinute",e)},expression:"systemOptions.ProjectorOffDelayMinute"}})],1)])])]),a("td",[a("table",{staticClass:"table_nostyle"},[a("tr",[a("td",[t._v("投影机开机延时")]),a("td",[a("el-input-number",{attrs:{min:1,max:20,label:""},model:{value:t.systemOptions.ProjectorOnDelaySecond,callback:function(e){t.$set(t.systemOptions,"ProjectorOnDelaySecond",e)},expression:"systemOptions.ProjectorOnDelaySecond"}})],1)])])]),a("td")])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(1),a("selectClassroomTabs",{attrs:{initData:t.initStrategyLocation,buildingClasses:t.list.buildingClassTabs,allBuildClasses:t.list.buildingClass},on:{change:t.udpateClassroomStatus}}),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[t._m(2),a("a",{staticClass:"jbtn_sm bg_blue ml-3",attrs:{"page-href":"window/alert/state_suc_2.html","page-box":"#jcontent"},on:{click:t.getCfg}},[a("i",{staticClass:"fa fa-sign-out",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 读取配置")])])])],1)},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("设备配置")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("配置范围")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn_sm",attrs:{"page-href":"window/alert/state_suc_2.html","page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])}],x=(a("b4fb"),a("ecb4"),a("053b"),a("e18c"),a("96db"),a("af86"),a("19d5")),S=a("6c6d"),w=a("232a"),k=a("183d"),j=a("e04f"),T=a.n(j),I=a("8c1b"),O=a("fe4a"),D={data:function(){return{systemOptions:{ProjectorAutoOn:!1,ProjectorAutoOff:!1,ScreenAutoDrop:!1,ComputerAutoOn:!1,ComputerAutoOff:!1,ProjectorSwitchAuto:!1,ScreenLinkageOn:!1,ScreenLinkageOff:!1,VolumeMemoryOn:!1,BuzzerOn:!1,IODetectionOn:!1,ProjectorOffDelayMinute:1,Projector232Signal:!1,projector2Infrared:!1,IODetectionOff:!1,SwipeOn:!1,SwipeOff:!1,ProjectorOnDelaySecond:1,FingerPrintOn:!1,FingerPrintOff:!1,ComputerLinkageOff:!1,HdmiAudio:!1,SystemAlarm:!1},initStrategyLocation:[],StrategyLocation:{},list:{buildingClassTabs:[],buildingClass:[]}}},components:{selectClassroomTabs:O["a"]},mounted:function(){this.initClassrooms(),this.initEvent(),this.initConn()},computed:{getDataPreDeal:function(){var t={};for(var e in this.systemOptions)-1==["ProjectorOffDelayMinute","ProjectorOnDelaySecond"].indexOf(e)?t[e]=this.systemOptions[e]?"01":"00":t[e]=this.systemOptions[e];return t}},methods:{getLocationsInfoList:function(){var t=[];for(var e in this.StrategyLocation)t=[].concat(Object(w["a"])(t),Object(w["a"])(this.StrategyLocation[e]));return t.map((function(t){return parseInt(t)}))},initConn:function(){var t=this,e=Object(k["a"])({cb_broadcastMessage:function(e){var a=e.name,s=e.message;console.log(a,s,"来自服务器端数据"),"ProjectorConfig"===s.Command&&"ReadConfig"===s.Type&&t.parseDataFromSocket(s.Data),t.$forceUpdate()}});s=e.chat},getCfg:function(){var t=this.getLocationsInfoList();1!==t.length?ELEMENT.Message("获取配置信息时，只能选择一间教室"):s.server.getProjectorConfig(parseInt(t[0]),"ReadProjectorConfig",JSON.stringify(Object(S["a"])({},T.a.get()))),console.log(this.StrategyLocation)},saveCfg:function(){var t=this.getLocationsInfoList();t.length>0?s.server.setProjectorConfig(t,this.getDataPreDeal,JSON.stringify(Object(S["a"])({},T.a.get()))):ELEMENT.Message("至少选择一间教室进行更新配置信息")},parseDataFromSocket:function(t){for(var e in this.systemOptions)-1==["ProjectorOffDelayMinute","ProjectorOnDelaySecond"].indexOf(e)?this.systemOptions[e]="01"==t[e]:this.systemOptions[e]=t[e]},initEvent:function(){},initClassrooms:function(){var t=this;return Object(I["b"])().then((function(e){return Promise.all(e.map((function(t){return Object(I["c"])(t.value).then((function(e){var a=0;return e&&(e=e.map((function(t){return t.ClassNames?a<t.ClassNames.length&&(t.ClassNames=t.ClassNames.map((function(t){return t.status=!1,t})),a=t.ClassNames.length):a=0,t.status=!1,t}))),{status:!1,buildingInfo:t,floorClassInfo:e||[],maxClassrooNum:a}}))}))).then((function(e){t.list.buildingClass=e,t.buildingClassTabs=t.filterBuildings({location:t.initStrategyLocation,buildings:t.list.buildingClass})})).catch((function(){t.list.buildingClass=[]}))}))},filterBuildings:function(t){var e=t.location,a=t.buildings;for(var s in this.list.buildingClassTabs=[],a){var i,l=_.map(_.flatten(_.map(a[s].floorClassInfo,"ClassNames")),"Id"),n=Object(x["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==l.indexOf(r)){this.list.buildingClassTabs.push(a[s]);break}}}catch(o){n.e(o)}finally{n.f()}}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo,s=[];a.map((function(t){t.ClassNames.map((function(t){t.status&&s.push(t.Id)}))})),this.StrategyLocation[e.value]=s}}},A=D,P=Object(p["a"])(A,C,y,!1,null,null,null),N=P.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("table",{staticClass:"info_normal style-tr-bg-gray w-100"},[a("tr",[a("td",{staticClass:"text-right"},[t._v("品牌")]),a("td",[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},on:{change:t.udpateProjectorModelList},model:{value:t.form.projectorBrand,callback:function(e){t.$set(t.form,"projectorBrand",e)},expression:"form.projectorBrand"}},t._l(t.list.projectorBrand,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("td",{staticClass:"text-right"},[t._v("型号")]),a("td",[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},on:{change:t.getProjectorCfg},model:{value:t.form.projectorModel,callback:function(e){t.$set(t.form,"projectorModel",e)},expression:"form.projectorModel"}},t._l(t.list.projectorModel,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("tr",[a("td",{staticClass:"text-right"},[t._v("波特率")]),a("td",[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},model:{value:t.form.BaudRate,callback:function(e){t.$set(t.form,"BaudRate",e)},expression:"form.BaudRate"}},t._l([1200,2400,4800,9600,19200,38400,57600,76800,115200],(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("td",{staticClass:"text-right"},[t._v("校验")]),a("td",[a("el-input-number",{staticStyle:{width:"50%"},attrs:{min:0,max:4},model:{value:t.form.Parity,callback:function(e){t.$set(t.form,"Parity",e)},expression:"form.Parity"}})],1)]),a("tr",[a("td",{staticClass:"text-right"},[t._v("投影仪开启")]),a("td",[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"text",name:""},model:{value:t.form.OpenCode,callback:function(e){t.$set(t.form,"OpenCode",e)},expression:"form.OpenCode"}})],1),a("td",{staticClass:"text-right"},[t._v("投影仪关闭")]),a("td",[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"text",name:""},model:{value:t.form.CloseCode,callback:function(e){t.$set(t.form,"CloseCode",e)},expression:"form.CloseCode"}})],1)])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(1),a("selectClassroomTabs",{attrs:{initData:t.initStrategyLocation,buildingClasses:t.list.buildingClassTabs,allBuildClasses:t.list.buildingClass},on:{change:t.udpateClassroomStatus}}),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm",on:{click:t.saveCfg}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")]),a("a",{staticClass:"jbtn_sm bg_blue ml-3",on:{click:t.getCfg}},[a("i",{staticClass:"fa fa-sign-out",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 读取配置")])])])],1)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("投影仪设备配置")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("配置范围")])}],M={data:function(){return{StrategyLocation:{},initStrategyLocation:[],form:{projectorBrand:"",projectorModel:"",BaudRate:"",Parity:0,OpenCode:"",CloseCode:"",status:""},list:{buildingClassTabs:[],buildingClass:[],projectorBrand:[],projectorModel:[]}}},components:{selectClassroomTabs:O["a"]},mounted:function(){this.initClassrooms(),this.initListprojectorBrand()},methods:{getLocationsInfoList:function(){var t=[];for(var e in this.StrategyLocation)t=[].concat(Object(w["a"])(t),Object(w["a"])(this.StrategyLocation[e]));return t.map((function(t){return parseInt(t)}))},saveCfg:function(){var t=this.getLocationsInfoList();t.length>0?axios.post("../Services/ProjectorConfig.asmx/SaveProjectorInfo",{data:{Brand:this.form.projectorBrand,Model:this.form.projectorModel,OpenCode:this.form.OpenCode,CloseCode:this.form.CloseCode,BaudRate:this.form.BaudRate,Parity:this.form.Parity,classids:t}}).then((function(){ELEMENT.Message("保存成功")})):ELEMENT.Message("至少选择一间教室进行更新配置信息")},getCfg:function(){var t=this,e=this.getLocationsInfoList();1!==e.length?ELEMENT.Message("获取配置信息时，只能选择一间教室"):axios.post("../Services/ProjectorConfig.asmx/GetProjectorInfo",{classid:e[0]}).then((function(e){var a=e.data.d.value;console.log(a),t.form.projectorBrand=a.Brand,t.form.projectorModel=a.Model,t.form.OpenCode=a.OpenCode,t.form.CloseCode=a.CloseCode,t.form.BaudRate=a.BaudRate,t.form.Parity=a.Parity}))},initListprojectorBrand:function(){var t=this;axios.post("../Services/ProjectorConfig.asmx/GetProjectorBrand",{}).then((function(e){var a=e.data.d.names;t.list.projectorBrand=a.map((function(t){return{value:t,label:t}}))}))},udpateProjectorModelList:function(t){var e=this;this.form.projectorModel="",axios.post("../Services/ProjectorConfig.asmx/GetProjectorModel",{brand:t}).then((function(t){var a=t.data.d.names;e.list.projectorModel=a.map((function(t){return{value:t,label:t}}))}))},getProjectorCfg:function(){var t=this,e=this.form.projectorBrand,a=this.form.projectorModel;axios.post("../Services/ProjectorConfig.asmx/GetProjectorIniInfo",{data:{Brand:e,Model:a}}).then((function(e){var a=e.data.d.value;t.form=Object(S["a"])(Object(S["a"])({},t.form),a)}))},initClassrooms:function(){var t=this;return Object(I["b"])().then((function(e){return Promise.all(e.map((function(t){return Object(I["c"])(t.value).then((function(e){var a=0;return e&&(e=e.map((function(t){return t.ClassNames?a<t.ClassNames.length&&(t.ClassNames=t.ClassNames.map((function(t){return t.status=!1,t})),a=t.ClassNames.length):a=0,t.status=!1,t}))),{status:!1,buildingInfo:t,floorClassInfo:e||[],maxClassrooNum:a}}))}))).then((function(e){t.list.buildingClass=e,t.buildingClassTabs=t.filterBuildings({location:t.initStrategyLocation,buildings:t.list.buildingClass})})).catch((function(){t.list.buildingClass=[]}))}))},filterBuildings:function(t){var e=t.location,a=t.buildings;for(var s in this.list.buildingClassTabs=[],a){var i,l=_.map(_.flatten(_.map(a[s].floorClassInfo,"ClassNames")),"Id"),n=Object(x["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==l.indexOf(r)){this.list.buildingClassTabs.push(a[s]);break}}}catch(o){n.e(o)}finally{n.f()}}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo,s=[];a.map((function(t){t.ClassNames.map((function(t){t.status&&s.push(t.Id)}))})),this.StrategyLocation[e.value]=s}}},B=M,U=Object(p["a"])(B,L,E,!1,null,null,null),W=U.exports,V={},F=Object(p["a"])(V,i,l,!1,null,null,null),R=F.exports,z={},J=Object(p["a"])(z,n,r,!1,null,null,null),q=J.exports,G={data:function(){return{subPage:"systempage"}},components:{systempage:N,projectorpage:W,devicepage:R,computerpage:q}},H=G,Y=Object(p["a"])(H,g,b,!1,null,null,null),Z=Y.exports,Q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bar01"},[a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-video-camera mr-1"}),t._v("录播设备设置")]),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",attrs:{"j-page-href":"window/p-settings/003-1.html","j-page-box":"#sec_box"}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" 基本设置")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",attrs:{"j-page-href":"window/p-settings/003-2.html","j-page-box":"#sec_box"}},[a("i",{staticClass:"fa fa-video-camera"}),t._v(" 应用设置")])])]),a("div",{staticClass:"sec_box"},[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("div",{staticClass:"jtab w-100 bbgray"},[a("div",{staticClass:"tabbox active"},[t._v("教师跟踪")]),a("div",{staticClass:"tabbox"},[t._v("学生跟踪")]),a("div",{staticClass:"tabbox"},[t._v("网络参数")]),a("div",{staticClass:"tabbox"},[t._v("输出设置")]),a("div",{staticClass:"tabbox"},[t._v("录像查询")])]),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("div",{staticClass:"jtab_box"},[a("div",{staticClass:"jvideo float-left"}),a("div",{staticClass:"jtab_r float-left"},[a("h5",{staticClass:"jtt2"},[a("label",[a("input",{attrs:{type:"checkbox",checked:""}}),a("span",{staticClass:"jswift",staticStyle:{width:"50px"}},[a("i",{staticClass:"jswift-btn"})])]),a("span",[t._v("教师跟踪设置")])]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("水平移动速度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" ( 1-100 )")]),a("td",[a("span",{staticClass:"span02"},[t._v("水平移动阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" %")])]),a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("多人判定阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" %")]),a("td",[a("span",{staticClass:"span02"},[t._v("多人超时阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" 秒")])]),a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("讲坛无人超时")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" 秒")]),a("td",[a("table",{staticClass:"table_nostyle"},[a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("云台机协议")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("SONYD100")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SONYD100")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("EPSON-211")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SHARP-021S")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("INTEL-AS01")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("AMD-I5")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("CORE-I9")])])])])])])])]),a("tr",[a("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[a("i",{staticClass:"fa fa-arrow-circle-left"}),t._v(" 左预设位")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("右预设位 "),a("i",{staticClass:"fa fa-arrow-circle-right"})])])])]),a("h5",{staticClass:"jtt2"},[a("label",[a("input",{attrs:{type:"checkbox"}}),a("span",{staticClass:"jswift",staticStyle:{width:"50px"}},[a("i",{staticClass:"jswift-btn"})])]),a("span",[t._v("板书跟踪设置")])]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("水平移动速度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" ( 1-100 )")]),a("td",[a("span",{staticClass:"span02"},[t._v("水平移动阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" %")])]),a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("多人判定阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" %")]),a("td",[a("span",{staticClass:"span02"},[t._v("多人超时阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" 秒")])]),a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("讲坛无人超时")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" 秒")]),a("td",[a("table",{staticClass:"table_nostyle"},[a("tr",[a("td",[a("span",{staticClass:"span02"},[t._v("云台机协议")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("SONYD100")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SONYD100")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("EPSON-211")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SHARP-021S")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("INTEL-AS01")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("AMD-I5")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("CORE-I9")])])])])])])])]),a("tr",[a("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[a("i",{staticClass:"fa fa-arrow-circle-left"}),t._v(" 左预设位")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("右预设位 "),a("i",{staticClass:"fa fa-arrow-circle-right"})])])])]),a("hr"),a("table",{staticClass:"info_normal"},[a("tr",[a("td",[a("span",{staticClass:"ml-2 green"},[t._v("屏蔽区域 ( 绿框 ) ")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("区域1")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域1")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域2")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域3")])])])]),a("td",[a("span",{staticClass:"ml-2"},[t._v("启用状态 ")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("启用")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("启用")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("禁用")])])])]),a("td",[a("a",{staticClass:"ml-2 show_jmodal JURL",attrs:{"j-page-href":"window/alert/coordinate.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-arrows"}),t._v(" 坐标")])])]),a("tr",[a("td",[a("span",{staticClass:"ml-2 red"},[t._v("检测区域 ( 红框 ) ")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("区域1")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域1")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域2")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域3")])])])]),a("td",[a("span",{staticClass:"ml-2"},[t._v("启用状态 ")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("启用")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("启用")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("禁用")])])])]),a("td",[a("a",{staticClass:"ml-2 show_jmodal JURL",attrs:{"j-page-href":"window/alert/coordinate.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-arrows"}),t._v(" 坐标")])])])]),a("hr"),a("table",{staticClass:"info_normal float-left ml-3"},[a("tr",[a("td",[a("span",{staticClass:"mr-3"},[t._v("连接状态")])]),a("td",[a("span",{staticClass:"mr-3"},[t._v("连接数："),a("b",{staticClass:"blue"},[t._v("1")])]),a("span",{staticClass:"mr-3"},[t._v("教师跟踪状态："),a("b",{staticClass:"green"},[t._v("已连接")])]),a("span",{staticClass:"mr-3"},[t._v("板书跟踪状态："),a("b",{staticClass:"red"},[t._v("未连接")])])])])])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm show_jmodal JURL",attrs:{"j-page-href":"window/alert/state_suc_2.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])])])]),a("div",{staticClass:"jtab_box",staticStyle:{display:"none"}},[a("div",{staticClass:"jvideo float-left"}),a("div",{staticClass:"jtab_r float-left"},[a("a",{staticClass:"jbtn_sm bg_green white mb-3 px-3 show_jmodal JURL",attrs:{"j-page-href":"window/alert/threshold.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-camera"}),t._v(" 变焦")]),a("h5",{staticClass:"jtt2"},[a("label",[a("input",{attrs:{type:"checkbox",checked:""}}),a("span",{staticClass:"jswift",staticStyle:{width:"50px"}},[a("i",{staticClass:"jswift-btn"})])]),a("span",[t._v("前后排参数设置")])]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",[a("span",{staticClass:"span03"},[t._v("前排学生位置")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" "),a("i",{staticClass:"fa fa-bullseye green"})]),a("td",[a("span",{staticClass:"span03"},[t._v("前排学生头部宽度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (pt)")]),a("td",[a("span",{staticClass:"span03"},[t._v("前排学生头部高度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (pt)")])]),a("tr",[a("td",[a("span",{staticClass:"span03"},[t._v("后排学生位置")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" "),a("i",{staticClass:"fa fa-bullseye green"})]),a("td",[a("span",{staticClass:"span03"},[t._v("后排学生头部宽度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (pt)")]),a("td",[a("span",{staticClass:"span03"},[t._v("后排学生头部高度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (pt)")])]),a("tr",[a("td",[a("span",{staticClass:"span03"},[t._v("摄像机转动画")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (1-100)")]),a("td",[a("span",{staticClass:"span03"},[t._v("前排学生头部宽度")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" 秒")]),a("td",[a("span",{staticClass:"span03"},[t._v("端口 "),a("i",{staticClass:"fa fa-code-fork green"})])])]),a("tr",[a("td",[a("span",{staticClass:"span03"},[t._v("检测阈值")]),t._v(" "),a("input",{staticStyle:{width:"120px"},attrs:{type:"text",name:""}}),t._v(" (1-12)")]),a("td",[a("table",{staticClass:"table_nostyle"},[a("tr",[a("td",{staticClass:"black text-right",staticStyle:{width:"110px"}},[t._v(" 云台机协议 ")]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("SONYD100")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SONYD100")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("EPSON-211")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("SHARP-021S")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("INTEL-AS01")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("AMD-I5")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("CORE-I9")])])])])])])])])]),a("h5",{staticClass:"jtt2"},[a("label",[a("input",{attrs:{type:"checkbox"}}),a("span",{staticClass:"jswift",staticStyle:{width:"50px"}},[a("i",{staticClass:"jswift-btn"})])]),a("span",[t._v("四角定位")])]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",{staticStyle:{"padding-top":"10px","padding-right":"20px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[t._v("左上角 1")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("预置位")])]),a("td",{staticStyle:{"padding-top":"10px","padding-right":"20px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[t._v("右上角 2")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("预置位")])]),a("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1 bg_blue"},[t._v("全景预置位")])])]),a("tr",[a("td",{staticStyle:{"padding-top":"10px","padding-right":"20px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[t._v("左下角 4")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("预置位")])]),a("td",{staticStyle:{"padding-top":"10px","padding-right":"20px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1"},[t._v("右下角 3")]),a("a",{staticClass:"jbtn_sm mr-1"},[t._v("预置位")])]),a("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[a("a",{staticClass:"jbtn_sm mr-1 bg_blue"},[t._v("立即生效")])])])]),a("h5",{staticClass:"jtt2"},[a("i",{staticClass:"fa fa-plus-circle"}),a("span",[t._v("屏蔽区域")])]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("区域1")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域1")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域2")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("区域3")])])])]),a("td",[a("a",{staticClass:"jbtn_xs bg_green",staticStyle:{"margin-left":"10px",padding:"0 15px",color:"#fff"}},[t._v("重设")])]),a("td",[a("a",{staticClass:"ml-2 show_jmodal JURL",attrs:{"j-page-href":"window/alert/coordinate.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-arrows"}),t._v(" 坐标")])]),a("td",[a("div",{staticClass:"jdropdown2 ml-1",staticStyle:{width:"120px"}},[a("div",{staticClass:"jdropdown2-box px-2"},[t._v("启用此区域")]),a("div",{staticClass:"jdropdown2-arrow text-center gray"},[a("i",{staticClass:"fa fa-caret-down"})]),a("div",{staticClass:"jdropdown2-list",staticStyle:{display:"none",width:"120px"}},[a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("启用此区域")]),a("label",[a("input",{attrs:{type:"radio",name:"bm-1"}}),t._v("禁用此区域")])])])])])])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm show_jmodal JURL",attrs:{"j-page-href":"window/alert/state_suc_2.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])])])]),a("div",{staticClass:"jtab_box",staticStyle:{display:"none"}},[a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",[t._v("网络地址")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})])])])])]),a("tr",[a("td",[t._v("子网掩码")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})])])])])]),a("tr",[a("td",[t._v("网关地址")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})])])])])]),a("tr",[a("td",[t._v("MAC地址")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput","data-letterlimit":"2"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(":")]),a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(":")]),a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(":")]),a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(":")]),a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(":")]),a("div",{staticClass:"ip-input-group-input flex-fill"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text",value:""}})])])])])]),a("tr",[a("td",{staticClass:"py-4",attrs:{colspan:"2"}},[a("b",{staticClass:"black"},[t._v("DNS服务器")])])]),a("tr",[a("td",[t._v("首选DNS")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})])])])])]),a("tr",[a("td",[t._v("备选DNS")]),a("td",[a("div",{staticClass:"ip-input-group float-left",attrs:{"data-plugin":"ipinput"}},[a("div",{staticClass:"ip-input-group-w d-flex"},[a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})]),a("div",{staticClass:"ip-input-group-span"},[t._v(".")]),a("div",{staticClass:"ip-input-group-input"},[a("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"50px"},attrs:{type:"text"}})])])])])])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm show_jmodal JURL",attrs:{"j-page-href":"window/alert/state_suc_2.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])])])]),a("div",{staticClass:"jtab_box w-100",staticStyle:{display:"none"}},[a("div",{staticClass:"jtab_r float-left w-100"},[a("h5",[a("i",{staticClass:"fa fa-clock-o"}),t._v("HDMI out 1")]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",{staticClass:"border-right align-top"},[a("table",{staticClass:"mr-3"},[a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c001-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1+3互动导插画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c001-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("互动效果画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c001-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("远端画面")])])])])]),a("td",{staticClass:"align-top"},[a("table",{staticClass:"ml-3"},[a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080I60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P50")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P30")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P25")])])]),a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c001-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P50")])]),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"})])])])])]),a("hr"),a("h5",[a("i",{staticClass:"fa fa-clock-o"}),t._v("HDMI out 2")]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",{staticClass:"border-right align-top"},[a("table",{staticClass:"mr-3"},[a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c002-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1+3互动导插画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c002-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("互动效果画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c002-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("远端画面")])])])])]),a("td",{staticClass:"align-top"},[a("table",{staticClass:"ml-3"},[a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080I60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P50")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P30")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P25")])])]),a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c002-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P50")])]),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"})])])])])]),a("hr"),a("h5",[a("i",{staticClass:"fa fa-clock-o"}),t._v("HDMI out 3")]),a("table",{staticClass:"info_normal mt-2 mb-2",staticStyle:{"margin-left":"20px"}},[a("tr",[a("td",{staticClass:"border-right align-top"},[a("table",{staticClass:"mr-3"},[a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c003-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1+3互动导插画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c003-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("互动效果画面")])])]),a("tr",[a("td",[a("label",[a("input",{attrs:{type:"radio",name:"c003-1"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("远端画面")])])])])]),a("td",{staticClass:"align-top"},[a("table",{staticClass:"ml-3"},[a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080I60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P50")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P30")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("1080P25")])])]),a("tr",[a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P60")])]),a("td",{staticClass:"pr-4"},[a("label",[a("input",{attrs:{type:"radio",name:"c003-2"}}),t._v(" "),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v("720P50")])]),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"}),a("td",{staticClass:"pr-4"})])])])])])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm show_jmodal JURL",attrs:{"j-page-href":"window/alert/state_suc_2.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 应用")])])])]),a("div",{staticClass:"jtab_box w-100",staticStyle:{display:"none"}},[a("div",{staticClass:"jvideo2 float-left"}),a("div",{staticClass:"float-left ml-3",staticStyle:{"min-width":"400px"}},[a("h5",{staticClass:"jtt2"},[a("i",{staticClass:"fa fa-file"}),a("span",[t._v("文件信息")])]),a("table",{staticClass:"mt-2 ml-2 mb-3 main_table"},[a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("主题")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("政治经济学")]),a("td",{staticClass:"text-right black p-2"},[t._v("主讲人")]),a("td",{staticClass:"text-left p-2"},[t._v("张三丰")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("录制时间")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("2019-00-00 15:22")]),a("td",{staticClass:"text-right black p-2"},[t._v("结束时间")]),a("td",{staticClass:"text-left p-2"},[t._v("2019-00-00 15:22")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("文件大小")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("122.6M")]),a("td",{staticClass:"text-right black p-2"},[t._v("文件时长")]),a("td",{staticClass:"text-left p-2"},[t._v("1H:25m:16s")])])]),a("h5",{staticClass:"jtt2"},[a("i",{staticClass:"fa fa-video-camera"}),a("span",[t._v("视频参数")])]),a("table",{staticClass:"mt-2 ml-2 mb-3 main_table"},[a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("分辨率")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("1920 × 1080")]),a("td",{staticClass:"text-right black p-2"},[t._v("帧率")]),a("td",{staticClass:"text-left p-2"},[t._v("24FPS")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("GOP")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("MPEG-4")]),a("td",{staticClass:"text-right black p-2"},[t._v("码流")]),a("td",{staticClass:"text-left p-2"},[t._v("MPEG-4")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("码流模式")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("MPEG-4")]),a("td",{staticClass:"text-right black p-2"},[t._v("编码模式")]),a("td",{staticClass:"text-left p-2"},[t._v("MPEG-4")])])]),a("h5",{staticClass:"jtt2"},[a("i",{staticClass:"fa fa-volume-up"}),a("span",[t._v("音频参数")])]),a("table",{staticClass:"mt-2 ml-2 mb-3 main_table"},[a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("码流")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("政治经济学")]),a("td",{staticClass:"text-right black p-2"},[t._v("采样位数")]),a("td",{staticClass:"text-left p-2"},[t._v("张三丰")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("通道数")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("2019-00-00 15:22")]),a("td",{staticClass:"text-right black p-2"},[t._v("采样率")]),a("td",{staticClass:"text-left p-2"},[t._v("2019-00-00 15:22")])]),a("tr",[a("td",{staticClass:"text-right black p-2"},[t._v("编码模式")]),a("td",{staticClass:"text-left p-2 pr-4"},[t._v("122.6M")]),a("td",{staticClass:"text-right black p-2"}),a("td",{staticClass:"text-left p-2"})])])]),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("h4",{staticClass:"tt01"},[a("div",{staticClass:"float-left"},[a("i",{staticClass:"fa fa-video-camera mr-1"}),t._v("本地视频 ")]),a("div",{staticClass:"jf-12 float-left mt-1 ml-3"},[a("span",[t._v("排序方式 ")]),a("label",{staticClass:"ml-2"},[a("input",{attrs:{type:"radio",name:"v-order"}}),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v(" 主题")]),a("label",{staticClass:"ml-2"},[a("input",{attrs:{type:"radio",name:"v-order"}}),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v(" 主讲人")]),a("label",{staticClass:"ml-2"},[a("input",{attrs:{type:"radio",name:"v-order"}}),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v(" 时间")]),a("label",{staticClass:"ml-2"},[a("input",{attrs:{type:"radio",name:"v-order"}}),a("span",{staticClass:"jradio"},[a("i",{staticClass:"jradio-dot"})]),t._v(" 时长")])]),a("a",{staticClass:"jbtn_xs bg_red white mt-1 px-2 float-right"},[a("i",{staticClass:"fa fa-trash"}),t._v(" 删除")])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table table_list w-100 jtable-1"},[a("tr",{staticClass:"border-bottom"},[a("th",[a("label",[a("input",{attrs:{type:"checkbox"}}),a("i",{staticClass:"fa fa-check jcheckbox"})])]),a("th",{staticStyle:{width:"40px"}},[t._v("序号")]),a("th",{staticClass:"text-left pl-3"},[t._v("文件名")]),a("th",{staticClass:"text-right pr-3"},[t._v("大小")]),a("th",{staticClass:"pl-3 text-left"},[t._v("操作")])]),a("tr",{staticClass:"border-bottom",staticStyle:{padding:"10px 0"}},[a("td",{staticClass:"text-center"},[a("label",[a("input",{attrs:{type:"checkbox"}}),a("i",{staticClass:"fa fa-check jcheckbox"})])]),a("td",{staticClass:"text-center"},[t._v("1")]),a("td",{staticClass:"pl-3"},[t._v("政治经济学2019-00-00 ASDF25646.mp4")]),a("td",{staticClass:"text-right pr-3"},[t._v("122.6M")]),a("td",{staticClass:"pl-3"},[a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-green mt-1"},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-red mt-1"},[a("i",{staticClass:"fa fa-trash"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-download"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-play"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-file"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("下载SW")]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("FTP上传")])])]),a("tr",{staticClass:"border-bottom",staticStyle:{padding:"10px 0"}},[a("td",{staticClass:"text-center"},[a("label",[a("input",{attrs:{type:"checkbox"}}),a("i",{staticClass:"fa fa-check jcheckbox"})])]),a("td",{staticClass:"text-center"},[t._v("1")]),a("td",{staticClass:"pl-3"},[t._v("政治经济学2019-00-00 ASDF25646.mp4")]),a("td",{staticClass:"text-right pr-3"},[t._v("122.6M")]),a("td",{staticClass:"pl-3"},[a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-green mt-1"},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-red mt-1"},[a("i",{staticClass:"fa fa-trash"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-download"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-play"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-file"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("下载SW")]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("FTP上传")])])]),a("tr",{staticClass:"border-bottom",staticStyle:{padding:"10px 0"}},[a("td",{staticClass:"text-center"},[a("label",[a("input",{attrs:{type:"checkbox"}}),a("i",{staticClass:"fa fa-check jcheckbox"})])]),a("td",{staticClass:"text-center"},[t._v("1")]),a("td",{staticClass:"pl-3"},[t._v("政治经济学2019-00-00 ASDF25646.mp4")]),a("td",{staticClass:"text-right pr-3"},[t._v("122.6M")]),a("td",{staticClass:"pl-3"},[a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-green mt-1"},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon icon-red mt-1"},[a("i",{staticClass:"fa fa-trash"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-download"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-play"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon mt-1"},[a("i",{staticClass:"fa fa-file"})]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("下载SW")]),a("a",{staticClass:"jbtn_xs gray mr-2 icon ml-3 px-2 mt-1"},[t._v("FTP上传")])])])]),a("div",{staticClass:"jpager"},[a("a",{staticClass:"fa fa-fast-backward FIRST CTRL",attrs:{"j-page-href":"","j-page-box":""}}),a("a",{staticClass:"fa fa-play fa-flip-horizontal PREV CTRL",attrs:{"j-page-href":"","j-page-box":""}}),a("span",{staticClass:"JPAGER_CTRL"},[a("a",{staticClass:"page JPAGE active",attrs:{"j-page-href":"","j-page-box":""}},[t._v("1")]),a("a",{staticClass:"page JPAGE",attrs:{"j-page-href":"","j-page-box":""}},[t._v("2")]),a("a",{staticClass:"page JPAGE",attrs:{"j-page-href":"","j-page-box":""}},[t._v("3")]),a("a",{staticClass:"page JPAGE",attrs:{"j-page-href":"","j-page-box":""}},[t._v("4")]),a("a",{staticClass:"page JPAGE",attrs:{"j-page-href":"","j-page-box":""}},[t._v("5")]),a("a",{staticClass:"page JPAGE",attrs:{"j-page-href":"","j-page-box":""}},[t._v("6")])]),a("a",{staticClass:"fa fa-play NEXT CTRL",attrs:{"j-page-href":"","j-page-box":""}}),a("a",{staticClass:"fa fa-fast-forward LAST CTRL",attrs:{"j-page-href":"","j-page-box":""}})])])])])}],X=(a("4194"),{mounted:function(){$('[data-plugin="ipinput"]').each((function(){var t=$(this),e=t.find("input"),a=e.length,s=parseInt(t.attr("data-letterlimit"));s||(s=3),t.find("input").each((function(i,l){var n=$(l);n.on("focus",(function(){""!=$(this).val()&&$(this).select(),t.addClass("focus"),$(this).addClass("focus")})),n.on("blur",(function(){t.removeClass("focus"),$(this).removeClass("focus")})),n.on("keyup",(function(t){var l=$(this).val();(39==t.keyCode||40==t.keyCode)&&i<a-1?e.eq(i+1).focus():38!=t.keyCode&&37!=t.keyCode||0==i?l.length==s&&i<a-1?e.eq(i+1).focus():""==l&&8==t.keyCode&&0!=i&&e.eq(i-1).focus():e.eq(i-1).focus()}))}))}))}}),tt=X,et=Object(p["a"])(tt,Q,K,!1,null,null,null),at=et.exports,st={data:function(){return{menuList:[],curPage:0}},components:{normalSettings:v,controlSettings:Z,recordSettings:at},mounted:function(){var t=this;$(document).ready((function(){$("#sec_box").loadPageScript("window/p-settings/001-1.html")})),$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserSubMenu",data:JSON.stringify({subMenuType:"settingsubmenu"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=[{title:"常规设置",num:1,fa:"fa-braille"},{title:"控制设备设置",num:2,fa:"fa-sliders"},{title:"录播设备设置",num:3,fa:"fa-video-camera"}];e.d.SubMenu.map((function(e){var s=e.replace("settingsubmenu","");a[s-1]&&t.menuList.push(a[s-1])})),t.menuList[0]&&(t.curPage=t.menuList[0].num)},error:function(t){console.log(t)}})},methods:{getCompentById:function(t){var e=["normalSettings","controlSettings","recordSettings"];return e[t]},loadPage:function(t){this.curPage=t.num}}},it=st,lt=Object(p["a"])(it,o,c,!1,null,null,null);e["a"]=lt.exports},4868:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADtklEQVRYR+2XTW8bVRSG33fstjQSeFyx6K4JdIZl/Q+S/oCKFJBYNl3GA2oqsWGFswIkpLjQSTdINTvYIFdiiZSEP5CwbCeijoTEzp5ApH7Ecw+6M3PNeBjb48Kq6ixs6c699zzn+wzxAo/tP2pY5A0BGhCxSTYE0gPYE5EurDMPwvWlXpmrWWaT2WNvPbZ5bnifwKpeE8ERiKygBoGafqdENkLPvTPr/tIAWmuCOyRsCDaVVe0UaWnfC1Yo0iZ4RYncDD23UwRxwQ9aQlyZClDzg88tyAcA3wTxBgBC5ATkoYrUl8cfv/ND0eWJpU53NQSIVn/d2czus7eDDQvYAuS7QoCa//BbgmsWWYlNHUtO/vUP01MiCIXYDJtOOw+ShUjj44CAjpGVNGZ+lWdnVsYAXvvqt0vnzw9/JnlZjDTwH4EZEAOk/yORH4899/1Ca/iP1kiuEVg2cUOgo55X2+HtpXAMoL4d6IWaFm60zF5qLGHWYkim1hHsDTxnZVbQ5d+PAOp3g31aaOSFTAMYgaSWiQRfHHvOp/NAxAC1bx5+WKlY30/SPC8oLyBxlw4PiZ4+qb799JO3jspCxAB1P/iDxMUXBUh8KyCJCOgeN53rpQF04C0sRL1ppp9lgbGYgDwZeO5CaQCTk/8XgA7eftMpXeBY94NdEsupGyeCj+rANNVSNyjgdlFtKDo6AphlMhNoRemZPzsXgO0ftkm5JcTVaRAKvCiROqlUeDJxn0A3o62hkmt/feT+NEsp/Z66KYD4bB6/TbpYNyJLsKOIq+G6s/sK4JUFXh4L2PceL0KiZSgJcVrd0328SLv/lAWTUsfWAwXwNcnX06bzuwDXQs89yEOYlJ4rDUfU4PWwebmbvTQeq86eHoHU82DacqEI/DJoOv8qXBf8wzYot+apKdRCrHPDgR4Q+013bQwgLSzZRmVadpGQuh/0QAkHTbdRJgDjSpjOA10S7ypWl7KjdvoBsp+9LBkV5c+B58bzv3m0qyzy/jx9YARgBAnQHeSGifp2sKsHSj1wgNTmt/R3Qd9zWiPhyRi+DyHlebUxKUgLu6FZNP7LaxC76GzUEqj3QPQF7ORbbd0PEgsWxNEsV+Sn4lhbiHT6nntz1uE0SHf0nJ+3yqyz5v0YQBKQp21Af3hKT2C18KzyIG9SXRcsDG+Iwob+VJvX71m4wtEpyX22SFxKc/8AZFp8ZJHgYrwO7AnRKtt6p8ZAYWXbPly1oFZFCxQs6hQDGFJ4oKA6RcWorOnNvr8BaZADIF+LQTwAAAAASUVORK5CYII="},"4bbc":function(t,e,a){},"4f08":function(t,e,a){"use strict";var s=a("5225"),i=a.n(s);i.a},"508d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdklEQVQ4T+2TIRKCABQFd5uFA1hodjLVZNcrWgjewMYBqFSNZutzmCE4UnAg8vt7s/Nnnyw8F+ZZvyDJCTgAD/WWZA9cRtKr+vqmnhAkaYAzcFePSWqgHUOV2m0F2w/meDCYVwBv9ZlkB5SDPGr/u531t/DvOj80Tm0RhFPUtwAAAABJRU5ErkJggg=="},5225:function(t,e,a){},"570f":function(t,e,a){t.exports=a.p+"img/loginbg.a5235d71.png"},"5a00":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACu0lEQVRYR8VXS24UMRCt2rEDTpDJCQI7JBaQE2CfIHCD4QQJEgt2CScgOYGLJSuSPVLgBDAnIEjsH3pNeeTuuL8DiqWRpmds16vfq9cqd7z0ju3LIgAhhJWq7gF4TgdU9RLAxsx+zHVoFoAQwlpEjlT1Uc0QgK8icm5m76cCmQQghECDSVVXxcUbEdnz5/K7AGAkopkR0OAaBRBCeCkip6r6QER+ATgTkTMzu4kxgrenlDSEwP/Xqsoo3QdwIyKvzex8CMEgAHquqtd+wTfmnIbzhSWA/BuBsCZE5MBBHA5FoheAe3TtYb8CEErjNFgDwN8dhInIM6bDzPb7ojAE4ERVjz3sq67xIQAFCNYC0/HGzE5qIHoBxBh5mK32qptHL8pjVQ28FAC9pZFW0YUQGieGolAFUOYewMPSexalqn7oacMWWE/FTwf5uFYLfQBYzacicpVSasjGw1oWZTWtAFqGYowsSNYCO4Id1Fp9AHL+P6aUmjB7zhnqFyOtXT3TVweDAJxQtvSqqk8A3MsAVP8eBxo6yOu3iHwpnknbq0UARjyd9fciAAAuyO2Fx28BPB2yDOCTqr4r9rBoj5YCaPVvhxknFWHRilUuGKuBW4fmtKF3TuaCfwMgt6MPnmYs+xjmgLo1/XaKgIi0WmpW1XVad24NVIloIYBFRLRlvC4VzwGxmIqd9fIwqlLoFCCUcE7pm5RSqaa2x0fHsYuK/do4HgLheuI7ldSicezhY1VzJF+a2eEUr/OeGCPPHohIr/fcO1mSeatRXm0lWQ2Qe/7ZlTM1JGVcrzidJEpVlWM0C01+v+i+A/BdgZLd+SEL2PVOojR76BTMUZxleCafHA0K0fJdYeMacndZXobZq5oynbmtLSpnMuKgFC8PjqagJ88MNz9ZLZFsqH7/76vZnC6YundRBKZePmXfH8Qc4TCVcK51AAAAAElFTkSuQmCC"},"5d9f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._m(1),a("div",{staticClass:"stat-card2 col-12 float-left"},[a("keep-alive",[a(t.getCompentById(t.curPage),{tag:"component"})],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-sitemap"}),t._v(" 策略管理 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"float-left ml-4 nav_page JCHANNAV",staticStyle:{"margin-top":"33px",display:"none"}},[a("div",{staticClass:"jbtn JCHANMENU JURL TEST active",staticStyle:{display:"none"},attrs:{id:"strategysubmenu1","j-page-href":"window/p-strategy/001-1.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-strategy-01.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-cog"}),t._v(" 策略管理 "),a("i",{staticClass:"jdown fa fa-caret-down"})]),a("div",{staticClass:"jbtn JCHANMENU JURL TEST",staticStyle:{display:"none"},attrs:{id:"strategysubmenu2","j-page-href":"window/p-strategy/002.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-strategy-02.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-cog"}),t._v(" 策略关键词设置 "),a("i",{staticClass:"jdown fa fa-caret-down"})])])}],l=function(t){return a.e("chunk-5d9ba8b7").then(function(){var e=[a("01ea")];t.apply(null,e)}.bind(this)).catch(a.oe)},n={data:function(){return{curPage:0,menuList:[]}},components:{strategyMng:l},methods:{getCompentById:function(t){var e=["strategyMng"];return e[t]}},mounted:function(){this.menuList=[{title:"策略管理",num:0,fa:"fa-cog"}],this.curPage=this.menuList[0].num}},r=n,o=a("9ca4"),c=Object(o["a"])(r,s,i,!1,null,null,null);e["a"]=c.exports},6326:function(t,e,a){"use strict";var s=a("c188"),i=a.n(s);i.a},"67d5":function(t,e,a){},6810:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAO0lEQVQ4T2NkoBAwUqifYRAZ8P////9I3nFkYGDYj+Y9FDFGRkaw6+FeGDWAgWEYhAG5SXoQJWVyvQAAHrQwEa9b7JcAAAAASUVORK5CYII="},"6c3b":function(t,e,a){"use strict";var s=a("0cea"),i=a.n(s);i.a},"6d9f":function(t,e,a){},"6eb2":function(t,e,a){},"6f3f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAABHNCSVQICAgIfAhkiAAACDlJREFUaEPVmj1uXDcQx8kTWOkD2G6DAJFPYBlp0kU+ge0TWHwHSKQD6NE6gaUDBJaL1JabIF0kIH2ktCkiAynSMfgNZh5muXz7vZLzgIWwWj6S//mePxnDFp+c805K6ZYlcs6PQgi/hRDehBBO7P/bWj5uY2IAgSWE8DKE8DildJ1zfhdC2Nf1bksph13XnWxjfebcOLCc848hhIMQwk4p5WPXdXs5570QwocGiOsQQkopnW8a4MaA5ZzRBlrC5Ox5klK6zDkDCnBjz0UI4SilxN+NPGsDyznvKqCJjZdSzrque5lzxhzf2m5LKVchhMsY44sGglMFiCbXelYGVvnRxCYAFWPEHHkIGF6L5nN7+FmM8WkDweG6AWYlYH3fv44xsjhBYnjwKQBhfvwz58wYfE6eUspJ13UHfd8/7bruo44B4GmM8WEFcK0AsxQwDQKYldcAG/6kgDAleVSjfxh4HcN7mCa++Mz7FCZbSnkTY3xQAbzWCHq2jG0uDGxGADgiN9V5qe97tOD96FUIgehnYK9TSo/9ZlUYB6WUgwZAAgsRVKxh3rMQsFa4VrN7SY6qF9FkDAAzwauu63Y10OBz9rBREvbEA0DVXh1giJyY99xnVWCvUkqD2TU2Vof3wez6vj+PMX6v71CVEEykOmkJqJRy4fxvu8BSSqMCqbVrYd823dCmBJQxFfR9DzCLnPcKDBOU4KIBY7c2177vCRKvHRhJ5C1wnwWwOhlrsp3yCfWhaxcgLlJKzz5LYI3wftN13ZAWNEqS46zan8hxIYTnrZrx3jVWJ2O/UfU7EvGO96e+79GaJWaiKyY5EUjuFZjrtaQS0VSwX0phs/jO1yGE30spX8YY/yFpa8nF+KGObJnuvQJrJGOrB6kyKI5Prco4Pj7+Ocb4FwUyQqg2jrbQ2pAb7w1YnXStHmTTGiR+6bruKxfuyX9/ppR+0DF1r3aeUnpu4+8T2JCMrR40PyGshxB+ijF+S8WAyVIumSm6cT5pg8kn9LvPY9pc0vLbM1QkVvepz30XY/y1lMJf6sV/qRtdF0D0HEow/DKl9KRhqneToHPOPhlLPThSGlH7oRV8rVmKNZK2CKny3zsDJmalYAYNjIDbm9X6N5K21JGqcUvm2wVWSiGird2+ewHEGG+0V5tqTF1Fs11gc3uG1QZIf1YlbWaS1KHREauYanNay63atqy29flv0Yzy+KQ9WkfOmm5RYDg/zFLNS8zf6hIjrMWpchczNOvItYEtsbeNDK1YY+acohHmLbSQxupJYJkqx7/aBBc/gyy6iTHS1zU77ZV9zL/Y4C34eS2qTItomCvj9mVJrWQgihbiOSaEPU+lIzmJ0ogu2LgLG7Y0F++5fr+Wkq6HLbJokT2vZIo2MaYzQnbOpcpGuH60dKUc5Vo8/lrAHMDDES5wiotXsyOc11z/FOm6iGbGxmwEGJNr5d4yTxyepAqTC0845S+0OlDmywSHeaA3BmwB85zaS831z9vsMr9vHJgDCFXNaUrNxeNHhG+InY0f+Nn6WwOm5tmiqptc/zLaWGTsVoFV5rkfYyQnbbQr2HrwWESKdzlGNNYqkfRwfKrojTF+0nNlzOwb3ucQT6PiQ/oqvSWwW0p5YAd8LnIOYxYF6uaWtZ0lTOxhovLIOdMFZz0bvtUDAMzlSBvKR1T1lDfKEV5CehpBSoUAV++PXDXaWT1piTZprnuhpdIDNycdshwZ8a7Ox5p268AoCDtjM96fsXYbgXUQpiT46FqEV6UUJuD8GE3BpdPNQrTwIR8hrTO4CMd3pBACk7IYnTVJGbAfFCDfH6aUjrQTZm5qQviRU61coACkB+MkxwmNo1/et/6MfAgVIZwkwrej4PoEiEnsTgbsLJtjo6gYLSBF2CJqwhulztAqlYacG9vm0S5ac2DYAMJ4S3iHx1c6jnFDCuA3BGMaawCzWwe+xEIozP9ej33RNMKS6j/GeIXGqBbEV6oHNaMxNCfSt9/1UoocKjggCIEyiQ2clVJ27ajISFQ7O7M8FkKAusPsMTExKTYYYwQMFDkaYx3WJ/cZw2W8CHsDYM2OnU6F+5xzqdQ8F5je23itFTmLIzk+xhVKB2ymqJw+fmXWgvYRysShPVcidB5AIwADZmXZYIqlFN5HmAA9mwCmJOffdgtAzYvqgOCC2iUHVcEDqaIltIdU8SFhk0xIZv/mz6qJ0eqdTTqzNo1JUFChW8AYgKm/WRy49KYovmVmp+bGdzvlByC31mRDlYMLMOfMLMh4O0j/ggLXBSoENCtRS8DypuiCF8tbZzAzeNgBnB0EvEM7Xdftu83TUuDwA2PkgbGoNp22EH95zBfkdoADNpMfrIRmGpPQr0Kt3UWiaZ3HLOqY/fJd6jmnrWeuoZQDgwoYkYi85YERSckrmCrhHs7QDh/O6cDHErSaHMHjPWWYtyKKCTV9XifoSCpQH5MpJSo6s/LrMBnmQAiFISJvIS0+HBgQCOw7N2eISnzIc6QJpGzhF5NEWAZk9IZAAyjClkKaufW6krgC4NSP6SImuBJJ0GNS+7//XyoPd1nSnPKCiMipY9/3EKVI+VZrRJGQy2VGiaHJC/UjEjiJ2Oo65iOk04MxZphTNYv05V3nR2hd9qH5i2CD5kVjfh7t+9CaVSSnTWCqYlr1Q7dRmkZetoDAvUPMdQjbHphL1pyyyDy2aQds2OwMYCRsxtmpjgcmc1bKEdAAQ5KWVCWDq09xT8rOp6jpWIBJDQha9CEbjV1qJcN85nMQnczzxm4MVGsiHDaNdhEc8zOv+LP5uXMNWVMFIXPa3Mp58tvlf6CKCdmj6DH+AAAAAElFTkSuQmCC"},"79e0":function(t,e,a){"use strict";var s=a("6eb2"),i=a.n(s);i.a},"7b5f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orgList"},[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"jbtn2 bg_blue",on:{click:t.openBuildForm}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加教学楼栋数据")]),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.visible.building=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" Excel数据导入楼栋 ")]),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.visible.floor=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" Excel数据导入楼层 ")]),a("a",{staticClass:"jbtn2 bg_red",on:{click:t.removeBatch}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 批量删除")])]),t._m(1)]),a("div",{staticClass:"sec_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"",lazy:"",load:t.load,"row-key":"ID","max-height":t.maxHeight,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"BuildingName",label:"部门名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.hasChildren?e.row["BuildingName"]:"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"Queue",label:"Floor"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.hasChildren&&e.row.children?e.row.children.length:e.row["Floor"])+" ")]}}])}),a("el-table-column",{attrs:{prop:"Type",label:"是否公共区域"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("true"==e.row.Type?"公共区域":"非公共区域")+" ")]}}])}),a("el-table-column",{attrs:{prop:"Remarks",label:"备注"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.BuildingName||e.row.Floor?a("div",[a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(a){e.row.hasChildren?t.editBuildData(e.row):t.editFloorData(e.row)}}},[a("i",{staticClass:"fa fa-pencil"})]),e.row.hasChildren?a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(a){return t.addFloorData(e.row)}}},[a("i",{staticClass:"fa fa-plus"})]):t._e(),a("a",{staticClass:"JURL jbtn_xs hover_red",on:{click:function(a){return t.deleteBuildData(e.row)}}},[a("i",{staticClass:"fa fa-trash"})])]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1),a("el-dialog",{attrs:{title:"导入楼栋",visible:t.visible.building,width:"30%"},on:{"update:visible":function(e){return t.$set(t.visible,"building",e)}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadBuildingFile,limit:1,data:{Type:"UploadBuildingData"},"with-credentials":!0,"file-list":t.fileBuildList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadBuildingTemplate}},[t._v("下载模板")])],1)],1),a("el-dialog",{attrs:{title:"导入楼层",visible:t.visible.floor,width:"30%"},on:{"update:visible":function(e){return t.$set(t.visible,"floor",e)}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFloorFile,limit:1,data:{Type:"UploadFloorData"},"with-credentials":!0,"file-list":t.fileFloorList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadFloorTemplate}},[t._v("下载模板")])],1)],1),a("el-dialog",{attrs:{title:(t.tempData?"编辑":"新增")+"教学楼栋信息",visible:t.visible.isShowAddBuilding,width:"35%"},on:{"update:visible":function(e){return t.$set(t.visible,"isShowAddBuilding",e)}}},[a("el-form",{ref:"formBuilding",attrs:{model:t.form.formBuilding,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{model:{value:t.form.formBuilding.buildingName,callback:function(e){t.$set(t.form.formBuilding,"buildingName",e)},expression:"form.formBuilding.buildingName"}})],1),a("el-form-item",{attrs:{label:"是否公共区域"}},[a("el-switch",{model:{value:t.form.formBuilding.accessType,callback:function(e){t.$set(t.form.formBuilding,"accessType",e)},expression:"form.formBuilding.accessType"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.formBuilding.notes,callback:function(e){t.$set(t.form.formBuilding,"notes",e)},expression:"form.formBuilding.notes"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelBuildForm}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveBuildForm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:(t.tempData?"编辑":"新增")+"楼层信息",visible:t.visible.isShowAddFloor,width:"35%"},on:{"update:visible":function(e){return t.$set(t.visible,"isShowAddFloor",e)}}},[a("el-form",{ref:"formBuilding",attrs:{model:t.form.formFloor,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"楼层信息"}},[a("el-input",{model:{value:t.form.formFloor.floorName,callback:function(e){t.$set(t.form.formFloor,"floorName",e)},expression:"form.formFloor.floorName"}})],1),a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{attrs:{readonly:!0},model:{value:t.form.formFloor.buildingName,callback:function(e){t.$set(t.form.formFloor,"buildingName",e)},expression:"form.formFloor.buildingName"}})],1),a("el-form-item",{attrs:{label:"是否公共区域"}},[a("el-switch",{model:{value:t.form.formFloor.accessType,callback:function(e){t.$set(t.form.formFloor,"accessType",e)},expression:"form.formFloor.accessType"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.formFloor.notes,callback:function(e){t.$set(t.form.formFloor,"notes",e)},expression:"form.formFloor.notes"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFloorForm}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveFloorForm}},[t._v("确 定")])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-sitemap mr-1"}),t._v("组织机构数据 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],l=(a("b4fb"),a("56ea"),a("dbb3"),a("2eeb"),a("e35a"),a("5e9f"),a("232a")),n=a("6c6d"),r=a("82ae"),o=a.n(r),c={data:function(){return console.log("-----节流啊-------"),{fileBuildList:[],fileFloorList:[],maxHeight:600,tableData:[],multipleSelection:[],currentPage:1,pageSize:50,total:0,form:{formBuilding:{buildingName:"",buildingCode:"",queue:"1",accessType:!0,notes:""},formFloor:{floorName:"",BID:"",buildingName:"",buildingCode:"",queue:"1",accessType:!0,notes:""}},tempData:{},visible:{building:!1,floor:!1,isShowAddBuilding:!1,isShowAddFloor:!1}}},mounted:function(){this.onloadData(this.currentPage)},methods:{handleSelectionChange:function(t){this.multipleSelection=t},removeBatch:function(){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t.multipleSelection,111111111);var e=t.multipleSelection.filter((function(t){return t["Floor"]&&t.ID})),a=t.multipleSelection.filter((function(t){return!t["Floor"]&&t.ID}));return 0==e.length?$.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleBuilding",data:JSON.stringify({data:a.map((function(t){return t.ID}))}),contentType:"application/json; charset=utf-8",dataType:"json"}):$.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleFloor",data:JSON.stringify({data:e.map((function(t){return t.ID.replace("F_","")}))}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleBuilding",data:JSON.stringify({data:a.map((function(t){return t.ID}))}),contentType:"application/json; charset=utf-8",dataType:"json"})}))})).then((function(){t.$message({type:"success",message:"删除成功!"}),window.CSJ.updateTree=Math.random(),t.GetOrgData()})).catch((function(e){console.log(e,111111),t.$message({type:"info",message:"已取消删除"})}))},addFloorData:function(t){this.tempData=null,this.visible.isShowAddFloor=!0;var e=t["BuildingName"];this.form.formFloor={floorName:"",buildingName:e,BID:t.ID,buildingCode:"",queue:"1",accessType:!0,notes:""}},cancelFloorForm:function(){this.visible.isShowAddFloor=!1,this.tempData=null},saveFloorForm:function(){var t=this;if(this.tempData){var e=Object(n["a"])(Object(n["a"])({},this.form.formFloor),{},{id:this.tempData.ID.replace("F_",""),building:this.form.formFloor.BID,accessType:this.form.formFloor.accessType?"yes":"No"});$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateFloorData",data:JSON.stringify({data:e}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){window.CSJ.updateTree=Math.random(),t.visible.isShowAddFloor=!1,t.tempData=null,t.GetOrgData()}))}else{var a=Object(n["a"])(Object(n["a"])({},this.form.formFloor),{},{building:this.form.formFloor.BID,accessType:this.form.formFloor.accessType?"yes":"No"});$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/SaveFloorData",data:JSON.stringify({data:a}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){t.visible.isShowAddFloor=!1,t.tempData=null,window.CSJ.updateTree=Math.random(),t.GetOrgData()}))}},openBuildForm:function(){this.tempData=null,this.visible.isShowAddBuilding=!0,this.form.formBuilding={buildingName:"",buildingCode:"",queue:"1",accessType:!0,notes:""}},editFloorData:function(t){console.log("编辑build数据",t);var e=this.tempData=t,a=e["Floor"],s=e["BuildingName"],i=e["BuildingCode"],l=e["Queue"],n=e["Type"],r=e["Remarks"];this.visible.isShowAddFloor=!0,this.form.formFloor={floorName:a,buildingName:s,BID:t.BID,buildingCode:i,queue:l,accessType:n,notes:r}},editBuildData:function(t){console.log("编辑build数据",t);var e=this.tempData=t,a=e["BuildingName"],s=e["BuildingCode"],i=e["Queue"],l=e["Type"],n=e["Remarks"];this.form.formBuilding={buildingName:a,buildingCode:s,queue:i,accessType:"yes"===l,notes:n},this.visible.isShowAddBuilding=!0},deleteBuildData:function(t){var e=this;console.log("删除build数据",t),this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/".concat(t.hasChildren?"DeleteBuilding":"DeleteFloor"),data:JSON.stringify(t.hasChildren?{sno:t.ID}:{id:t.ID.replace("F_","")}),contentType:"application/json; charset=utf-8",dataType:"json"})})).then((function(){e.$message({type:"success",message:"删除成功!"}),window.CSJ.updateTree=Math.random(),e.GetOrgData()})).catch((function(t){console.log(t,111111),e.$message({type:"info",message:"已取消删除"})}))},cancelBuildForm:function(){this.$refs.formBuilding.resetFields(),this.visible.isShowAddBuilding=!1},saveBuildForm:function(){var t=this,e=null;if(this.tempData){var a={data:Object(n["a"])(Object(n["a"])({},this.form.formBuilding),{},{accessType:this.form.formBuilding.accessType?"yes":"No",id:this.tempData.ID})};e=$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateBuildingData",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json"})}else{var s=Object(n["a"])(Object(n["a"])({},this.form.formBuilding),{},{accessType:this.form.formBuilding.accessType?"yes":"No"});e=$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/SaveBuildingData",data:JSON.stringify({data:s}),contentType:"application/json; charset=utf-8",dataType:"json"})}e.then((function(){t.$refs.formBuilding.resetFields(),t.visible.isShowAddBuilding=!1,t.GetOrgData()}))},load:function(t,e,a){var s=this;$.ajax({type:"POST",url:"../Services/GetOrganisationData.asmx/GetFloorDetails",data:JSON.stringify({building:t.ID}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){s.tableData[t._num].Floor=e.d.value.length,a(e.d.value.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{BuildingName:t.BuildingName,ID:"F_"+e.ID,BID:t.ID,hasChildren:!1})})))}})},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetBuildingsDetails",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.tableData=t.d.value.map((function(t,e){return t.hasChildren=!0,t._num=e,t})),e.tableData=[].concat(Object(l["a"])(e.tableData),Object(l["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({}))),e.total=t.d.totalRows}})},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},GetOrgData:function(){this.tableData=[],this.total=0,this.onloadData(1)},downloadFloorTemplate:function(){window.open("/Uploads/ImportFloorCSVTemplate.xlsx","_blank")},downloadBuildingTemplate:function(){window.open("/Uploads/ImportBuildingCSVTemplate.xlsx","_blank")},uploadBuildingFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadBuildingData"),["BuildingName","BuildingCode","Queue","Remarks","Public"].map((function(t){a.append("FieldList",t)})),o.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.onloadData(e.currentPage),t}))},uploadFloorFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadFloorData"),["Floor","BuildingName","BuildingCode","Queue","Remarks","Public"].map((function(t){a.append("FieldList",t)})),o.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.onloadData(e.currentPage),t}))}}},d=c,u=a("9ca4"),m=Object(u["a"])(d,s,i,!1,null,null,null);e["a"]=m.exports},"7cdc":function(t,e,a){},"82ea":function(t,e,a){},"8b7f":function(t,e,a){"use strict";var s=a("e7ab"),i=a.n(s);i.a},"8c1b":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return o}));a("2eeb"),a("e18c");var s=a("e04f"),i=a.n(s),l={SystemOn:"系统开",SystemOff:"系统关",ComputerOn:"电脑开",ComputerOff:"电脑关",SystemUnlock:"面板解锁",SystemLock:"面板关锁",IsSystemLockFalse:"面板解锁",ProjectorOn:"投影仪开",ProjectorOff:"投影仪关",ProjectorPowerOn:"投影仪电源开",ProjectorPowerOff:"投影仪电源关",ComputerPowerOn:"电脑电源开",ComputerPowerOff:"电脑电源关",AmplifierPowerOn:"音响电源开",AmplifierPowerOff:"音响电源关",OtherPowerOn:"其他电源开",OtherPowerOff:"其他电源关",Ac1OnStrategy:"空调1开",Ac1OffStrategy:"空调1关",Ac2OnStrategy:"空调2开",Ac2OffStrategy:"空调2关",Ac3OnStrategy:"空调3开",Ac3OffStrategy:"空调3关",Ac4OnStrategy:"空调4开",Ac4OffStrategy:"空调4关",ClassroomLightOnStrategy:"教室灯光开",ClassroomLightOffStrategy:"教室灯光关",PodiumLightOnStrategy:"讲台灯光开",PodiumLightOffStrategy:"讲台灯光开",CurtainOpen:"窗帘开",CurtainClose:"窗帘关",CurtainStop:"窗帘停",ScreenDown:"幕布降",ScreenRise:"幕布升",ScreenStop:"幕布停",Volume:"调整音量",GeneralVolume:"调整音量",GeneralVolumeDown:"调整音量",GeneralVolumeUp:"调整音量",WiredMicVolume:"调整有线音量",WirelessMicVolume:"调整无线音量",Logout:"注销",WiredMicDown:"有线麦增大",WiredMicUp:"有线麦减小",WiredMicMute:"有线麦静音",WirelessMicDown:"无线麦增大",WirelessMicUp:"无线麦减小",WirelessMicMute:"无线麦静音",Desktop:"信号源设置为电脑",Laptop:"信号源设置为笔记本",DigitalBooth:"信号源设置为DigitalBoot",DigitalEquipment:"信号源设置为数字设备",Dvd:"信号源设置为DVD",TV:"信号源设置为TV",VideoCamera:"信号源设置为VideoCameraWeb",RecordingDevice:"信号源设置为RecordingDeviceWeb",BlurayDvd:"信号源设置为BlurayDvdWeb",SystemOnWeb:"系统开",SystemOffWeb:"系统关",ComputerOnWeb:"电脑开",ComputerOffWeb:"电脑关",SystemUnlockWeb:"面板解锁",SystemLockWeb:"面板关锁",ProjectorOnWeb:"投影仪开",ProjectorOffWeb:"投影仪关",ProjectorPowerOnWeb:"投影仪电源开",ProjectorPowerOffWeb:"投影仪电源关",ComputerPowerOnWeb:"电脑电源开",ComputerPowerOffWeb:"电脑电源关",AmplifierPowerOnWeb:"音响电源开",AmplifierPowerOffWeb:"音响电源关",OtherPowerOnWeb:"其他电源开",OtherPowerOffWeb:"其他电源关",CurtainOpenWeb:"窗帘开",CurtainCloseWeb:"窗帘关",CurtainStopWeb:"窗帘停",ScreenDownWeb:"幕布降",ScreenRiseWeb:"幕布升",ScreenStopWeb:"幕布停",VolumeWeb:"调整音量",GeneralVolumeWeb:"调整音量",GeneralVolumeDownWeb:"调整音量",GeneralVolumeUpWeb:"调整音量",WiredMicVolumeWeb:"调整有线音量",WiredMicVolumeWebWeb:"调整有线音量",WirelessMicVolumeWeb:"调整无线音量",WiredMicDownWeb:"有线麦增大",WiredMicUpWeb:"有线麦减小",WiredMicMuteWeb:"有线麦静音",WirelessMicDownWeb:"无线麦增大",WirelessMicUpWeb:"无线麦减小",WirelessMicMuteWeb:"无线麦静音",DesktopWeb:"信号源设置为电脑",LaptopWeb:"信号源设置为笔记本",DigitalBoothWeb:"信号源设置为DigitalBoot",DigitalEquipmentWeb:"信号源设置为数字设备",DvdWeb:"信号源设置为DVD",TVWeb:"信号源设置为TV",VideoCameraWeb:"信号源设置为VideoCameraWeb",RecordingDeviceWeb:"信号源设置为RecordingDeviceWeb",BlurayDvdWeb:"信号源设置为BlurayDvdWeb"};function n(t){var e=window.sessionStorage.getItem("GetFloorClassByBuilding_"+t);return new Promise((function(a){if(e)try{return void a(JSON.parse(e))}catch(s){console.log("本地获取失败，远程请求")}$.ajax({type:"POST",url:"../Services/GetSetSystemConfigInfo.asmx/GetFloorClassByBuilding",data:JSON.stringify({building:t}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){window.sessionStorage.setItem("GetFloorClassByBuilding_"+t,JSON.stringify(e.d.value)),a(e.d.value)},error:function(){a([])}})}))}function r(){return new Promise((function(t,e){$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"success"===e.d.status&&t(e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}})))},error:function(t){e(t)}})}))}function o(){$.ajax({type:"POST",url:"../Services/UserLogs.asmx/Logout",contentType:"application/json; charset=utf-8",data:JSON.stringify({cookie:i.a.get().AuthCookie}),dataType:"json"}).then((function(){window.location.href="./login.html"})).catch((function(){window.location.href="./login.html"}))}},"8ed0":function(t,e,a){t.exports=a.p+"img/newElectFun.4c2c10a0.png"},"8f7c":function(t,e,a){},9012:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"jf-12 font-weight-normal ml-2 gray"},[a("label",{class:[{disabled:t.disabled,checked:t.checked}],staticStyle:{height:"20px"}},[a("input",{ref:"cbx",staticClass:"j-single",attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:t.updateValue}}),a("span",{class:["jswift"],style:{width:t.labelWidth}},[a("i",{staticClass:"jswift-btn"}),a("i",{staticClass:"off"},[t._v(t._s(t.onLabel))]),a("i",{staticClass:"on"},[t._v(t._s(t.offLabel))])])])])},i=[],l={data:function(){return{}},model:{prop:"checked",event:"change"},props:{labelWidth:{type:String,default:"60px"},checked:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},onLabel:{type:String,default:"开启"},offLabel:{type:String,default:"关闭"}},methods:{updateValue:function(t){this.$emit("change",t.target.checked),this.checked=t.target.checked}}},n=l,r=a("9ca4"),o=Object(r["a"])(n,s,i,!1,null,"6bb9145b",null);e["a"]=o.exports},"92f8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAACOElEQVRYR9WXQXLTQBBFf6tEWEbyBWIvpG3MCTAnIJyAsIy8IDkByQmSjZQl4gSEExBuYLYWVTEXsMQuplTTVMtxSpLHlogUFLSzNd3zpv/0nxHZQfSZgAN0+CjghOwgSgjY7ZADzPhCvWAaAvS2SxDF/I4sf3poEH3sFGRh2mSd31jG8zTuCkRkicfOAQmA7UdXRHjdBYzIkozdMAPRycOMn/zbHCYng6QNwJ4fnYLwoZxLLUxb5liCaORZlUzaW4Y0gWHCmcQbjK/5PAz+HnvuUP7LQHTyMPAt9pxRL4i4CYTEKtCbDAQsi7p/xD8Sz7kogJTlYfAs9tyBHUwnBNpvAqMIrwyFUVkaReYgORrMiiAaeeaeI4Z3TcDLtkHyshRAdPLIRqKdNGzaUboF5WVZA7H86ZCIpAKZ5W8q6d9Wpwwi1eDFs1G+I+836yq5dXnTB9J+9vvWnBg76bGu7erCiA3EY6cvi4RBy+67NSdlW1gDKU/Q9AhYdV8VeDXIZTQq939V0qJXLG2gKubRQcA4m4+d08YgkqCRqT0VkHKbbqpMpTR3/jIjwl5VeXXvxQKSI+e6KrYeSAN3fTogd8d8KxXp+T8uQPy+KpnuvbhqnbhagzZdaupM0CqIFUTHBnBeZ+KHmNnaobdpIuuB7lrX3h8dBOBPc889rFPJrXskO4k53YOCZRi4qpOwMIY5VEQhmH8lY3eyLX4rSBu3s9XkivnFNph/B1LhsP8JSItfgPkbu26v/AGlqB2/ydjw9AAAAABJRU5ErkJggg=="},9897:function(t,e,a){"use strict";var s=a("448d"),i=a.n(s);i.a},9950:function(t,e,a){},"9d64":function(t,e,a){t.exports=a.p+"img/logo.b936f870.png"},a1bf:function(t,e,a){"use strict";var s=a("8f7c"),i=a.n(s);i.a},a332:function(t,e,a){t.exports=a.p+"img/electFun.645f66f7.png"},b165:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2eeb"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("053b"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e35a"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5e9f"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__),_components_switchbtn_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("9012");__webpack_exports__["a"]={data:function(){return{form:{Semesterno:1,SectionInfo:[],Reserve:{NonWorkingDays:!1,AutoReview:!1,ResTime:[moment("09-01","MM-DD")._d,moment("09-01","MM-DD").add(150,"day")._d]},Transfer:{NonWorkingDays:!1,AutoReview:!1,TransferTime:[moment("09-01","MM-DD")._d,moment("09-01","MM-DD").add(150,"day")._d]}},dbItem:{ReserveTransfer:[],SchoolInfo:{},SectionInfo:[],SemsterInfo:{AutoHoliday:!0,Friday:!0,Monday:!0,Saturday:!1,Sunday:!1,Thursday:!0,Tuesday:!0,Wednesday:!0}}}},components:{switchbtn:_components_switchbtn_vue__WEBPACK_IMPORTED_MODULE_4__["a"]},mounted:function(){this.loadDataBySemno(this.form.Semesterno)},methods:{SaveAllData:function(){var t=this;axios.post("/Services/SystemSetting.asmx/UpdateSystemInfo",{data:{Semno:this.form.Semesterno,ReserveTransfer:[{Type:"Reserve",NonWorkingDays:this.form.Reserve.NonWorkingDays,AutoReview:this.form.Reserve.AutoReview,StartTime:moment(this.form.Reserve.ResTime[0]).format("YYYY-MM-DD"),EndTime:moment(this.form.Reserve.ResTime[1]).format("YYYY-MM-DD")},{Type:"Transfer",NonWorkingDays:this.form.Transfer.NonWorkingDays,AutoReview:this.form.Transfer.AutoReview,StartTime:moment(this.form.Transfer.TransferTime[0]).format("YYYY-MM-DD"),EndTime:moment(this.form.Transfer.TransferTime[1]).format("YYYY-MM-DD")}],SemesterInfo:{SemesterName:["上学期","下学期"][this.form.Semesterno-1],StartDate:moment(this.dbItem.SemsterInfo.StartDate).format("YYYY-MM-DD"),TotalWeeks:this.dbItem.SemsterInfo.TotalWeeks,Sunday:this.dbItem.SemsterInfo["Sunday"],Monday:this.dbItem.SemsterInfo["Monday"],Tuesday:this.dbItem.SemsterInfo["Tuesday"],Wednesday:this.dbItem.SemsterInfo["Wednesday"],Thursday:this.dbItem.SemsterInfo["Thursday"],Friday:this.dbItem.SemsterInfo["Friday"],Saturday:this.dbItem.SemsterInfo["Saturday"],AutoHoliday:this.dbItem.SemsterInfo.AutoHoliday},SectionInfo:this.form.SectionInfo.map((function(t,e){return{Section:2*e+1,Checked:t.isCheck,StartTime:moment(t.value[0]).format("HH:mm"),StopTime:moment(t.value[1]).format("HH:mm")}})),SchoolInfo:{SchoolEngName:this.dbItem.SchoolInfo.SchoolEngName,SchoolName:this.dbItem.SchoolInfo.SchoolName,LogoLocation:this.dbItem.SchoolInfo.LogoLocation}}}).then((function(){t.$message("保存成功")}))},fmtPath:function(t){return"../Uploads/"+t.replace("~/Uploads/","")},updateFile:function(t){var e=this;console.log(t,"updload");var a=t.target.files;void 0!=a[0]&&null!=a[0]&&0!=a.length&&$.ajax({url:"../../../Services/Handler.ashx",type:"POST",data:new FormData($("form")[0]),cache:!1,contentType:!1,processData:!1,success:function(t){$("#fileProgress").hide(),$("#lblMessage").html("<b>"+t.name+"</b> has been uploaded."),e.dbItem.SchoolInfo.LogoLocation=t.path,e.dbItem.SchoolInfo.LogoLocationName=t.name},error:function(t){$("#fileProgress").hide(),$("#lblMessage").html("<b>"+t.name+"</b> couldnt be uploaded.")},xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&($("progress").show(),t.upload.addEventListener("progress",(function(t){t.lengthComputable&&$("#fileProgress").attr({value:t.loaded,max:t.total})}),!1)),t}})},updateWeekday:function(t,e){this.dbItem.SemsterInfo[e]=t,this.$refs[e][0]&&(this.$refs[e][0].checked=t)},createDefaultTime:function(t){var e=t.StartTime,a=t.StopTime;return[moment(e,"HH:mm")._d,moment(a,"HH:mm")._d]},loadDataBySemno:function loadDataBySemno(semno){var _this3=this;axios.post("/Services/SystemSetting.asmx/GetSystemInfo",{semno:semno}).then((function(resp){var _resp$data,data=null===resp||void 0===resp||null===(_resp$data=resp.data)||void 0===_resp$data?void 0:_resp$data.d;for(var key in data)_this3.dbItem[key]=Object.assign({},_this3.dbItem[key],data[key]);for(var tk in data["SectionInfo"])_this3.$set(_this3.form.SectionInfo,tk,{value:_this3.createDefaultTime(data["SectionInfo"][tk]),isCheck:!0});for(var _key in _this3.dbItem.SemsterInfo)if("StartDate"!=_key)try{_this3.$set(_this3.dbItem.SemsterInfo,_key,eval(_this3.dbItem.SemsterInfo[_key])),_this3.updateWeekday(_this3.dbItem.SemsterInfo[_key],_key)}catch(e){_this3.$set(_this3.dbItem.SemsterInfo,_key,_this3.dbItem.SemsterInfo[_key])}_this3.form.Reserve.AutoReview=_this3.dbItem.ReserveTransfer[0].AutoReview,_this3.form.Reserve.NonWorkingDays=_this3.dbItem.ReserveTransfer[0].NonWorkingDays,_this3.form.Reserve.ResTime=[_this3.dbItem.ReserveTransfer[0].StartTime,_this3.dbItem.ReserveTransfer[0].EndTime],_this3.form.Transfer.AutoReview=_this3.dbItem.ReserveTransfer[1].AutoReview,_this3.form.Transfer.NonWorkingDays=_this3.dbItem.ReserveTransfer[1].NonWorkingDays,_this3.form.Transfer.TransferTime=[_this3.dbItem.ReserveTransfer[1].StartTime,_this3.dbItem.ReserveTransfer[1].EndTime],_this3.dbItem.SemsterInfo.StartDate=moment(_this3.dbItem.SemsterInfo.StartDate)._d,_this3.$forceUpdate()}))}}}},b21c:function(t,e,a){"use strict";var s=a("6d9f"),i=a.n(s);i.a},b2ef:function(t,e,a){"use strict";var s=a("4bbc"),i=a.n(s);i.a},b6c8:function(t,e,a){"use strict";var s=a("9950"),i=a.n(s);i.a},b753:function(t,e,a){"use strict";var s=a("67d5"),i=a.n(s);i.a},c188:function(t,e,a){},c362:function(t,e,a){"use strict";a.r(e);a("a133"),a("ed0d"),a("f09c"),a("e117"),a("82ea");var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContainer"},[a("div",{staticClass:"container-fluid no-gutter"},[a("div",{staticClass:"left no-gutter",staticStyle:{display:"inline-block"},style:{width:t.isExtend?"300px":"50px"}},[a("div",{class:["logo",{isWarp:!t.isExtend}],on:{click:function(e){t.isExtend=!t.isExtend}}},[""!=t.SchoolInfo.LogoLocation?a("img",{staticClass:"rounded-circle clearfix",attrs:{src:"./Uploads/"+t.SchoolInfo.LogoLocation.replace("~/Uploads/",""),alt:""}}):t._e()]),a("h3",{staticClass:"text-center clearfix",on:{click:function(e){t.isExtend=!t.isExtend}}},[t._v(" "+t._s(t.SchoolInfo.SchoolName)+" ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"text-center font-weight-light",staticStyle:{"margin-bottom":"0"}},[t._v(" "+t._s(t.SchoolInfo.SchoolEngName)+" ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"text-center font-weight-light"},[t._v(" 智慧教室综合管理系统 ")]),a("div",{staticClass:"component font-12"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"left-menu-dropbox",staticStyle:{margin:"1rem"}},[a("buildtree")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"copyright small"},[t._v(" Powered by "),a("br"),t._v(" LINGAO Intelligent Technology "),a("br"),t._v(" © 2019 ")]),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isExtend,expression:"isExtend"}],staticClass:"fa fa-caret-square-o-left lefttoggle",attrs:{"aria-hidden":"true"},on:{click:function(e){t.isExtend=!1}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.isExtend,expression:"!isExtend"}],staticClass:"fa fa-caret-square-o-right righttoggle",attrs:{"aria-hidden":"true"},on:{click:function(e){t.isExtend=!0}}})])]),a("div",{staticClass:"window-right",staticStyle:{display:"inline-block",position:"absolute"},style:{width:t.isExtend?"calc(100vw - 310px)":"calc(100vw - 60px)"}},[a("topMenu",{attrs:{menuList:t.menuList},on:{update:t.updatePage}}),a("el-scrollbar",{style:{height:"calc(100vh - "+t.topHeight+"px - 10px)",overflowX:"hidden"}},[""!=t.subPageComp?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.mainPage,expression:"loading.mainPage"}]},[a(t.subPageComp,{tag:"component",staticStyle:{padding:"10px"}})],1):a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.mainPage,expression:"loading.mainPage"}],staticClass:"col-12 float-left",attrs:{id:"main_box"}})]),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px",display:"none"}})])],1)]),t._m(0)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jmodal"},[a("div",{staticClass:"jmodal_box jw-1"},[a("div",{attrs:{id:"jcontent"}})])])}],l=(a("e35a"),a("0d7a"),a("19d5")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},t._l(t.dataTree,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})})),1),a("el-scrollbar",{staticStyle:{margin:"0.5rem 0rem"},style:{height:"53vh"}},[a("el-tree",{ref:"tree",staticClass:"buildingTree",attrs:{data:t.dataTree,"show-checkbox":"","default-expand-all":"","filter-node-method":t.filterNode,"node-key":"id","default-checked-keys":t.checkData,lazy:!0,load:t.loadNode,props:t.defaultProps},on:{"check-change":t.updateCheck}})],1)],1)},r=[],o=(a("dbb3"),a("ecb4"),a("2eeb"),a("5e9f"),a("6c6d")),c={data:function(){return{filterText:[],dataTree:[],defaultProps:{children:"children",label:"label",isLeaf:"isLeaf"}}},props:{isAll:{type:Boolean,default:!1},checkData:{type:Array,default:function(){return[]}}},model:{prop:"checkData",event:"change"},watch:{filterText:function(t){this.$refs.tree.filter(t)}},mounted:function(){var t=this;window.CSJ||(window.CSJ={}),window.CSJ&&!window.CSJ.hasOwnProperty("updateTree")&&Object.defineProperty(window.CSJ,"updateTree",{get:function(){return window.tempData.updateTree},set:function(e){console.log("更新树",e),t.dataTree=[],t.showAllBuild(),window.tempData.updateTree=e}}),this.showAllBuild()},methods:{updateCheck:function(){this.$emit("change",this.$refs.tree.getCheckedKeys())},filterNode:function(t,e){var a,s=Object(l["a"])(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(!i)return!0;if(-1!==e.label.indexOf(i))return!0;for(var n=e.parent;null!=n;n=n.parent)if(n.label&&-1!==n.label.indexOf(i))return!0}}catch(r){s.e(r)}finally{s.f()}return!1},loadNode:function(t,e){return 1==t.level&&this.showFloorAndClassByBuilding(t.key.replace("B_","")).then((function(a){var s=a.d.value;return e(s.map((function(e){return Object(o["a"])({isLeaf:!1,parent:t,label:e["Floor"],id:e["Floor"]+"|"+t.key},e)})))})),2==t.level&&t.data["ClassNames"]?e(t.data["ClassNames"].map((function(e){return{isLeaf:!0,parent:t,label:e.Name,id:e.Id}}))):e([])},showAllBuild:function(){var t=this;return $.ajax({type:"POST",url:this.isAll?"../Services/ScheduleData.asmx/GetAllBuildingNameID":"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(e){var a=e.d.value;t.dataTree=a.map((function(t){return{children:[],label:t.BuildingName,id:"B_"+t.BuildingId}})),t.dataTree[0]&&t.$nextTick((function(){var e,a;t.filterText=[null===(e=t.dataTree[0])||void 0===e?void 0:e.label,null===(a=t.dataTree[1])||void 0===a?void 0:a.label],t.$refs.tree.filter(t.filterText)}))}))},showFloorAndClassByBuilding:function(t){return $.ajax({type:"POST",url:"../Services/GetSetSystemConfigInfo.asmx/GetFloorClassByBuilding",data:JSON.stringify({building:t}),contentType:"application/json; charset=utf-8",dataType:"json"})}}},d=c,u=(a("6326"),a("9ca4")),m=Object(u["a"])(d,n,r,!1,null,"d6e2e33a",null),f=m.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav small",attrs:{id:"top_menu"}},[a("li",{staticClass:"nav-item welcome",staticStyle:{"padding-left":"20px","padding-right":"20px"}},[a("i",{staticClass:"fa fa-user-circle",attrs:{"aria-hidden":"true"}}),t._v(" 欢迎你，"+t._s(t.curUserName)+" ")]),t._l(t.menuList,(function(e,s){return a("li",{key:s,staticClass:"nav-item",attrs:{id:e.id},on:{click:function(a){return t.updateMenu(e)}}},[a("a",{class:"T-NAV nav-link navleft T-NAV-0"+s},[a("i",{class:["fa",e.fa]}),t._v(" "+t._s(e.title)+" ")])])})),t._m(0),t._m(1),a("li",{staticClass:"nav-item float-right",staticStyle:{"margin-left":"30px"},on:{click:t.logoutAction}},[t._m(2)])],2)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item dropdown float-right"},[a("a",{staticClass:"nav-link  dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[t._v("CH")]),a("div",{staticClass:"dropdown-menu dropdown-menu-md-left"},[a("a",{staticClass:"dropdown-item small"},[a("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}}),t._v(" Chinese(简体中文) ")]),a("a",{staticClass:"dropdown-item small"},[a("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}}),t._v(" English ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item float-right"},[a("a",{staticClass:"nav-link"},[a("i",{staticClass:"fa fa-dashboard",attrs:{"aria-hidden":"true"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"nav-link"},[a("i",{staticClass:"fa fa-power-off red",attrs:{"aria-hidden":"true"}})])}],v=(a("9302"),a("8c1b"));function g(){$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserTopMenu",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var e=t.d.TopMenu.join(",");-1!=e.indexOf("equipment")&&$("#machinetopmenu").attr("style","display:block"),-1!=e.indexOf("course")&&$("#coursetopmenu").attr("style","display:block"),-1!=e.indexOf("strategy")&&$("#strategytopmenu").attr("style","display:block"),-1!=e.indexOf("operate")&&$("#operationtopmenu").attr("style","display:block"),-1!=e.indexOf("basicdata")&&$("#basicdatatopmenu").attr("style","display:block"),-1!=e.indexOf("settings")&&$("#systemsettingtopmenu").attr("style","display:block"),-1!=e.indexOf("logs")&&$("#logstopmenu").attr("style","display:block")}})}var b={data:function(){return{curUserName:sessionStorage.getItem("userName")}},props:["menuList"],mounted:function(){g()},methods:{logoutAction:function(){Object(v["d"])()},updateMenu:function(t){this.$emit("update",t)}}},C=b,y=Object(u["a"])(C,p,h,!1,null,null,null),x=y.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContainer"},[a("el-row",{staticClass:"boxSizeC",attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"boxSizeA"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa-area-chart",attrs:{"aria-hidden":"true"}}),t._v(" 能耗监控")])]),a("div",{ref:"powerLineEchart",staticClass:"box-card-body"})])],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"boxSizeA MeInfo"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-body"},[a("el-row",{staticStyle:{"padding-top":"10px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:5}},[a("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"userName",staticStyle:{height:"35px","line-height":"35px"}},[t._v(t._s(t.curUserName))]),a("div",{staticClass:"roleName",staticStyle:{height:"35px","line-height":"35px"}},[t._v("系统管理员 "),a("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}})])]),a("el-col",{attrs:{span:14}},[a("el-row",[a("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:7}},[a("div",{staticClass:"labelA",staticStyle:{height:"35px","line-height":"35px"}},[t._v("任务")]),a("div",{staticClass:"numberA",staticStyle:{height:"35px","line-height":"35px"}},[t._v("12")])]),a("el-col",{staticClass:"dividerA",attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:7}},[a("div",{staticClass:"labelA",staticStyle:{height:"35px","line-height":"35px"}},[t._v("计划")]),a("div",{staticClass:"numberA",staticStyle:{height:"35px","line-height":"35px"}},[t._v("12")])]),a("el-col",{staticClass:"dividerA",attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{span:7}},[a("div",{staticClass:"labelA",staticStyle:{height:"35px","line-height":"35px"}},[t._v("退出")]),a("div",{staticClass:"numberA",staticStyle:{height:"35px","line-height":"35px"}},[a("i",{staticClass:"fa fa-power-off",attrs:{"aria-hidden":"true"}})])])],1)],1)],1),a("div",[a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"}},t._l(7,(function(e){return a("li",{key:e,staticClass:"infinite-list-item"},[a("el-row",[a("el-row",{staticClass:"labelB"},[a("el-col",{staticClass:"labelC",attrs:{span:3}},[t._v("参加督导")]),a("el-col",{staticClass:"labelC",attrs:{span:3}},[t._v("5分钟前")]),a("el-col",{attrs:{span:4}},[t._v("五山校区")]),a("el-col",{attrs:{span:3}},[t._v("实验楼")]),a("el-col",{attrs:{span:3}},[t._v("2-101")]),a("el-col",{attrs:{span:7}},[t._v("所有投影仪")])],1)],1)],1)})),0)])],1)])],1)])],1),a("el-row",{staticClass:"boxSizeC",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"boxSizeA"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa-th",attrs:{"aria-hidden":"true"}}),t._v(" 故障监控")])]),a("div",{ref:"faultEchart",staticClass:"box-card-body"})])],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"boxSizeA"},[a("div",{staticClass:"boxSizeB"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-body"},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:9}},[a("div",{staticClass:"appImg faultImg"},[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"appTextCN"},[t._v("故障管理")]),a("div",{staticClass:"appTextEN"},[t._v("Fault Mng")]),a("div",{staticClass:"goBtnImg"},[a("i",{staticClass:"fa fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})])]),t._l(t.list.faultMngList,(function(e,s){return a("el-col",{key:s,class:s%2==0?"":"dividerB",staticStyle:{"text-align":"center"},attrs:{span:s%2==0?4:1}},[s%2==0?[a("div",{staticClass:"serviceTitle"},[t._v(t._s(e.title))]),a("div",{staticClass:"serviceNum"},[t._v(t._s(e.total))]),a("div",{staticClass:"serviceAction"},[a("span",{staticClass:"labelText"},[t._v("处理")])])]:[a("el-divider",{attrs:{direction:"vertical"}})]],2)}))],2)],1)])],1),a("div",{staticClass:"boxSizeB"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-body"},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:9}},[a("div",{staticClass:"appImg faultImg"},[a("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"appTextCN"},[t._v("巡检管理")]),a("div",{staticClass:"appTextEN"},[t._v("Inspection SHOOTING")]),a("div",{staticClass:"goBtnImg"},[a("i",{staticClass:"fa fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})])]),t._l(t.list.faultMngList,(function(e,s){return a("el-col",{key:s,class:s%2==0?"":"dividerB",staticStyle:{"text-align":"center"},attrs:{span:s%2==0?4:1}},[s%2==0?[a("div",{staticClass:"serviceTitle"},[t._v(t._s(e.title))]),a("div",{staticClass:"serviceNum"},[t._v(t._s(e.total))]),a("div",{staticClass:"serviceAction"},[a("span",{staticClass:"labelText"},[t._v("处理")])])]:[a("el-divider",{attrs:{direction:"vertical"}})]],2)}))],2)],1)])],1)])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"boxSizeA"},[a("div",{staticClass:"boxSizeB"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-body"},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:9}},[a("div",{staticClass:"appImg faultImg"},[a("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"appTextCN"},[t._v("维修管理")]),a("div",{staticClass:"appTextEN"},[t._v("Fault Mng")]),a("div",{staticClass:"goBtnImg"},[a("i",{staticClass:"fa fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})])]),t._l(t.list.faultMngList,(function(e,s){return a("el-col",{key:s,class:s%2==0?"":"dividerB",staticStyle:{"text-align":"center"},attrs:{span:s%2==0?4:1}},[s%2==0?[a("div",{staticClass:"serviceTitle"},[t._v(t._s(e.title))]),a("div",{staticClass:"serviceNum"},[t._v(t._s(e.total))]),a("div",{staticClass:"serviceAction"},[a("span",{staticClass:"labelText"},[t._v("处理")])])]:[a("el-divider",{attrs:{direction:"vertical"}})]],2)}))],2)],1)])],1),a("div",{staticClass:"boxSizeB"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-body"},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:9}},[a("div",{staticClass:"appImg faultImg"},[a("i",{staticClass:"fa fa-paint-brush",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"appTextCN"},[t._v("维保管理")]),a("div",{staticClass:"appTextEN"},[t._v("Inspection SHOOTING")]),a("div",{staticClass:"goBtnImg"},[a("i",{staticClass:"fa fa-arrow-circle-right",attrs:{"aria-hidden":"true"}})])]),t._l(t.list.faultMngList,(function(e,s){return a("el-col",{key:s,class:s%2==0?"":"dividerB",staticStyle:{"text-align":"center"},attrs:{span:s%2==0?4:1}},[s%2==0?[a("div",{staticClass:"serviceTitle"},[t._v(t._s(e.title))]),a("div",{staticClass:"serviceNum"},[t._v(t._s(e.total))]),a("div",{staticClass:"serviceAction"},[a("span",{staticClass:"labelText"},[t._v("处理")])])]:[a("el-divider",{attrs:{direction:"vertical"}})]],2)}))],2)],1)])],1)])])],1),a("div",{staticClass:"boxSizeC envKeep"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa-leaf",attrs:{"aria-hidden":"true"}}),t._v(" 环境监控")])]),a("div",{staticClass:"box-card-body"},[a("el-row",{staticClass:"boxSizeC"},[a("el-col",{staticStyle:{display:"flex"},attrs:{span:8}},[a("div",{ref:"piechartA",staticClass:"boxSizeD",staticStyle:{flex:"2"}}),a("div",{staticClass:"boxSizeD textLabel",staticStyle:{flex:"3"}},[a("div",{staticClass:"itemTitle"},[t._v("平均温度/湿度")]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square wendu",attrs:{"aria-hidden":"true"}}),t._v(" 温度："),a("span",[t._v("26℃")])]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square shidu",attrs:{"aria-hidden":"true"}}),t._v(" 湿度："),a("span",[t._v("45%")])])]),a("div",{staticClass:"boxSizeD otherText",staticStyle:{flex:"4"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"}}),t._v("过低")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}),t._v("舒适")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-exclamation-circle",attrs:{"aria-hidden":"true"}}),t._v("过高")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("5")]),a("el-col",{attrs:{span:8}},[t._v("20")]),a("el-col",{attrs:{span:8}},[t._v("30")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("10%")]),a("el-col",{attrs:{span:8}},[t._v("40%")]),a("el-col",{attrs:{span:8}},[t._v("60%")])],1)],1),a("div",{staticStyle:{flex:"1"}})]),a("el-col",{staticStyle:{display:"flex","border-left":"1px solid #DCDFE6","border-right":"1px solid #DCDFE6"},attrs:{span:8}},[a("div",{ref:"piechartB",staticClass:"boxSizeD",staticStyle:{flex:"2"}}),a("div",{staticClass:"boxSizeD textLabel",staticStyle:{flex:"3"}},[a("div",{staticClass:"itemTitle"},[t._v("平均甲醛/CO"),a("sub",[t._v("2")])]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square wendu",attrs:{"aria-hidden":"true"}}),t._v(" 甲醛："),a("span",[t._v("26℃")])]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square shidu",attrs:{"aria-hidden":"true"}}),t._v(" CO"),a("sub",[t._v("2")]),t._v("："),a("span",[t._v("45%")])])]),a("div",{staticClass:"boxSizeD otherText",staticStyle:{flex:"4"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"}}),t._v("过低")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}),t._v("舒适")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-exclamation-circle",attrs:{"aria-hidden":"true"}}),t._v("过高")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("5")]),a("el-col",{attrs:{span:8}},[t._v("20")]),a("el-col",{attrs:{span:8}},[t._v("30")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("10%")]),a("el-col",{attrs:{span:8}},[t._v("40%")]),a("el-col",{attrs:{span:8}},[t._v("60%")])],1)],1),a("div",{staticStyle:{flex:"1"}})]),a("el-col",{staticStyle:{display:"flex"},attrs:{span:8}},[a("div",{ref:"piechartC",staticClass:"boxSizeD",staticStyle:{flex:"2"}}),a("div",{staticClass:"boxSizeD textLabel",staticStyle:{flex:"3"}},[a("div",{staticClass:"itemTitle"},[t._v("平均PM2.5/PM10")]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square wendu",attrs:{"aria-hidden":"true"}}),t._v(" PM2.5："),a("span",[t._v("10")])]),a("div",{staticClass:"itemSubTitle"},[a("i",{staticClass:"fa fa-square shidu",attrs:{"aria-hidden":"true"}}),t._v(" PM10："),a("span",[t._v("20")])])]),a("div",{staticClass:"boxSizeD otherText",staticStyle:{flex:"4"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"}}),t._v("过低")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}),t._v("舒适")]),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"fa fa-exclamation-circle",attrs:{"aria-hidden":"true"}}),t._v("过高")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("5")]),a("el-col",{attrs:{span:8}},[t._v("20")]),a("el-col",{attrs:{span:8}},[t._v("30")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v("10%")]),a("el-col",{attrs:{span:8}},[t._v("40%")]),a("el-col",{attrs:{span:8}},[t._v("60%")])],1)],1),a("div",{staticStyle:{flex:"1"}})])],1)],1)])],1),a("el-row",{staticClass:"boxSizeC",attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"boxSizeE"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa-pie-chart",attrs:{"aria-hidden":"true"}}),t._v(" 课室总览")])]),a("div",{staticClass:"box-card-body"},[a("el-row",[a("el-col",{staticClass:"chartCircle",attrs:{span:5}},[a("div",{staticClass:"labelC1"},[t._v("教室数量: 100")]),a("el-progress",{attrs:{type:"circle",percentage:80,width:100,color:"#66BA30","stroke-width":10}}),a("div",{staticClass:"labelC2"},[t._v("上课中"),a("div",{staticClass:"barA"}),t._v(" 80")]),a("div",{staticClass:"labelC2"},[t._v("未上课"),a("div",{staticClass:"barB"}),t._v(" 20")])],1),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"chartCircle",attrs:{span:5}},[a("div",{staticClass:"labelC1"},[t._v("多媒体教室数量: 70")]),a("el-progress",{attrs:{type:"circle",percentage:(45/70*100).toFixed(2),width:100,color:"#66BA30","stroke-width":10}}),a("div",{staticClass:"labelC2"},[t._v("使用中"),a("div",{staticClass:"barA"}),t._v(" 45")]),a("div",{staticClass:"labelC2"},[t._v("未使用"),a("div",{staticClass:"barB"}),t._v(" 25")])],1),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"chartCircle",attrs:{span:5}},[a("div",{staticClass:"labelC1"},[t._v("智慧教室: 50")]),a("el-progress",{attrs:{type:"circle",percentage:60,width:100,color:"#3AC4F3","stroke-width":10}}),a("div",{staticClass:"labelC2"},[t._v("使用中"),a("div",{staticClass:"barC"}),t._v(" 30")]),a("div",{staticClass:"labelC2"},[t._v("未使用"),a("div",{staticClass:"barB"}),t._v(" 20")])],1),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"chartCircle",attrs:{span:5}},[a("div",{staticClass:"labelC1"},[t._v("预约教室: 50")]),a("el-progress",{attrs:{type:"circle",percentage:70,width:100,color:"#3FBCB8","stroke-width":10}}),a("div",{staticClass:"labelC2"},[t._v("已预约"),a("div",{staticClass:"barD"}),t._v(" 35")]),a("div",{staticClass:"labelC2"},[t._v("未预约"),a("div",{staticClass:"barB"}),t._v(" 15")])],1)],1)],1)])],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"boxSizeE"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa-desktop",attrs:{"aria-hidden":"true"}}),t._v(" 设备总览")])]),a("div",{staticClass:"box-card-body"},[a("el-row",[a("el-col",{staticClass:"deviceItem",attrs:{span:5}},[a("div",{staticClass:"deviceImg"},[a("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"deviceTitle"},[t._v("投影仪")]),a("div",{staticClass:"deviceUsing"},[t._v("40")]),a("div",{staticClass:"deviceTotal"},[t._v("200")]),a("div",{staticClass:"devicBar",staticStyle:{height:"50px"}},[a("div",{staticClass:"devicBarValue lt25",style:{height:"20%",top:"80%"}}),a("div",{staticClass:"devicBarText"},[t._v("20%")])]),a("div",{staticClass:"devicBarLabel"},[t._v("已使用")])]),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"deviceItem",attrs:{span:5}},[a("div",{staticClass:"deviceImg"},[a("i",{staticClass:"fa fa-desktop",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"deviceTitle"},[t._v("电脑")]),a("div",{staticClass:"deviceUsing"},[t._v("78")]),a("div",{staticClass:"deviceTotal"},[t._v("100")]),a("div",{staticClass:"devicBar",staticStyle:{height:"50px"}},[a("div",{staticClass:"devicBarValue lt100",style:{height:"78%",top:"22%"}}),a("div",{staticClass:"devicBarText"},[t._v("78%")])]),a("div",{staticClass:"devicBarLabel"},[t._v("已使用")])]),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"deviceItem",attrs:{span:5}},[a("div",{staticClass:"deviceImg"},[a("i",{staticClass:"fa fa-volume-up",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"deviceTitle"},[t._v("扩音器")]),a("div",{staticClass:"deviceUsing"},[t._v("120")]),a("div",{staticClass:"deviceTotal"},[t._v("200")]),a("div",{staticClass:"devicBar",staticStyle:{height:"50px"}},[a("div",{staticClass:"devicBarValue lt75",style:{height:"60%",top:"40%"}}),a("div",{staticClass:"devicBarText"},[t._v("60%")])]),a("div",{staticClass:"devicBarLabel"},[t._v("已使用")])]),a("el-col",{staticClass:"dividerA",staticStyle:{height:"150px"},attrs:{span:1}},[a("el-divider",{attrs:{direction:"vertical"}})],1),a("el-col",{staticClass:"deviceItem",attrs:{span:5}},[a("div",{staticClass:"deviceImg"},[a("i",{staticClass:"fa fa-video-camera",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"deviceTitle"},[t._v("录像设备")]),a("div",{staticClass:"deviceUsing"},[t._v("100")]),a("div",{staticClass:"deviceTotal"},[t._v("200")]),a("div",{staticClass:"devicBar",staticStyle:{height:"50px"}},[a("div",{staticClass:"devicBarValue lt50",style:{height:"50%",top:"50%"}}),a("div",{staticClass:"devicBarText"},[t._v("50%")])]),a("div",{staticClass:"devicBarLabel"},[t._v("已使用")])])],1)],1)])],1)])],1)],1)},w=[],k=(a("56ea"),{data:function(){return{curUserName:sessionStorage.getItem("userName"),circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",echartInstance:{powerInstance:null,faultInstance:null,piechartInstanceA:null,piechartInstanceB:null,piechartInstanceC:null},list:{faultMngList:[{title:"未派工",total:"43"},{},{title:"待返工",total:"85"},{},{title:"待处理",total:"93"}]},dataSource:{piechartOptions:{tooltip:{trigger:"item",formatter:"{b}: {c}"},series:[{name:" ",type:"pie",radius:["50%","60%"],color:["#3AC4F3","#F5F5F5"],labelLine:{show:!1},label:{show:!1},data:[{value:45,name:"湿度"},{value:65,name:" "}]},{name:" ",type:"pie",radius:["72%","82%"],color:["#66BA30","#F5F5F5"],labelLine:{show:!1},label:{show:!1},data:[{value:20,name:"温度"},{value:80,name:" "}]}]},powerOptions:{tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",top:"8%",bottom:"10%",containLabel:!0},legend:{icon:"rect",bottom:0,left:"4%",data:["环境设备","教辅设备","其他设备"]},xAxis:{type:"category",boundaryGap:!1,axisLabel:{formatter:"{value}月"},data:new Array(12).fill(1).map((function(t,e){return e+1}))},yAxis:{type:"value"},series:[{name:"环境设备",type:"line",stack:"总量",color:"#66BA30",data:new Array(12).fill(1).map((function(){return Math.round(100*Math.random())}))},{name:"教辅设备",type:"line",stack:"总量",color:"#3AC4F3",data:new Array(12).fill(1).map((function(){return Math.round(100*Math.random())}))},{name:"其他设备",type:"line",stack:"总量",color:"#FFBE3D",data:new Array(12).fill(1).map((function(){return Math.round(100*Math.random())}))}]},faultOptions:{legend:{bottom:0,left:"4%",data:["未派单","待返工","待处理"]},grid:{left:"3%",right:"4%",top:"8%",bottom:"10%",containLabel:!0},tooltip:{},dataset:{source:[["product","未派单","待返工","待处理"],["故障管理",43,85,93],["维修管理",83,73,55],["巡检管理",86,65,82],["维保管理",72,53,39]]},xAxis:{type:"category"},yAxis:{},series:[{type:"bar",color:["#9A74AF"]},{type:"bar",color:["#7AB775"]},{type:"bar",color:["#3FBCB8"]}]}}}},mounted:function(){var t=this;this.initData(),$(window).resize((function(){t.echartInstance.powerInstance.resize(),t.echartInstance.faultInstance.resize(),t.echartInstance.piechartInstanceA.resize(),t.echartInstance.piechartInstanceB.resize(),t.echartInstance.piechartInstanceC.resize()}))},methods:{initData:function(){this.drawBarPower(),this.drawFaultBar(),this.drawPie()},drawPie:function(){this.echartInstance.piechartInstanceA=echarts.init(this.$refs.piechartA),this.echartInstance.piechartInstanceA.setOption(this.dataSource.piechartOptions),this.echartInstance.piechartInstanceB=echarts.init(this.$refs.piechartB),this.echartInstance.piechartInstanceB.setOption(this.dataSource.piechartOptions),this.echartInstance.piechartInstanceC=echarts.init(this.$refs.piechartC),this.echartInstance.piechartInstanceC.setOption(this.dataSource.piechartOptions)},drawBarPower:function(){this.echartInstance.powerInstance=echarts.init(this.$refs.powerLineEchart),this.echartInstance.powerInstance.setOption(this.dataSource.powerOptions)},drawFaultBar:function(){this.echartInstance.faultInstance=echarts.init(this.$refs.faultEchart),this.echartInstance.faultInstance.setOption(this.dataSource.faultOptions)}}}),j=k,T=(a("ec70"),Object(u["a"])(j,S,w,!1,null,"c0fed4f0",null)),I=T.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContainer"},[t._m(0),a("div",{staticClass:"float-left ml-4 nav_page",staticStyle:{"margin-top":"33px"}},[a("div",{staticClass:"jbtn JCHANMENU JURL TEST active",on:{click:function(e){return t.updateSubbody({action:"deviceControl",item:{}})}}},[a("i",{staticClass:"fa fa-cog"}),t._v(" 设备控制 "),a("i",{staticClass:"jdown fa fa-caret-down"})]),a("div",{staticClass:"jbtn JCHANMENU JURL TEST",on:{click:function(e){return t.updateSubbody({action:"videoLoop",item:{}})}}},[a("i",{staticClass:"fa fa-refresh"}),t._v(" 视频轮巡 "),a("i",{staticClass:"jdown fa fa-caret-down"})])]),a("div",{staticClass:"stat-card2 col-12 float-left"},[a(t.subBody,{tag:"component",attrs:{detailItme:t.detailItme},on:{update:t.updateSubbody}}),a("div",{attrs:{id:"ctrl_pannels"}})],1),a("input",{attrs:{type:"hidden",id:"controlip",value:""}}),a("input",{attrs:{type:"hidden",id:"assistdivnumber",value:""}}),a("input",{attrs:{type:"hidden",id:"classforip",value:""}})])},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-sliders"}),t._v(" 设备管理 ")])}],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"sec_box",attrs:{id:"sec_box"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row",on:{click:t.openDeviceList}},[t._m(1),t._m(2),t._m(3)])]),a("hr",{staticClass:"mt-3"}),a("div",{staticClass:"w-100 py-4 bar01 align-center",staticStyle:{"border-bottom":"none"}},[t._m(4),a("a",{staticClass:"jbtn2 bg_green white mt-1 batchbootup",attrs:{"j-page-box":"#jcontent",name:"batchbootup"},on:{click:function(e){return t.setDeviceStat(!0)}}},[a("i",{staticClass:"fa fa-power-off"}),t._v(" 开启系统 ")]),a("a",{staticClass:"jbtn2 bg_red white mt-1 batchshutdown",attrs:{"j-page-box":"#jcontent",name:"batchshutdown"},on:{click:function(e){return t.setDeviceStat(!1)}}},[a("i",{staticClass:"fa fa-power-off"}),t._v(" 关闭系统 ")]),t._m(5),a("div",{staticClass:"float-left",staticStyle:{"margin-left":"10px"}},[a("el-button-group",[t._l([2,3],(function(e){return a("el-button",{key:e,attrs:{type:"primary",autofocus:t.colNums==e},on:{click:function(a){t.colNums=e}}},[a("span",{class:"col_"+e})])})),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary",icon:"el-icon-s-grid"},on:{click:function(e){t.colNums=10}}})],2)],1),a("div",{staticClass:"searchbox"},[t._m(6),t._m(7),a("a",{staticClass:"jbtn_sm text-center",attrs:{id:"searchIP"},on:{click:function(){return t.GetClassList(1)}}},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])]),a("div",{staticClass:"col-12 row jfont12",attrs:{id:"equipcontrol"}},t._l(t.classRoomDeviceList,(function(e,s){return a("div",{key:s,class:["eqp-ctrl-pannel2 no-gutters row mb-4","colnum-"+t.colNums]},[a("equipcontrol",{attrs:{isMin:10==t.colNums,item:e,curBuilding:t.curBuilding},on:{update:function(e){return t.$emit("update",e)}}})],1)})),0),a("div",{staticClass:"col-12"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":20,total:t.totalrows},on:{"current-change":t.GetClassList}})],1)])])},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar01",attrs:{id:"jpagetitle"}},[a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-list mr-1"}),t._v("设备控制")]),a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 no-gutters"},[a("div",{staticClass:"col-12 row statu-box statu-box-blue m-1 mt-3"},[a("div",{staticClass:"col-4 text-center pt-3 pb-2 statu-bg-color white"},[a("i",{staticClass:"fa fa-bank fa-lg align-middle"}),a("br"),a("span",{staticClass:"jfont14 clearfix align-middle"},[t._v("教室总量")]),a("span",{staticClass:"jfont12 clearfix align-middle"},[t._v("TOTAL")])]),a("div",{staticClass:"col-8 font-weight-light pl-3 statu-color",staticStyle:{"font-size":"50px",height:"90px","line-height":"95px"}},[a("span",{attrs:{id:"totaldevicescount"}},[t._v("0")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 no-gutters"},[a("div",{staticClass:"col-12 row statu-box statu-box-green m-1 mt-3"},[a("div",{staticClass:"col-4 text-center pt-3 pb-2 statu-bg-color white"},[a("i",{staticClass:"fa fa-bank fa-lg align-middle"}),a("br"),a("span",{staticClass:"jfont14 clearfix align-middle"},[t._v("在线教室")]),a("span",{staticClass:"jfont12 clearfix align-middle"},[t._v("ONLINE")])]),a("div",{staticClass:"col-8 font-weight-light pl-3 statu-color",staticStyle:{"font-size":"50px",height:"90px","line-height":"95px"}},[a("span",{attrs:{id:"onlinedevicescount"}},[t._v("0")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 no-gutters"},[a("div",{staticClass:"col-12 row statu-box statu-box-red m-1 mt-3"},[a("div",{staticClass:"col-4 text-center pt-3 pb-2 statu-bg-color white"},[a("i",{staticClass:"fa fa-bank fa-lg align-middle"}),a("br"),a("span",{staticClass:"jfont14 clearfix align-middle"},[t._v("离线教室")]),a("span",{staticClass:"jfont12 clearfix align-middle"},[t._v("OFFLINE")])]),a("div",{staticClass:"col-8 font-weight-light pl-3 statu-color",staticStyle:{"font-size":"50px",height:"90px","line-height":"95px"}},[a("span",{attrs:{id:"offlinedevicecount"}},[t._v("0")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"mt-1 float-left"},[a("i",{staticClass:"fa fa-tasks"}),t._v(" 设备状态 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"float-left"},[a("label",{staticClass:"jfont12 mt-2"},[a("i",{staticClass:"fa fa-check jcheckbox check_all_table ml-3 mr-2"}),t._v("批量选择/反选 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox2",attrs:{id:"buildinglist"}},[a("div",{staticClass:"name"},[t._v("请选择building")]),a("div",{staticClass:"list"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox2",attrs:{id:"floorlist"}},[a("div",{staticClass:"name"},[t._v("请选择楼栋")]),a("div",{staticClass:"list"})])}],N=(a("b4fb"),a("053b"),a("e18c"),a("232a")),L=a("e04f"),E=a.n(L),M=a("183d"),B=a("d5da"),U={InstructionStatus:"--",WorkStatus:"Closed",PcStatus:"Off",ProjectorStatus:"Off",Screen:"Up",Curtain:"Off",LightStatus:"",MediaSignal:"",IsSystemLock:"False",IsClassLock:"",IsPodiumLock:"",Temperature:"0",Humidity:"0",Volume:0,Mic1Volume:"",Mic2Volume:"",Voltage:0,Power:"0"},W=null,V={data:function(){var t=window.localStorage.getItem("device-colnums");return{colNums:t||2,totalrows:0,classRoomDeviceList:[],curBuilding:{name:""}}},components:{equipcontrol:B["a"]},watch:{colNums:function(t){window.localStorage.setItem("device-colnums",t)}},methods:{setDeviceStat:function(t){console.log("开关",t),$("[name='classipAddress']:checked").map((function(e,a){var s=$(a).attr("mac"),i=t?"SystemOnWeb":"SystemOffWeb";W.server.sendControlKeys(s,i,JSON.stringify(Object(o["a"])({},E.a.get())))}))},openDeviceList:function(){window.open("./deviceList.html","_blank")},getFloorByBuild:function(t){return new Promise((function(e){$.ajax({type:"POST",url:"../Services/GetOrganisationData.asmx/GetFloorlist",data:JSON.stringify({building:t}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var a=t.d.value.map((function(t){return{value:t.FloorId,label:t.FloorName}}));a=[{value:"",label:"全部"}].concat(Object(N["a"])(a)),$.initSelectBox({name:"floorlist",data:a}),e()}})}))},GetClassList:function(t){var e=this;this.curBuilding.name=$("#buildinglist").data("dataValue").name,""!=$("#floorlist").data("dataValue").value?$.ajax({type:"POST",url:"../Services/GetOrganisationData.asmx/GetIPClassByBuildingFloor",data:JSON.stringify({data:{building:$("#buildinglist").data("dataValue").value,floor:$("#floorlist").data("dataValue").value,pageIndex:t,pageSize:"20"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var a=t.d.value.map((function(t){return t.message=U,t}));e.classRoomDeviceList=a,e.totalrows=t.d.totalRows;try{W.server.getStatus()}catch(s){console.log(s)}}}):this.GetIPList(t)},GetIPList:function(t){var e=this;this.curBuilding.name=$("#buildinglist").data("dataValue").name,$.ajax({type:"POST",url:"../Services/GetOrganisationData.asmx/GetIPClassByBuilding",data:JSON.stringify({data:{building:$("#buildinglist").data("dataValue").value,floor:$("#floorlist").data("dataValue").value,pageIndex:t,pageSize:"20"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var a=t.d.value.map((function(t){return t.message=U,t}));e.classRoomDeviceList=a,e.totalrows=t.d.totalRows;try{W.server.getStatus()}catch(s){console.log(s)}}})}},mounted:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"success"===e.d.status&&($.initSelectBox({name:"buildinglist",data:e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}}))}),t.getFloorByBuild($("#buildinglist").data("dataValue").value).then((function(){t.GetClassList(1)})))}}),$("#buildinglist .name").off("list-change").on("list-change",(function(e,a){console.log("chage",a),t.getFloorByBuild($("#buildinglist").data("dataValue").value)}));var e=Object(M["a"])({cb_broadcastMessage:function(e){var a=e.name,s=e.message;for(var i in t.classRoomDeviceList)if(t.classRoomDeviceList[i].MacAddress===a)try{t.$set(t.classRoomDeviceList[i],"message",Object(o["a"])(Object(o["a"])({},t.classRoomDeviceList[i].message||{}),s.Data))}catch(l){t.$set(t.classRoomDeviceList[i],"message",s)}t.$forceUpdate()}});W=e.chat}},F=V,R=(a("79e0"),Object(u["a"])(F,A,P,!1,null,"7d405ef2",null)),z=R.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"bar01"},[s("h4",{staticClass:"tt01"},[s("i",{staticClass:"fa fa-desktop mr-1 ml-3"}),s("font",{staticClass:"jfont14 gray"},[t._v(t._s(t.detailItme.ClassName))])],1),s("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[s("a",{class:["JPAGEMENU jbtn2 bg_gray JURL",{active:"assisthtml1"==t.submenu}],attrs:{id:"assisthtml1"},on:{click:function(e){t.submenu="assisthtml1"}}},[s("i",{staticClass:"fa fa-desktop mr-1"}),t._v(" 教辅设备 ")]),s("a",{class:["JPAGEMENU jbtn2 bg_gray JURL",{active:"assisthtml2"==t.submenu}],attrs:{id:"assisthtml2"},on:{click:function(e){t.submenu="assisthtml2"}}},[s("i",{staticClass:"fa fa-leaf mr-1"}),t._v(" 环境设备 ")]),s("a",{class:["JPAGEMENU jbtn2 bg_gray JURL",{active:"assisthtml3"==t.submenu}],on:{click:function(e){t.submenu="assisthtml3"}}},[s("i",{staticClass:"fa fa-camera mr-1"}),t._v(" 录课设备 ")])]),s("div",{staticClass:"searchbox"},[s("a",{staticClass:"jbtn_sm bg_red text-center JURL",attrs:{"page-href":"window/p-equipment/001.html","page-box":"#sec_box","pannel-href":"window/p-equipment/ctrl-pannels/blank.html","pannel-box":"#ctrl_pannels","menu-href":"window/menus/m-equipment-01.html","menu-box":"#jpagetitle"},on:{click:t.gotoBack}},[s("i",{staticClass:"fa fa-arrow-left",staticStyle:{"margin-top":"10px"}}),s("span",{staticClass:"jfont12"},[t._v("退出")])])])]),s("div",{staticClass:"sec_box"},[s("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),s("div",{staticClass:"col-12 row"},[s("div",{staticClass:"col-7 j-video-main"},[s("div",{staticClass:"j-video-box bg_gray2 position-relative no-gutters"},[t.CameraDetails?s("iframe",{attrs:{src:t.mainUrl,width:"100%",height:t.mainVedioHeight,frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes"}}):t._e()]),s("div",{staticClass:"col-12 d-flex align-item-center mt-3 jfont14 row j-acitve-control"},[s("div",{staticClass:"j-sound-btn j-acitve-control-btn row align-item-center mr-3 px-2",class:{active:"teacher"==t.soundtype},staticStyle:{"margin-top":"35px"},on:{click:function(){return t.setSound("teacher")}}},[t._m(0),s("span",[t._v("教师音频")])]),s("div",{staticClass:"j-sound-btn row align-item-center mr-3 px-2",class:{active:"student"==t.soundtype},staticStyle:{"margin-top":"35px"},on:{click:function(){return t.setSound("student")}}},[t._m(1),t._v(" 学生音频 ")]),t._m(2),s("div",{staticClass:"flex-row-reverse ml-auto",staticStyle:{width:"240px"}},[s("div",{staticClass:"rounded-circle yuntai yuntai-circle float-left"},[s("div",{staticClass:"yuntai-text rounded-circle jfont12 align-middle",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.doAction("auto")}}},[t._v(" 云台 ")]),s("i",{staticClass:"fa fa-arrow-circle-up fa-lg yuntai-btn up align-middle text-center position-absolute",on:{click:function(e){return t.doAction("up")}}}),s("i",{staticClass:"fa fa-arrow-circle-down fa-lg yuntai-btn down align-middle text-center position-absolute",on:{click:function(e){return t.doAction("down")}}}),s("i",{staticClass:"fa fa-arrow-circle-left fa-lg yuntai-btn left align-middle text-center position-absolute",on:{click:function(e){return t.doAction("left")}}}),s("i",{staticClass:"fa fa-arrow-circle-right fa-lg yuntai-btn right align-middle text-center position-absolute",on:{click:function(e){return t.doAction("right")}}})]),s("div",{staticClass:"rounded-lg yuntai-ctrl ml-4 yuntai jfont12 mt-3 float-right",staticStyle:{height:"80px",width:"100px"}},[s("div",{staticClass:"py-1 row align-items-center mt-1 ml-1 w-100"},[s("div",{staticClass:"mr-2",staticStyle:{width:"40px"}},[t._v("变倍")]),s("div",{staticClass:"row align-items-center"},[s("i",{staticClass:"fa fa-plus-circle fa-lg yuntai-btn ml-1",on:{click:function(e){return t.doAction("zoom+")}}}),s("i",{staticClass:"fa fa-minus-circle fa-lg yuntai-btn ml-2",on:{click:function(e){return t.doAction("zoom-")}}})])]),s("div",{staticClass:"py-1 row align-items-center mt-1 ml-1 w-100"},[s("div",{staticClass:"mr-2",staticStyle:{width:"40px"}},[t._v("变焦")]),s("div",{staticClass:"row align-items-center"},[s("i",{staticClass:"fa fa-plus-circle fa-lg yuntai-btn ml-1",on:{click:function(e){return t.doAction("focus+")}}}),s("i",{staticClass:"fa fa-minus-circle fa-lg yuntai-btn ml-2",on:{click:function(e){return t.doAction("focus-")}}})])])])])])]),s("div",{staticClass:"col-2 j-video-list01 no-gutters"},[s("el-radio",{attrs:{label:"A"},on:{change:function(){return t.updateMainUrl(t.subUrlA)}},model:{value:t.curVideo,callback:function(e){t.curVideo=e},expression:"curVideo"}},[t._v("教室端")]),s("div",{class:["mb-2 j-video-box3 bg_gray2",{curVideo:t.subUrlA==t.mainUrl}],staticStyle:{width:"83%"}},[t.CameraDetails?s("iframe",{attrs:{src:t.subUrlA,width:"100%",height:t.mainVedioHeight3,frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes"}}):t._e()]),s("el-radio",{attrs:{label:"B"},on:{change:function(){return t.updateMainUrl(t.subUrlB)}},model:{value:t.curVideo,callback:function(e){t.curVideo=e},expression:"curVideo"}},[t._v("学生端")]),s("div",{class:["mb-2 j-video-box3 bg_gray2",{curVideo:t.subUrlB==t.mainUrl}],staticStyle:{width:"83%"}},[t.CameraDetails?s("iframe",{attrs:{src:t.subUrlB,width:"100%",height:t.mainVedioHeight3,frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes"}}):t._e()]),s("el-radio",{attrs:{label:"C"},on:{change:function(){return t.updateMainUrl(t.subUrlC)}},model:{value:t.curVideo,callback:function(e){t.curVideo=e},expression:"curVideo"}},[t._v("教师电脑端")]),s("div",{class:["mb-2 j-video-box3 bg_gray2",{curVideo:t.subUrlC==t.mainUrl}],staticStyle:{width:"83%"}},[s("div",{style:{height:t.mainVedioHeight3,width:"100%"}})])],1),s("div",{staticClass:"col-3 bg_gray2 no-gutters",staticStyle:{display:"flex","flex-direction":"column",margin:"0",padding:"0"}},[s("div",{staticClass:"col-12 bg_blue white jfont12 py-3",staticStyle:{flex:"2"}},[s("div",{staticClass:"ml-3 mb-3 jfont22"},[s("i",{staticClass:"fa fa-bank mr-2"}),s("span",[t._v(t._s(t.detailItme.ClassName)+"#")])]),s("div",{staticClass:"ml-5 mb-2"},[s("i",{staticClass:"fa fa-arrow-circle-right mr-2"}),s("strong",[t._v("时间：")]),s("span",[t._v(t._s(t.curTime))])]),s("div",{staticClass:"ml-5 mb-2"},[s("i",{staticClass:"fa fa-arrow-circle-right mr-2"}),s("strong",[t._v("课室名称：")]),s("span",[t._v(t._s(t.detailItme.ClassName))])]),s("div",{staticClass:"ml-5 mb-2"},[s("i",{staticClass:"fa fa-arrow-circle-right mr-2"}),s("strong",[t._v("IP地址：")]),s("span",[t._v(t._s(t.detailItme.CCEquipIP))])]),s("div",{staticClass:"ml-5 mb-2"},[s("i",{staticClass:"fa fa-arrow-circle-right mr-2"}),s("strong",[t._v("在线状态：")]),s("span",{attrs:{id:"spanmachinestat"}},[t._v(t._s(t.detailItme.message?"在线":"离线"))])])]),s("div",{staticClass:"col-12 jfont12 gray mt-4",staticStyle:{flex:"5"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowChart,expression:"!isShowChart"}],staticStyle:{padding:"5px",height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"1"}},[t._l(t.tabslist,(function(e,a){return s("div",{key:a,staticClass:"ml-5 mb-2",attrs:{title:"查看趋势图"},on:{click:function(){return t.showChart(e)}}},[s("div",{staticStyle:{display:"flex"}},[s("div",{staticStyle:{flex:"1"}},[s("i",{staticClass:"fa fa-angle-right mr-2"}),s("strong",{staticClass:"black d-inline-block",staticStyle:{width:"60px"}},[t._v(t._s(e.label))])]),s("div",{staticStyle:{flex:"3"}},[t._v(" "+t._s(t.formatStatus(e.field))+" "+t._s(t.options[e.field].unit)+" ")])])])})),s("div",{staticClass:"ml-5 mb-2"},[s("div",{staticStyle:{display:"flex"}},[t._m(3),s("div",{staticStyle:{flex:"3"}},[s("img",{attrs:{src:a("e078")("./"+(t.isTeaching?"teaching":"teachNo")+".png"),height:"16px"}})])])]),s("div",{staticClass:"ml-5 mb-2"},[s("div",{staticStyle:{display:"flex"}},[t._m(4),s("div",{staticStyle:{flex:"3"}},[s("img",{attrs:{src:a("e078")("./"+(t.isMouseing?"mouseing":"mouseNo")+".png"),height:"16px"}})])])]),s("div",{staticClass:"ml-5 mb-2"},[s("div",{staticStyle:{display:"flex"}},[t._m(5),s("div",{staticStyle:{flex:"3"}},[s("img",{attrs:{src:a("e078")("./"+(t.isKeyboarding?"keyboarding":"keyboardingNo")+".png"),height:"16px"}})])])]),s("div",{staticClass:"ml-5 mb-2",on:{click:function(){return t.showChart({field:"lessionLog"})}}},[t._m(6)])],2)]),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isShowChart,expression:"isShowChart"}],staticClass:"el-icon-circle-close",staticStyle:{"font-size":"32px",position:"absolute",left:"calc(100% - 32px)",top:"-15px"},on:{click:t.exitChart}}),s("el-tabs",{directives:[{name:"show",rawName:"v-show",value:t.isShowChart,expression:"isShowChart"}],staticStyle:{padding:"5px",height:"100%",display:"flex","flex-direction":"column"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.tabslist,(function(e,a){return s("el-tab-pane",{key:a,attrs:{name:e.field}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.label)+"("+t._s(t.detailItme.message[e.field])+t._s(t.options[e.field].unit)+")")]),t.activeName==e.field?s("echatbox",{attrs:{option:t.options[e.field]}}):t._e()],1)})),s("el-tab-pane",{key:t.tabslist.length,attrs:{name:"lessionLog",label:"课室日志"}},[s("div",{staticClass:"msgActionList",on:{mouseover:function(e){return t.stopScroll()},mouseout:function(e){return t.restartScroll()}}},[s("div",{staticStyle:{display:"flex"}},[s("div",{staticStyle:{flex:"2"}},[t._v("时间")]),s("div",{staticStyle:{flex:"3"}},[t._v("操作")]),s("div",{staticStyle:{flex:"2"}},[t._v("来源")])]),s("el-scrollbar",t._l(t.listData,(function(e,a){return s("div",{key:a,staticStyle:{display:"flex"}},[s("div",{staticStyle:{flex:"2"},domProps:{textContent:t._s(e.time)}}),s("div",{staticStyle:{flex:"3"},domProps:{textContent:t._s(e.txt)}}),s("div",{staticStyle:{flex:"2"},domProps:{textContent:t._s(e.src)}})])})),0)],1)])],2)],1)])]),s("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}})]),s("div",{attrs:{id:"ctrl_pannels"}},["assisthtml1"===t.submenu?s("div",{staticClass:"assistdivclass",attrs:{id:"j-grid-box px-0",name:"assistdiv"}},[s("teachDevicePanel",{attrs:{citem:t.$data},on:{change:function(e,a){return t.updateChange(e,a)}}})],1):t._e(),"assisthtml2"===t.submenu?s("div",{staticClass:"envdivclass",attrs:{id:"j-grid-box px-0 mb-3",name:"envdiv"}},[s("div",{staticClass:"col-12 row d-flex m-auto"},[s("div",{staticClass:"col-4 no-gutters row my-3"},[s("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(7),s("div",{staticClass:"col-8 jfont12 float-left pt-4"},[s("div",{staticClass:"ml-3 row mb-3 mt-2"},[t._m(8),s("span",{staticClass:"jf-12 font-weight-normal gray"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isPodiumLight")}},model:{value:t.isPodiumLight,callback:function(e){t.isPodiumLight=e},expression:"isPodiumLight"}})],1)]),s("div",{staticClass:"ml-3 row mb-2"},[t._m(9),s("span",{staticClass:"jf-12 font-weight-normal gray"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"IsClassLight")}},model:{value:t.IsClassLight,callback:function(e){t.IsClassLight=e},expression:"IsClassLight"}})],1)])])])]),s("div",{staticClass:"col-4 no-gutters row my-3"},[s("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(10),s("div",{staticClass:"col-8 float-left pt-3 row d-flex align-items-center"},[s("div",{staticClass:"ml-3 col-12 d-flex align-items-center"},[t._m(11),s("div",{staticClass:"j-ctrl-btn-group row"},[s("div",{staticClass:"ml-4 mt-2",on:{click:function(){return t.updateChange("up","isPodiumCurtain")}}},[t._m(12)]),s("div",{staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("stop","isPodiumCurtain")}}},[t._m(13)]),s("div",{staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("down","isPodiumCurtain")}}},[t._m(14)])])]),s("div",{staticClass:"ml-3 col-12 d-flex align-items-center"},[t._m(15),s("div",{staticClass:"j-ctrl-btn-group row"},[s("div",{staticClass:"ml-4 mt-2",on:{click:function(){return t.updateChange("up","isClassCurtain")}}},[t._m(16)]),s("div",{staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("stop","isClassCurtain")}}},[t._m(17)]),s("div",{staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("down","isClassCurtain")}}},[t._m(18)])])])])])]),s("div",{staticClass:"col-4 no-gutters row my-3"},[s("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(19),s("div",{staticClass:"col-8 jfont12 float-left pt-4 mt-2"},[s("div",{staticClass:"ml-3 row mb-3"},[t._m(20),s("span",{staticClass:"jf-12 font-weight-normal gray mr-3"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"IsAc1")}},model:{value:t.isOpenPanel,callback:function(e){t.isOpenPanel=e},expression:"isOpenPanel"}})],1),t._m(21),s("span",{staticClass:"jf-12 font-weight-normal gray"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"IsAc2")}},model:{value:t.isOpenPanel,callback:function(e){t.isOpenPanel=e},expression:"isOpenPanel"}})],1)]),s("div",{staticClass:"ml-3 row mb-2"},[t._m(22),s("span",{staticClass:"jf-12 font-weight-normal gray mr-3"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"IsAc3")}},model:{value:t.isOpenPanel,callback:function(e){t.isOpenPanel=e},expression:"isOpenPanel"}})],1),t._m(23),s("span",{staticClass:"jf-12 font-weight-normal gray"},[s("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"IsAc4")}},model:{value:t.isOpenPanel,callback:function(e){t.isOpenPanel=e},expression:"isOpenPanel"}})],1)])])])])])]):t._e()])])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded-circle bg_gray mr-2 j-icon d-flex align-items-center"},[a("i",{staticClass:"fa fa-volume-up white m-auto"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded-circle bg_gray mr-2 j-icon d-flex align-items-center"},[a("i",{staticClass:"fa fa-volume-up white m-auto"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"j-sound-btn row mr-3 px-2 call",staticStyle:{"margin-top":"35px"}},[a("div",{staticClass:"rounded-circle bg_gray mr-2 j-icon d-flex align-items-center"},[a("i",{staticClass:"fa fa-phone white m-auto"})]),a("span",[t._v("呼叫")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{flex:"1"}},[a("i",{staticClass:"fa fa-angle-right mr-2"}),a("strong",{staticClass:"black d-inline-block",staticStyle:{width:"60px"}},[t._v("上课情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{flex:"1"}},[a("i",{staticClass:"fa fa-angle-right mr-2"}),a("strong",{staticClass:"black d-inline-block",staticStyle:{width:"60px"}},[t._v("鼠标情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{flex:"1"}},[a("i",{staticClass:"fa fa-angle-right mr-2"}),a("strong",{staticClass:"black d-inline-block",staticStyle:{width:"60px"}},[t._v("键盘情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{flex:"1"}},[a("i",{staticClass:"fa fa-angle-right mr-2"}),a("strong",{staticClass:"black d-inline-block",staticStyle:{width:"60px"}},[t._v("课室日志")])]),a("div",{staticStyle:{flex:"3"}},[a("span",[t._v("查看详情")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-lightbulb-o fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("灯光")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("LIGHTS")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-lightbulb-o mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("讲台灯光")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-lightbulb-o mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("课室灯光")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-columns fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("窗帘")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("CURTAINS")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mr-2 jfont12 gray mt-1"},[a("i",{staticClass:"fa fa-columns"}),t._v(" 讲台窗帘 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack j-ctrl-btn curtain1"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-up white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack j-ctrl-btn active curtain1"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-pause white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack j-ctrl-btn curtain1"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-down white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mr-2 jfont12 gray mt-1"},[a("i",{staticClass:"fa fa-columns"}),t._v(" 课室窗帘 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack curtain2"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-up white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack active curtain2"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-pause white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fa-stack curtain2"},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-down white"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-snowflake-o fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("空调")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("AIR CONDITIONER")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("空调-1")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("空调-2")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("空调-3")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("空调-4")])])}],G=(a("4194"),a("20a5"),a("9012")),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"echartBox",staticClass:"echartBox"})},Y=[],Z={data:function(){return{chart:null}},props:["option"],watch:{option:function(t){var e=this;this.chart&&(this.chart.setOption(t),setTimeout((function(){e.chart.resize()}),200))}},mounted:function(){var t=this;this.chart=echarts.init(this.$refs["echartBox"]),this.chart.setOption(this.option),setTimeout((function(){t.chart.resize()}),200),$(window).resize((function(){t.chart.resize()}))}},Q=Z,K=(a("fe19"),Object(u["a"])(Q,H,Y,!1,null,null,null)),X=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 row d-flex mr-0 mb-3"},[a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(0),a("div",{staticClass:"col-8 jfont12 float-left pt-3"},[a("div",{staticClass:"ml-3 row mb-2"},[t._m(1),a("span",{staticClass:"jf-12 font-weight-normal gray"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isOpenSystem")}},model:{value:t.item.isOpenSystem,callback:function(e){t.$set(t.item,"isOpenSystem",e)},expression:"item.isOpenSystem"}})],1)]),a("div",{staticClass:"ml-3 row mb-2"},[t._m(2),a("span",{staticClass:"jf-12 font-weight-normal gray"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isOpenDesktop")}},model:{value:t.item.isOpenDesktop,callback:function(e){t.$set(t.item,"isOpenDesktop",e)},expression:"item.isOpenDesktop"}})],1)]),a("div",{staticClass:"ml-3 row mb-2"},[t._m(3),a("span",{staticClass:"jf-12 font-weight-normal gray"},[a("switchbtn",{attrs:{onLabel:"解锁",offLabel:"关锁"},on:{change:function(e){return t.updateChange(e,"isOpenPanel")}},model:{value:t.item.isOpenPanel,callback:function(e){t.$set(t.item,"isOpenPanel",e)},expression:"item.isOpenPanel"}})],1)])])])]),a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(4),a("div",{staticClass:"col-8 jfont12 float-left pt-3 digitaldevicesgroup"},[a("div",{staticClass:"ml-3 row mb-3 mt-3",staticStyle:{display:"flex"}},[a("el-radio",{staticStyle:{flex:"1"},attrs:{label:"Laptop"},on:{change:function(e){return t.updateChange(e,"MediaSignal")}},model:{value:t.item.MediaSignal,callback:function(e){t.$set(t.item,"MediaSignal",e)},expression:"item.MediaSignal"}},[a("i",{staticClass:"fa fa-laptop mr-2",staticStyle:{width:"15px"}}),a("span",{staticStyle:{width:"80px"}},[t._v("笔记本-VGA")])]),a("el-radio",{staticStyle:{flex:"1"},attrs:{label:"DigitalBooth"},on:{change:function(e){return t.updateChange(e,"MediaSignal")}},model:{value:t.item.MediaSignal,callback:function(e){t.$set(t.item,"MediaSignal",e)},expression:"item.MediaSignal"}},[a("i",{staticClass:"fa fa-laptop mr-2",staticStyle:{width:"15px"}}),a("span",{staticStyle:{width:"80px"}},[t._v("笔记本-HDMI")])])],1),a("div",{staticClass:"ml-3 row mb-3",staticStyle:{display:"flex"}},[a("el-radio",{staticStyle:{flex:"1"},attrs:{label:"Desktop"},on:{change:function(e){return t.updateChange(e,"MediaSignal")}},model:{value:t.item.MediaSignal,callback:function(e){t.$set(t.item,"MediaSignal",e)},expression:"item.MediaSignal"}},[a("i",{staticClass:"fa fa-desktop mr-2",staticStyle:{width:"15px"}}),a("span",{staticStyle:{width:"80px"}},[t._v("电脑")])]),a("el-radio",{staticStyle:{flex:"1"},attrs:{label:"DigitalEquipment"},on:{change:function(e){return t.updateChange(e,"MediaSignal")}},model:{value:t.item.MediaSignal,callback:function(e){t.$set(t.item,"MediaSignal",e)},expression:"item.MediaSignal"}},[a("i",{staticClass:"fa fa-braille mr-2",staticStyle:{width:"15px"}}),a("span",{staticStyle:{width:"80px"}},[t._v("数字设备")])])],1)])])]),a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(5),a("div",{staticClass:"col-8 jfont12 float-left pt-3"},[a("div",{staticClass:"ml-3 row mb-3"},[t._m(6),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.Volume,expression:"item.Volume"}],staticClass:"j-slider volume",style:{"background-image":t.getColor(t.item.Volume)},attrs:{type:"range",step:"10",min:"0",max:"90",id:"js01"},domProps:{value:t.item.Volume},on:{change:function(e){return t.updateChange(e.target.value,"Volume")},__r:function(e){return t.$set(t.item,"Volume",e.target.value)}}}),t._v(t._s(isNaN(t.item.Volume)?"-":t.item.Volume)+" ")]),a("div",{class:["j-single-icon-btn j-ban",{active:0==t.item.Volume}],on:{click:function(e){t.item.Volume=0}}},[a("i",{staticClass:"fa fa-lg fa-ban ml-2"})])]),a("div",{staticClass:"ml-3 row mb-3"},[t._m(7),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.Mic1Volume,expression:"item.Mic1Volume"}],staticClass:"j-slider WiredMicVolumeWeb",style:{"background-image":t.getColor(t.item.Mic1Volume)},attrs:{type:"range",min:"0",max:"90",step:"10",id:"js02"},domProps:{value:t.item.Mic1Volume},on:{change:function(e){return t.updateChange(e.target.value,"Mic1Volume")},__r:function(e){return t.$set(t.item,"Mic1Volume",e.target.value)}}}),t._v(t._s(isNaN(t.item.Mic1Volume)?"-":t.item.Mic1Volume)+" ")]),a("div",{class:["j-single-icon-btn j-ban",{active:0==t.item.Mic1Volume}],on:{click:function(e){t.item.Mic1Volume=0}}},[a("i",{staticClass:"fa fa-lg fa-ban ml-2"})])]),a("div",{staticClass:"ml-3 row mb-2"},[t._m(8),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.Mic2Volume,expression:"item.Mic2Volume"}],staticClass:"j-slider wirelessmicvolume",style:{"background-image":t.getColor(t.item.Mic2Volume)},attrs:{type:"range",min:"0",max:"90",step:"10",id:"js03"},domProps:{value:t.item.Mic2Volume},on:{change:function(e){return t.updateChange(e.target.value,"Mic2Volume")},__r:function(e){return t.$set(t.item,"Mic2Volume",e.target.value)}}}),t._v(t._s(isNaN(t.item.Mic2Volume)?"-":t.item.Mic2Volume)+" ")]),a("div",{class:["j-single-icon-btn j-ban",{active:0==t.item.Mic2Volume}],on:{click:function(e){t.item.Mic2Volume=0}}},[a("i",{staticClass:"fa fa-lg fa-ban ml-2"})])])])])]),a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"align-middle my-2",staticStyle:{width:"32px",height:"32px",display:"inline-block"}},[a("svg",{staticClass:"svg-1 fill-white",attrs:{t:"1610501197422",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1615",width:"32",height:"32"}},[a("path",{attrs:{d:"M288 288h448v268.8H288z","p-id":"1616"}}),a("path",{attrs:{d:"M825.6 153.6H153.6v89.6h44.8V601.6H153.6v44.8h313.6V704c-25.6 16-44.8 44.8-44.8 76.8 0 48 41.6 89.6 89.6 89.6 48 0 89.6-41.6 89.6-89.6 0-32-19.2-60.8-44.8-76.8v-57.6h313.6v-44.8h-44.8V243.2h44.8V153.6h-44.8z m-313.6 672c-25.6 0-44.8-19.2-44.8-44.8 0-25.6 19.2-44.8 44.8-44.8 25.6 0 44.8 19.2 44.8 44.8 0 25.6-19.2 44.8-44.8 44.8z m268.8-224H243.2V243.2h537.6v358.4z","p-id":"1617"}})])]),t._m(9),a("div",{staticClass:"mb-2 jfont12"},[t._v("SCREEN")])]),a("div",{staticClass:"col-8 pt-2 row d-flex align-items-center mt-2 j-ctrl-btn-group"},[a("span",{staticClass:"mr-1 ml-3 mt-1 gray jfont12"},[a("i",{staticClass:"fa fa-lg align-middle my-2",staticStyle:{width:"20px",height:"20px"}},[a("svg",{staticClass:"icon",attrs:{t:"1610501197422",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1615",width:"20",height:"20"}},[a("path",{attrs:{d:"M288 288h448v268.8H288z","p-id":"1616"}}),a("path",{attrs:{d:"M825.6 153.6H153.6v89.6h44.8V601.6H153.6v44.8h313.6V704c-25.6 16-44.8 44.8-44.8 76.8 0 48 41.6 89.6 89.6 89.6 48 0 89.6-41.6 89.6-89.6 0-32-19.2-60.8-44.8-76.8v-57.6h313.6v-44.8h-44.8V243.2h44.8V153.6h-44.8z m-313.6 672c-25.6 0-44.8-19.2-44.8-44.8 0-25.6 19.2-44.8 44.8-44.8 25.6 0 44.8 19.2 44.8 44.8 0 25.6-19.2 44.8-44.8 44.8z m268.8-224H243.2V243.2h537.6v358.4z","p-id":"1617"}})])]),a("span",{staticClass:"d-inline-block",staticStyle:{width:"50px"}},[t._v("幕布")])]),a("div",{key:1,staticClass:"ml-2 mt-2",on:{click:function(){return t.updateChange("up","Screen")}}},[a("span",{class:["fa-stack j-ctrl-btn screen1",{active:"Up"==t.item.Screen}]},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-up white"})])]),a("div",{key:2,staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("stop","Screen")}}},[a("span",{class:["fa-stack j-ctrl-btn screen1",{active:"Stop"==t.item.Screen}]},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-pause white"})])]),a("div",{key:3,staticClass:"ml-3 mt-2",on:{click:function(){return t.updateChange("down","Screen")}}},[a("span",{class:["fa-stack j-ctrl-btn screen1",{active:"Down"==t.item.Screen}]},[a("i",{staticClass:"fa fa-circle fa-stack-2x gray bg"}),a("i",{staticClass:"fa fa-stack-1x fa-arrow-down white"})])])])])]),a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",[a("svg",{staticClass:"svg-1 fill-white",staticStyle:{height:"32px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.56 16.81"}},[a("g",[a("circle",{staticClass:"cls-1",attrs:{cx:"5.96",cy:"5.35",r:"1.95"}}),a("path",{attrs:{d:"M17.42,1.2H9.3a5.26,5.26,0,0,0-6.69,0H1.19A1.19,1.19,0,0,0,0,2.39V8.31A1.19,1.19,0,0,0,1.19,9.5H2.61a5.26,5.26,0,0,0,6.69,0h8.12a1.19,1.19,0,0,0,1.19-1.19V2.39A1.2,1.2,0,0,0,17.42,1.2ZM6,9.17A3.82,3.82,0,1,1,9.77,5.35,3.82,3.82,0,0,1,6,9.17ZM16,7.84h-3.1a1,1,0,1,1,0-2H16a1,1,0,0,1,0,2Zm0-3h-3.1a1,1,0,0,1,0-2H16a1,1,0,0,1,0,2Z"}})])])]),t._m(10),a("div",{staticClass:"mb-2 jfont12"},[t._v("PROJECTOR")])]),a("div",{staticClass:"col-8 jfont12 float-left pt-4"},[a("div",{staticClass:"ml-3 row mb-3 mt-2"},[a("span",{staticClass:"mr-2 gray",staticStyle:{height:"18px"}},[a("i",{staticClass:"mr-1",staticStyle:{width:"15px",height:"18px"}},[a("svg",{staticClass:"svg-2 fill-gray",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.56 16.81"}},[a("g",[a("circle",{staticClass:"cls-1",attrs:{cx:"5.96",cy:"5.35",r:"1.95"}}),a("path",{attrs:{d:"M17.42,1.2H9.3a5.26,5.26,0,0,0-6.69,0H1.19A1.19,1.19,0,0,0,0,2.39V8.31A1.19,1.19,0,0,0,1.19,9.5H2.61a5.26,5.26,0,0,0,6.69,0h8.12a1.19,1.19,0,0,0,1.19-1.19V2.39A1.2,1.2,0,0,0,17.42,1.2ZM6,9.17A3.82,3.82,0,1,1,9.77,5.35,3.82,3.82,0,0,1,6,9.17ZM16,7.84h-3.1a1,1,0,1,1,0-2H16a1,1,0,0,1,0,2Zm0-3h-3.1a1,1,0,0,1,0-2H16a1,1,0,0,1,0,2Z"}})])])]),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("投影仪")])]),a("span",{staticClass:"jf-12 font-weight-normal gray"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isProjector")}},model:{value:t.item.isProjector,callback:function(e){t.$set(t.item,"isProjector",e)},expression:"item.isProjector"}})],1)]),a("div",{staticClass:"ml-3 row mb-2",staticStyle:{display:"none"}},[a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"mr-1",staticStyle:{width:"15px"}},[a("svg",{staticClass:"svg-2 fill-gray",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.56 16.81"}},[a("g",[a("circle",{staticClass:"cls-1",attrs:{cx:"5.96",cy:"5.35",r:"1.95"}}),a("path",{attrs:{d:"M17.42,1.2H9.3a5.26,5.26,0,0,0-6.69,0H1.19A1.19,1.19,0,0,0,0,2.39V8.31A1.19,1.19,0,0,0,1.19,9.5H2.61a5.26,5.26,0,0,0,6.69,0h8.12a1.19,1.19,0,0,0,1.19-1.19V2.39A1.2,1.2,0,0,0,17.42,1.2ZM6,9.17A3.82,3.82,0,1,1,9.77,5.35,3.82,3.82,0,0,1,6,9.17ZM16,7.84h-3.1a1,1,0,1,1,0-2H16a1,1,0,0,1,0,2Zm0-3h-3.1a1,1,0,0,1,0-2H16a1,1,0,0,1,0,2Z"}})])])]),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("投影仪-2")])]),t._m(11)])])])]),a("div",{staticClass:"col-4 no-gutters row my-3"},[a("div",{staticClass:"col-12 stat-card no-gutters row"},[t._m(12),a("div",{staticClass:"col-8 jfont12 float-left pt-4 mt-2"},[a("div",{staticClass:"ml-3 row mb-3"},[a("span",{staticClass:"mr-2 gray",staticStyle:{height:"18px"}},[a("i",{staticClass:"mr-2",staticStyle:{width:"15px"}},[a("svg",{staticClass:"svg-2 fill-gray",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.56 16.81"}},[a("g",[a("circle",{staticClass:"cls-1",attrs:{cx:"5.96",cy:"5.35",r:"1.95"}}),a("path",{attrs:{d:"M17.42,1.2H9.3a5.26,5.26,0,0,0-6.69,0H1.19A1.19,1.19,0,0,0,0,2.39V8.31A1.19,1.19,0,0,0,1.19,9.5H2.61a5.26,5.26,0,0,0,6.69,0h8.12a1.19,1.19,0,0,0,1.19-1.19V2.39A1.2,1.2,0,0,0,17.42,1.2ZM6,9.17A3.82,3.82,0,1,1,9.77,5.35,3.82,3.82,0,0,1,6,9.17ZM16,7.84h-3.1a1,1,0,1,1,0-2H16a1,1,0,0,1,0,2Zm0-3h-3.1a1,1,0,0,1,0-2H16a1,1,0,0,1,0,2Z"}})])])]),a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("投影")])]),a("span",{staticClass:"jf-12 font-weight-normal gray mr-3 powerspan"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isProjectorPower")}},model:{value:t.item.isProjectorPower,callback:function(e){t.$set(t.item,"isProjectorPower",e)},expression:"item.isProjectorPower"}})],1),t._m(13),a("span",{staticClass:"jf-12 font-weight-normal gray powerspan"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isComputerPower")}},model:{value:t.item.isComputerPower,callback:function(e){t.$set(t.item,"isComputerPower",e)},expression:"item.isComputerPower"}})],1)]),a("div",{staticClass:"ml-3 row mb-2"},[t._m(14),a("span",{staticClass:"jf-12 font-weight-normal gray mr-3 powerspan"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isVolumePower")}},model:{value:t.item.isVolumePower,callback:function(e){t.$set(t.item,"isVolumePower",e)},expression:"item.isVolumePower"}})],1),t._m(15),a("span",{staticClass:"jf-12 font-weight-normal gray powerspan"},[a("switchbtn",{attrs:{onLabel:"开启",offLabel:"关闭"},on:{change:function(e){return t.updateChange(e,"isOtherPower")}},model:{value:t.item.isOtherPower,callback:function(e){t.$set(t.item,"isOtherPower",e)},expression:"item.isOtherPower"}})],1)])])])])])},et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-cog fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("系统")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("SYSTEM")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-windows mr-2",staticStyle:{width:"15px"}}),t._v("系统 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-desktop mr-2",staticStyle:{width:"15px"}}),t._v("电脑 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-wrench mr-2",staticStyle:{width:"15px"}}),t._v("面板 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-signal fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("信号")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("SIGNAL")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-sliders fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("音量")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("VOLUME")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-volume-up mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("电脑音量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-microphone mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("有线麦")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-headphones mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:"60px"}},[t._v("无线麦")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-2"},[a("strong",[t._v("幕布")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-2"},[a("strong",[t._v("投影")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"jf-12 font-weight-normal gray"},[a("label",[a("input",{staticClass:"projector2",attrs:{type:"checkbox",disabled:""}}),a("span",{staticClass:"jswift",staticStyle:{width:"60px","background-color":"dimgray"}},[a("i",{staticClass:"jswift-btn"}),a("i",{staticClass:"on"},[t._v("关闭")]),a("i",{staticClass:"off"},[t._v("开启")])])]),a("span",{staticClass:"j-status-light-sm bg_gray"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 bg_blue white py-3 text-center float-left"},[a("i",{staticClass:"fa fa-plug fa-2x"}),a("div",{staticClass:"mt-2"},[a("strong",[t._v("电源")])]),a("div",{staticClass:"mb-2 jfont12"},[t._v("POWER SUPPLY")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-desktop mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("电脑")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-volume-up mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("扩音")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mr-2 gray"},[a("i",{staticClass:"fa fa-ellipsis-h mr-2",staticStyle:{width:"15px"}}),a("span",{staticClass:"d-inline-block",staticStyle:{width:""}},[t._v("其它")])])}],at={data:function(){return console.log(this.citem,"数据俩了"),{item:this.citem}},watch:{citem:function(t){console.log(t,"更新")}},props:["citem"],components:{switchbtn:G["a"]},methods:{getColor:function(t){return"-webkit-linear-gradient(left, #66BA30 ".concat(t/90*100,"%, #f0f0f0 ").concat(t/90*100,"%)")},updateChange:function(t,e){console.log("t,e",t,e),this.$emit("change",t,e)}}},st=at,it=(a("0e0c"),Object(u["a"])(st,tt,et,!1,null,"6f94f90d",null)),lt=it.exports;function nt(t){console.log(t)}var rt=null;function ot(t){var e=t.unit,a=void 0===e?"":e,s=t.m,i=void 0===s?18:s,l=t.n,n=void 0===l?34:l,r=t.min,o=t.max,c=void 0===o?30:o,d=new Array(i).fill(1).map((function(){return parseFloat((Math.random()*c).toFixed(1))}));return{unit:a,xAxis:{type:"category",data:new Array(n).fill(1).map((function(t,e){return moment("07:00","HH:mm").add(30*e,"m").format("HH:mm")}))},tooltip:{trigger:"axis",formatter:"{b} / {c}".concat(a),axisPointer:{type:"cross"}},grid:{top:"10px",left:"5%",right:"5%",bottom:"5%",containLabel:!0},yAxis:{type:"value",axisLabel:{formatter:"{value}".concat(a)},min:function(){var t=parseFloat(Math.min.apply(Math,Object(N["a"])(d)).toFixed(0))-5;return console.log("xxxxxxx",r,t,1111,isNaN(r),11111),isNaN(r)?t:t<r?r:t}(),max:parseFloat(Math.max.apply(Math,Object(N["a"])(d)).toFixed(0))+5,axisPointer:{snap:!0}},series:[{data:d,type:"line",smooth:!0}]}}var ct={data:function(){return{soundtype:"",isFromAction:"broadcastMessage",curVideo:"A",mainUrl:"",subUrlA:"",subUrlB:"",subUrlC:"",CameraDetails:null,mainVedioHeight:0,mainVedioHeight2:0,mainVedioHeight3:0,isWaitResult:!1,listData:new Array(20).fill(1).map((function(t,e){return{time:moment().add(-e,"h").format("YYYY-MM-DD HH:mm"),txt:" 操作信息-"+e,src:"--"}})),tabslist:[{label:"温度",field:"Temperature"},{label:"湿度",field:"Humidity"},{label:"PM10",field:"PM10"},{label:"PM2.5",field:"PM2_5"},{label:"二氧化碳",field:"OOC",unit:"m³"},{label:"甲醛",field:"HCHO",unit:"mg/m³"},{label:"亮度",field:"LightStatus"},{label:"电压",field:"Voltage"},{label:"能耗",field:"Power"}],isShowChart:!1,options:{Temperature:ot({unit:"℃"}),Humidity:ot({unit:"%",min:0}),PM10:ot({unit:"μg/m3",min:0}),PM2_5:ot({unit:"μg/m3",min:0}),LightStatus:ot({unit:"%",min:0}),Voltage:ot({unit:"v",min:0}),OOC:ot({unit:"m³",min:0}),HCHO:ot({unit:"mg/m³",min:0}),Power:ot({unit:"kw",min:0}),isTeaching:ot({unit:"",min:0,max:1}),isMouseing:ot({unit:"",min:0,max:1}),isKeyboarding:ot({unit:"",min:0,max:1})},curTime:moment().format("YYYY-MM-DD"),activeName:"Temperature",submenu:"assisthtml1",isOpenSystem:!1,isOpenDesktop:!1,isOpenPanel:!1,MediaSignal:"",Volume:-1,Mic1Volume:-1,Mic2Volume:-1,Screen:"",message:{Data:this.detailItme.message},isProjector:!1,isProjectorPower:!1,isComputerPower:!1,isVolumePower:!1,isOtherPower:!1,isInited:!1,isStarted:!1,isTeaching:!1,isMouseing:!1,isKeyboarding:!1}},components:{switchbtn:G["a"],echatbox:X,teachDevicePanel:lt},props:["detailItme"],mounted:function(){var t=this;this.message={Data:this.detailItme.message},this.initStatus(),this.isInited=!0;var e=Object(M["a"])({cb_initEvent:function(){},cb_broadcastMessage:function(e){var a=e.name,s=e.message,i=e.from;if(t.isStarted=!0,"broadcastMessage"===i){if(t.isFromAction="broadcastMessage",t.detailItme.MacAddress==a)if("ControlExecution"===s.Type){if("Success"==s.InstructionStatus){t.isWaitResult=!1;var l=Object(o["a"])(Object(o["a"])({},t.message.Data),s.Data);t.message.Data=l,t.initStatus()}}else if(t.isWaitResult&&t.isInited)console.log("等待执行结果",s);else{var n=Object(o["a"])(Object(o["a"])({},t.message.Data),s.Data);t.message.Data=n,t.initStatus()}}else"messageALarm"===i?(console.log(a,s),t.isTeaching="TriggerOn"==s):"desktopEvent"===i&&t.detailItme.MacAddress==a&&"DesktopEvent"==s.Type&&(t.isMouseing="MouseEvent"==s.Action,t.isKeyboarding="KeyBoardEvent"==s.Action,setTimeout((function(){t.isMouseing=!1,t.isKeyboarding=!1}),15e3))}});rt=e.chat,this.getCameraDetails().then((function(){t.init()}))},methods:{setSound:function(t){this.isFromAction="UserAciton",this.soundtype=t,this.sendData("student"===t?"StudentAudioWeb":"TeacherAudioWeb"),this.$forceUpdate()},doAction:function(t){switch(console.log("name",t),t){case"up":$(".j-video-box iframe").contents().find(".btn.btnU").click();break;case"down":$(".j-video-box iframe").contents().find(".btn.btnD").click();break;case"left":$(".j-video-box iframe").contents().find(".btn.btnL").click();break;case"right":$(".j-video-box iframe").contents().find(".btn.btnR").click();break;case"auto":$(".j-video-box iframe").contents().find(".btn.btnAuto").click();break;case"zoom+":$(".j-video-box iframe").contents().find(".btn.btnZoomUp").click();break;case"zoom-":$(".j-video-box iframe").contents().find(".btn.btnZoomDown").click();break;case"focus+":$(".j-video-box iframe").contents().find(".btn.btnFoucusUp").click();break;case"focus-":$(".j-video-box iframe").contents().find(".btn.btnFoucusDown").click();break}-1!==["focus-","focus+"].indexOf(t)&&setTimeout((function(){$(".j-video-box iframe").contents().find(".btn.btnFoucusStop").click()}),200),-1!==["zoom-","zoom+"].indexOf(t)&&setTimeout((function(){$(".j-video-box iframe").contents().find(".btn.btnZoomStop").click()}),200),-1!==["up","down","left","right"].indexOf(t)&&setTimeout((function(){$(".j-video-box iframe").contents().find(".btn.btnKeyUp").click()}),200)},updateMainUrl:function(t){this.mainUrl=t},getCameraDetails:function(){var t=this,e="/Services/GetOrganisationData.asmx/GetCameraByClassId";return axios.post(e,{id:this.detailItme.ClassId}).then((function(e){console.log(e.data.d.value,8888888888),t.CameraDetails=e.data.d.value,t.detailItme.CCEquipIP=e.data.d.value.CCEquipIp,t.detailItme.MacAddress=e.data.d.value.CCMac,t.subUrlA="./hikversionPlayer.html?id=".concat(t.CameraDetails.CamLoginId,"&pwd=").concat(t.CameraDetails.CamPassword,"&ip=").concat(t.CameraDetails.CamTeacherIp,"&port=").concat(t.CameraDetails.CamPort),t.subUrlB="./hikversionPlayer.html?id=".concat(t.CameraDetails.CamLoginId,"&pwd=").concat(t.CameraDetails.CamPassword,"&ip=").concat(t.CameraDetails.CamStudentIp,"&port=").concat(t.CameraDetails.CamPort),t.subUrlC="http://".concat(t.CameraDetails.DesktopIp,":9000/vnc.html"),t.updateMainUrl(t.subUrlA)}))},updateClassLogs:function(){var t=this,e="/Services/UserLogs.asmx/GetClassLogs";axios.post(e,{id:this.detailItme.ClassId}).then((function(e){var a=e.data.d.data;t.listData=[],t.listData=a.map((function(e){return{time:e.ActionTime,txt:t.formatActions(e.Action),src:e.UserName}})),console.log(a,"this.detailItme",t.listData)}))},formatActions:function(t){return""===t?"--":v["a"][t]?v["a"][t]:t},formatStatus:function(t){var e=this.detailItme.message[t];switch(t){case"Power":if("0"==e)return""}return e},restartScroll:function(){console.log("out"),this.$refs.scroller.start()},stopScroll:function(){console.log("in"),this.$refs.scroller.stop()},showChart:function(t){"lessionLog"==t.field&&this.updateClassLogs(),this.activeName=t.field,this.isShowChart=!0},exitChart:function(){this.isShowChart=!1},handleClick:function(t,e){console.log(t,e);var a={};switch(t.name){case"Temperature":a=ot({unit:"℃"});break;case"Humidity":a=ot({unit:"%",min:0});break;case"PM10":a=ot({unit:"μg/m3",min:0});break;case"PM2_5":a=ot({unit:"μg/m3",min:0});break;case"LightStatus":a=ot({lx:"%",min:0});break;case"Voltage":a=ot({lx:"v",min:0});break;case"Power":a=ot({lx:"kw",min:0});break;case"isTeaching":a=ot({unit:"",min:0,max:1});break;case"isMouseing":a=ot({unit:"",min:0,max:1});break;case"isKeyboarding":a=ot({unit:"",min:0,max:1});break}this.options[t.name]=a},initStatus:function(){var t;console.log(this.message.Data,11111,this.message),(null===(t=this.message)||void 0===t?void 0:t.Data)&&(this.MediaSignal=-1==["DigitalCurtain"].indexOf(this.message.Data.MediaSignal)?this.message.Data.MediaSignal:"Digital",this.isProjector="On"==this.message.Data.ProjectorStatus,this.isOpenPanel="False"==this.message.Data.IsSystemLock,this.isOpenDesktop="On"==this.message.Data.PcStatus,this.isOpenSystem="Open"==this.message.Data.WorkStatus,this.Volume=this.message.Data.Volume,this.Screen=this.message.Data.Screen,this.Mic1Volume=parseFloat(this.message.Data.WiredMicVolume),this.Mic2Volume=parseFloat(this.message.Data.WirelessMicVolume),this.isProjectorPower="On"==this.message.Data.ProjectorPowerStatus,this.isComputerPower="On"==this.message.Data.ComputerPowerStatus,this.isVolumePower="On"==this.message.Data.AmplifierPowerStatus,this.isOtherPower="On"==this.message.Data.OtherPowerStatus)},sendData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("broadcastMessage"!=this.isFromAction)return console.log("用户操作",t,a),this.isStarted?this.isInited?new Promise((function(s,i){if(t&&e.isInited){e.isWaitResult=!0,console.log("发送数据",e.isWaitResult,t),rt.server.sendControlKeys(e.detailItme.MacAddress,t,JSON.stringify(Object(o["a"])(Object(o["a"])({},E.a.get()),a))),setTimeout((function(){return e.updateClassLogs()}),500);var l=0,n=setInterval((function(){e.isWaitResult||(console.log("检查结果",e.isWaitResult),clearInterval(n),ELEMENT.Message("执行操作成功"),s()),l+=1,l>150&&(e.isWaitResult=!1,clearInterval(n),ELEMENT.Message("执行操作超时"),console.log("检查结果超时",e.isWaitResult),rt.server.getStatus(),i())}),100)}else s()})):(console.log("还没有初始化数据"),{}):(console.log("websocket正在建立连接"),{});console.log("来自广播更新",t,a)},_changeVol:function(t){var e=t.value;this.sendData(t.addCode,{value:e}),this.$forceUpdate()},updateChange:function(t,e){console.log(t,e,"update"),this.isFromAction="UserAciton";var a="";switch(e){case"Volume":return void(this.isWaitResult||this._changeVol({fieldname:"Volume",value:t,addCode:"VolumeWeb"}));case"Mic1Volume":return void(this.isWaitResult||this._changeVol({fieldname:"Mic1Volume",value:t,addCode:"WiredMicVolumeWeb"}));case"Mic2Volume":return void(this.isWaitResult||this._changeVol({fieldname:"Mic2Volume",value:t,addCode:"WirelessMicVolumeWeb"}));case"MediaSignal":switch(t){case"Desktop":a="DesktopWeb";break;case"DigitalBooth":a="DigitalBoothWeb";break;case"Laptop":a="LaptopWeb";break;case"DigitalEquipment":a="DigitalEquipmentWeb";break}break;case"isOpenSystem":a=t?"SystemOnWeb":"SystemOffWeb";break;case"isOpenDesktop":a=t?"ComputerOnWeb":"ComputerOffWeb";break;case"isOpenPanel":a=t?"SystemUnlockWeb":"SystemLockWeb";break;case"isProjector":a=t?"ProjectorOnWeb":"ProjectorOffWeb";break;case"isProjectorPower":a=t?"ProjectorPowerOnWeb":"ProjectorPowerOffWeb";break;case"isComputerPower":a=t?"ComputerPowerOnWeb":"ComputerPowerOffWeb";break;case"isVolumePower":a=t?"AmplifierPowerOnWeb":"AmplifierPowerOffWeb";break;case"isOtherPower":a=t?"OtherPowerOnWeb":"OtherPowerOffWeb";break;case"IsAc1":a=t?"Ac1OnStrategy":"Ac1OffStrategy";break;case"IsAc2":a=t?"Ac2OnStrategy":"Ac2OffStrategy";break;case"IsAc3":a=t?"Ac3OnStrategy":"Ac3OffStrategy";break;case"IsAc4":a=t?"Ac4OnStrategy":"Ac4OffStrategy";break;case"IsClassLight":a=t?"ClassroomLightOnStrategy":"ClassroomLightOffStrategy";break;case"isPodiumLight":a=t?"PodiumLightOnStrategy":"PodiumLightOffStrategy";break;case"isPodiumCurtain":switch(t){case"down":a="CurtainOpenWeb";break;case"up":a="CurtainCloseWeb";break;case"stop":a="CurtainStopWeb";break}break;case"isClassCurtain":switch(t){case"down":a="CurtainOpenWeb";break;case"up":a="CurtainCloseWeb";break;case"stop":a="CurtainStopWeb";break}break;case"Screen":switch(t){case"down":a="ScreenDownWeb";break;case"up":a="ScreenRiseWeb";break;case"stop":a="ScreenStopWeb";break}break;default:break}this.sendData(a)},gotoBack:function(){this.$emit("update",{action:"deviceControl",item:{}})},init:function(){var t=this;$.ajax({type:"POST",url:"/Services/GetOrganisationData.asmx/GetClassByIP",data:JSON.stringify({ip:this.detailItme.CCEquipIP}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.detailItme.ClassName=e.d.value.ClassName},error:nt}),1==$("#assistdivnumber").val()?(document.getElementsByName("envdiv")[0].style.display="none",document.getElementsByName("assistdiv")[0].style.display="block"):2==document.getElementsByName("envdiv")[0]&&(document.getElementsByName("envdiv")[0].style.display="block",document.getElementsByName("assistdiv")[0].style.display="none"),this.mainVedioHeight=.5556*$(".j-video-box").width(),this.mainVedioHeight2=.5556*$(".j-video-box2").width(),this.mainVedioHeight3=.5556*$(".j-video-box3").width(),$(".j-video-box").css("height",.5556*$(".j-video-box").width()),$(".j-video-box2").css("height",.5556*$(".j-video-box2").width()),$(".j-video-box3").css("height",.5556*$(".j-video-box3").width()),this.initStatus(),this.updateClassLogs()}}},dt=ct,ut=(a("8b7f"),Object(u["a"])(dt,J,q,!1,null,"21522a12",null)),mt=ut.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("视频轮训 "+t._s(t.curVedioNum))]),a("div",{staticStyle:{display:"flex",widht:"100%","min-height":"800px"}},[a("div",{staticStyle:{flex:"30"},attrs:{id:"player"}},[0!=t.mainUrls.length?a("hikvisionPlayerMutil",{ref:"hikvisionPlayerMutil",attrs:{id:"p1",size:t.control.panelNum,deviceList:t.mainUrls,width:t.control.width,height:t.control.height}}):t._e()],1),a("div",{staticStyle:{flex:"10",padding:"15px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeNameTab,callback:function(e){t.activeNameTab=e},expression:"activeNameTab"}},[a("el-tab-pane",{attrs:{label:"控制台",name:"控制台"}},[a("div",[a("label",[t._v("面板数：")]),t._l(4,(function(e){return a("el-button",{key:e,attrs:{round:"",type:t.control.panelNum==e?"primary":""},on:{click:function(){return t.changeVideoNum(e)}}},[t._v(t._s(e*e))])}))],2),a("div",[a("div",[a("div",{staticClass:"flex-row-reverse",staticStyle:{width:"240px"}},[a("div",{staticClass:"rounded-circle yuntai yuntai-circle float-left"},[a("div",{staticClass:"yuntai-text rounded-circle jfont12 align-middle",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.doAction("auto")}}},[t._v(" 云台 ")]),a("i",{staticClass:"fa fa-arrow-circle-up fa-lg yuntai-btn up align-middle text-center position-absolute",on:{click:function(e){return t.doAction("up")}}}),a("i",{staticClass:"fa fa-arrow-circle-down fa-lg yuntai-btn down align-middle text-center position-absolute",on:{click:function(e){return t.doAction("down")}}}),a("i",{staticClass:"fa fa-arrow-circle-left fa-lg yuntai-btn left align-middle text-center position-absolute",on:{click:function(e){return t.doAction("left")}}}),a("i",{staticClass:"fa fa-arrow-circle-right fa-lg yuntai-btn right align-middle text-center position-absolute",on:{click:function(e){return t.doAction("right")}}})]),a("div",{staticClass:"rounded-lg yuntai-ctrl ml-4 yuntai jfont12 mt-3 float-right",staticStyle:{height:"80px",width:"100px"}},[a("div",{staticClass:"py-1 row align-items-center mt-1 ml-1 w-100"},[a("div",{staticClass:"mr-2",staticStyle:{width:"40px"}},[t._v("变倍")]),a("div",{staticClass:"row align-items-center"},[a("i",{staticClass:"fa fa-plus-circle fa-lg yuntai-btn ml-1",on:{click:function(e){return t.doAction("zoom+")}}}),a("i",{staticClass:"fa fa-minus-circle fa-lg yuntai-btn ml-2",on:{click:function(e){return t.doAction("zoom-")}}})])]),a("div",{staticClass:"py-1 row align-items-center mt-1 ml-1 w-100"},[a("div",{staticClass:"mr-2",staticStyle:{width:"40px"}},[t._v("变焦")]),a("div",{staticClass:"row align-items-center"},[a("i",{staticClass:"fa fa-plus-circle fa-lg yuntai-btn ml-1",on:{click:function(e){return t.doAction("focus+")}}}),a("i",{staticClass:"fa fa-minus-circle fa-lg yuntai-btn ml-2",on:{click:function(e){return t.doAction("focus-")}}})])])])])])])]),a("el-tab-pane",{attrs:{label:"全部",name:"全部"}},["全部"==t.activeNameTab?a("classList",{attrs:{control:t.control,mainUrls:t.mainUrls,getCameraList:t.getCameraList,in_or_out:!1,filter:!1,playVedio:t.playVedio,gotoDetailVedio:t.gotoDetailVedio,cancelPlayInList:t.cancelPlayInList},on:{changeMainUrls:t.updateMainUrls}}):t._e()],1),a("el-tab-pane",{attrs:{label:"使用中",name:"使用中"}},["使用中"==t.activeNameTab?a("classList",{attrs:{control:t.control,mainUrls:t.mainUrls,getCameraList:t.getCameraList,playVedio:t.playVedio,in_or_out:!1,filter:!0,hasTeacher:!0,system:"SystemOn",gotoDetailVedio:t.gotoDetailVedio,cancelPlayInList:t.cancelPlayInList},on:{changeMainUrls:t.updateMainUrls}}):t._e()],1),a("el-tab-pane",{attrs:{label:"未使用",name:"未使用"}},["未使用"==t.activeNameTab?a("classList",{attrs:{control:t.control,mainUrls:t.mainUrls,getCameraList:t.getCameraList,playVedio:t.playVedio,filter:!0,in_or_out:!1,hasTeacher:!1,system:"SystemOn",gotoDetailVedio:t.gotoDetailVedio,cancelPlayInList:t.cancelPlayInList},on:{changeMainUrls:t.updateMainUrls}}):t._e(),a("el-button",{attrs:{type:"danger"},on:{click:function(){return t.shutdownSystem()}}},[t._v("关闭系统")])],1),a("el-tab-pane",{attrs:{label:"已下课",name:"已下课"}},["已下课"==t.activeNameTab?a("classList",{attrs:{control:t.control,mainUrls:t.mainUrls,in_or_out:!1,filter:!0,hasTeacher:!1,system:"SystemOff",getCameraList:t.getCameraList,playVedio:t.playVedio,gotoDetailVedio:t.gotoDetailVedio,cancelPlayInList:t.cancelPlayInList},on:{changeMainUrls:t.updateMainUrls}}):t._e()],1),a("el-tab-pane",{attrs:{label:"已移除",name:"已移除"}},["已移除"==t.activeNameTab?a("classList",{attrs:{control:t.control,mainUrls:t.mainUrls,in_or_out:!0,filter:!1,getCameraList:t.getCameraList,playVedio:t.playVedio,gotoDetailVedio:t.gotoDetailVedio,cancelPlayInList:t.cancelPlayInList},on:{changeMainUrls:t.updateMainUrls}}):t._e()],1)],1)],1)])])},pt=[],ht=(a("96db"),a("af86"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{placeholder:"搜索关键字"},on:{change:function(){t.itemIndex=1,t.getCameraList()}},model:{value:t.keyWord1,callback:function(e){t.keyWord1=e},expression:"keyWord1"}},[a("template",{slot:"append"},[a("el-button",{on:{click:function(){t.itemIndex=1,t.getCameraList()}}},[t._v("搜索")])],1)],2),a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.mainUrls.filter((function(t){return""!=t.ip})),height:"500"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"55"}}),a("el-table-column",{attrs:{prop:"title",label:"教室名称",width:"100"}}),a("el-table-column",{attrs:{label:"是否轮播",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.playing?"播放中":"--"))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.ip?a("el-button",{on:{click:function(){return t.playVedio(e.row,e.$index)}}},[t._v("播放")]):t._e(),""!=e.row.ip?a("el-button",{on:{click:function(){return t.gotoDetailVedio(e.row,e.$index)}}},[t._v("控制")]):t._e(),""!=e.row.ip?a("el-button",{on:{click:function(){return t.cancelPlayInList(e.row,e.$index)}}},[t._v("移除")]):t._e()]}}])})],1),a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","page-size":t.control.panelNum*t.control.panelNum*10,"page-sizes":[t.control.panelNum*t.control.panelNum*10],"current-page":t.itemIndex,total:t.total},on:{"current-change":t.onloadData}})],1)}),vt=[],gt=(a("77ad"),{data:function(){var t=window.localStorage.getItem("cancelList"),e=[];try{e=JSON.parse(t)||[]}catch(a){e=[]}return{playIndex:0,intervalId:-1,mainUrls:[],total:0,itemIndex:1,cancelList:e}},props:{filter:{type:Boolean,default:!1},hasTeacher:{type:Boolean,default:!1},system:{type:String,default:""},in_or_out:{type:Boolean,default:!1},keyWord1:{type:String,default:""},state:{type:Object,default:function(){return{hasTeacher:!1,system:"SystemOn"}}},control:{type:Object,default:function(){return{panelNum:1}}},playVedio:{type:Function,default:function(){return function(){}}},gotoDetailVedio:{type:Function,default:function(){return function(){}}}},mounted:function(){console.log("xxxxxxxxxxx"),this.getCameraList({keyword:this.keyWord1,in_or_out:this.in_or_out,filter:this.filter,hasTeacher:this.hasTeacher,system:this.system}),this.loopPlay()},computed:{minSize:function(){return this.control.panelNum*this.control.panelNum},pureMainUrl:function(){return this.mainUrls.filter((function(t){return""!=t.ip}))}},methods:{cancelPlayInList:function(t,e){if(console.log(t,e,this.in_or_out),this.in_or_out){var a=this.cancelList.indexOf(t.ClassId);this.cancelList=[].concat(Object(N["a"])(this.cancelList.slice(0,a)),Object(N["a"])(this.cancelList.slice(a+1)))}else this.cancelList.push(t.ClassId);window.localStorage.setItem("cancelList",JSON.stringify(this.cancelList)),this.onloadData(this.itemIndex)},onloadData:function(t){this.itemIndex=t,this.getCameraList({keyword:this.keyWord1,in_or_out:this.in_or_out,filter:this.filter,hasTeacher:this.hasTeacher,system:this.system})},loopPlay:function(){var t=this;this.intervalId=setInterval((function(){if(t.playIndex<t.pureMainUrl.length-t.minSize){for(var e=t.playIndex;e<t.playIndex+t.minSize;e++)t.mainUrls[e].playing=!1;t.playIndex+=t.minSize;for(var a=t.playIndex;a<t.playIndex+t.minSize;a++)t.mainUrls[a].playing=!0;t.$emit("changeMainUrls",t.mainUrls.slice(t.playIndex,t.playIndex+t.minSize))}else{console.log("轮播下一页");var s=Math.floor(t.total/(10*t.minSize)+.5);t.itemIndex+=1,s<t.itemIndex&&(t.itemIndex=1),t.getCameraList({keyword:t.keyWord1,in_or_out:t.in_or_out,filter:t.filter,hasTeacher:t.hasTeacher,system:t.system})}t.$forceUpdate()}),5e4)},getCameraList:function(){var t=this,e=this.keyWord1,a=this.in_or_out,s=this.filter,i=this.hasTeacher,l=this.system,n="/Services/GetOrganisationData.asmx/GetCameraDetailsByUser";return axios.post(n,{data:{pageSize:10*this.minSize,pageIndex:this.itemIndex,filter:s,state:{hasTeacher:i,system:l},keyword:e,in_or_out:a,classids:this.cancelList}}).then((function(e){var a,s,i=e.data;t.control.width=$("#player").width()+"px",t.control.height=$("#player").width()/4*3+"px",t.mainUrls=[],null===i||void 0===i||null===(a=i.d)||void 0===a||a.value.map((function(e,a){t.mainUrls[a]=Object(o["a"])({title:e.ClassName,ClassId:e.ClassId,ip:e.CamTeacherIp,port:e.CamPort,userName:e.CamLoginId,pwd:e.CamPassword,playing:!1,status:"-"},e)}));for(var l=t.mainUrls.length;l<10*t.minSize;l++)t.mainUrls[l]={ip:"",title:"-"};t.total=null===i||void 0===i||null===(s=i.d)||void 0===s?void 0:s.totalRows,t.playIndex=0;for(var n=t.playIndex;n<t.minSize;n++)t.mainUrls[n].playing=!0;t.$emit("changeMainUrls",t.mainUrls.slice(t.playIndex,t.playIndex+t.minSize)),t.$forceUpdate()}))}},destroyed:function(){console.log("清除定时器"),clearInterval(this.intervalId)}}),bt=gt,Ct=Object(u["a"])(bt,ht,vt,!1,null,null,null),yt=Ct.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hkplayerBox",style:[{width:t.width,height:t.height}]},[a("div",{staticClass:"plugin",style:[{width:t.width,height:t.height}],attrs:{id:t.id}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("input",{staticClass:"btn btnLU",attrs:{type:"button",value:"左上"},on:{clcik:function(e){return t.mouseDownPTZControl(5)}}}),a("input",{staticClass:"btn btnU",attrs:{type:"button",value:"上"},on:{click:function(e){return t.mouseDownPTZControl(1)}}}),a("input",{staticClass:"btn btnRU",attrs:{type:"button",value:"右上"},on:{click:function(e){return t.mouseDownPTZControl(7)}}}),a("input",{staticClass:"btn btnL",attrs:{type:"button",value:"左"},on:{click:function(e){return t.mouseDownPTZControl(3)}}}),a("input",{staticClass:"btn btnAuto",attrs:{type:"button",value:"自动"},on:{click:function(e){return t.mouseDownPTZControl(9)}}}),a("input",{staticClass:"btn btnR",attrs:{type:"button",value:"右"},on:{click:function(e){return t.mouseDownPTZControl(4)}}}),a("input",{staticClass:"btn btnLD",attrs:{type:"button",value:"左下"},on:{click:function(e){return t.mouseDownPTZControl(6)}}}),a("input",{staticClass:"btn btnD",attrs:{type:"button",value:"下"},on:{click:function(e){return t.mouseDownPTZControl(2)}}}),a("input",{staticClass:"btn btnRD",attrs:{type:"button",value:"右下"},on:{click:function(e){return t.mouseDownPTZControl(8)}}}),a("input",{staticClass:"btn btnKeyUp",attrs:{type:"button",value:"STOP"},on:{click:function(e){return t.mouseUpPTZControl()}}}),a("input",{staticClass:"btn btnZoomDown",attrs:{type:"button",value:"变倍-"},on:{click:function(e){return t.PTZZoomout()}}}),a("input",{staticClass:"btn btnZoomUp",attrs:{type:"button",value:"变倍+"},on:{click:function(e){return t.PTZZoomIn()}}}),a("input",{staticClass:"btn btnZoomStop",attrs:{type:"button",value:"变倍stop"},on:{click:function(e){return t.PTZZoomStop()}}}),a("input",{staticClass:"btn btnFoucusDown",attrs:{type:"button",value:"变焦-"},on:{click:function(e){return t.PTZFocusOut()}}}),a("input",{staticClass:"btn btnFoucusUp",attrs:{type:"button",value:"变焦+"},on:{click:function(e){return t.PTZFocusIn()}}}),a("input",{staticClass:"btn btnFoucusStop",attrs:{type:"button",value:"变焦stop"},on:{click:function(e){return t.PTZFocusStop()}}})])])},xt=[],St=(a("513c"),0);window.g_iWndIndex=St;var wt=!1,kt={data:function(){return{oSel:{},iPTZSpeed:4}},props:{id:{type:String,default:""},width:{type:String,default:""},height:{type:String,default:""},size:{type:Number,default:4},deviceList:{type:Array,default:function(){return[]}}},watch:{size:function(t){WebVideoCtrl.I_ChangeWndNum(t)},deviceList:function(){this.connnectPlay()}},mounted:function(){var t=this;this.initHKPlugin().then((function(){t.connnectPlay()}))},methods:{clickLogout:function(t){var e="";if(""!=t){var a=WebVideoCtrl.I_Logout(t);0==a?(e="退出成功！",this.getChannelInfo({ip:t})):e="退出失败！",this.showOPInfo(t+" "+e)}},play:function(t,e){var a=this;this.clickStopRealPlay(e),t.ip&&this.clickLogin(t).then((function(){console.log(t,e,"update item click"),a.clickStartRealPlay(t,e)}))},connnectPlay:function(){var t=this;this.deviceList.map((function(e,a){t.clickStopRealPlay(a),e.ip&&t.clickLogin(e).then((function(){t.clickStartRealPlay(e,a)}))}))},clickStopRealPlay:function(t){var e=WebVideoCtrl.I_GetWindowStatus(t),a="";if(null!=e){var s=WebVideoCtrl.I_Stop(t);a=0==s?"停止预览成功！":"停止预览失败！",this.showOPInfo(e.szIP+" "+a,e,"")}},PTZFocusIn:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(12,!1,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 聚焦+成功！")},error:function(){t.showOPInfo(e.szIP+"  聚焦+失败！")}})},PTZFocusOut:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(13,!1,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 聚焦-成功！")},error:function(){t.showOPInfo(e.szIP+"  聚焦-失败！")}})},PTZFocusStop:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(12,!0,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 聚焦停止成功！")},error:function(){t.showOPInfo(e.szIP+"  聚焦停止失败！")}})},PTZZoomIn:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(10,!1,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 调焦+成功！")},error:function(){t.showOPInfo(e.szIP+"  调焦+失败！")}})},PTZZoomout:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(11,!1,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 调焦-成功！")},error:function(){t.showOPInfo(e.szIP+"  调焦-失败！")}})},PTZZoomStop:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus(St);null!=e&&WebVideoCtrl.I_PTZControl(11,!0,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 调焦停止成功！")},error:function(){t.showOPInfo(e.szIP+"  调焦停止失败！")}})},mouseDownPTZControl:function(t){var e=this,a=WebVideoCtrl.I_GetWindowStatus(St),s=!1,i=this.iPTZSpeed,l=!1;s||null!=a&&(9==t&&wt?(i=0,l=!0):(wt=!1,l=!1),WebVideoCtrl.I_PTZControl(t,l,{iPTZSpeed:i,iWndIndex:St,success:function(){9==t&&(wt=!wt),e.showOPInfo(a.szIP+" 开启云台成功！")},error:function(){e.showOPInfo(a.szIP+" 开启云台失败！")}}))},mouseUpPTZControl:function(){var t=this,e=WebVideoCtrl.I_GetWindowStatus();null!=e&&WebVideoCtrl.I_PTZControl(1,!0,{iWndIndex:St,success:function(){t.showOPInfo(e.szIP+" 停止云台成功！")},error:function(){t.showOPInfo(e.szIP+" 停止云台失败！")}})},showCBInfo:function(t){console.log("视频日志1",t)},showOPInfo:function(t){console.log("视频日志2",t)},clickStartRealPlay:function(t,e){var a=this;return new Promise((function(s,i){var l,n;if(console.log("!this.oSel[item.ip]?.id",a.oSel,t,!(null===(l=a.oSel[t.ip])||void 0===l?void 0:l.id)),null===(n=a.oSel[t.ip])||void 0===n?void 0:n.id){var r=WebVideoCtrl.I_GetWindowStatus(e),o=t.ip,c=2,d=a.oSel[t.ip].id,u=!1,m="";if(""!=o){null!=r&&WebVideoCtrl.I_Stop(),console.log(e,"窗口",o,a.oSel,o,c,d,u);var f=WebVideoCtrl.I_StartRealPlay(o,{iWndIndex:e,iStreamType:c,iChannelID:d,bZeroChannel:u});a.showOPInfo(o+" "+m),0==f?(m="开始预览成功！",s()):m="开始预览失败！"}else i()}}))},getChannelInfo:function(t){var e=this,a=t.ip;return new Promise((function(t,s){var i=a,l=0;e.oSel=Object(o["a"])({},e.oSel),""==i&&s(),Promise.all([new Promise((function(t){WebVideoCtrl.I_GetAnalogChannelInfo(i,{async:!1,success:function(a){var s=$(a).find("VideoInputChannel");l=s.length,$.each(s,(function(t,a){var s=parseInt($(a).find("id").eq(0).text(),10),l=$(a).find("name").eq(0).text();""==l&&(l="Camera "+(s<9?"0"+s:s)),e.oSel[i]={id:s,name:l}})),e.showOPInfo(i+" 获取模拟通道成功！"),t()},error:function(){e.showOPInfo(i+" 获取模拟通道失败！"),t()}})})),new Promise((function(t){WebVideoCtrl.I_GetDigitalChannelInfo(i,{async:!1,success:function(a){var s=$(a).find("InputProxyChannelStatus");$.each(s,(function(t,a){var s=parseInt($(a).find("id").eq(0).text(),10),n=$(a).find("name").eq(0).text(),r=$(a).find("online").eq(0).text();if("false"==r)return!0;""==n&&(n="IPCamera "+(s-l<9?"0"+(s-l):s-l)),e.oSel[i]={id:s,name:n}})),e.showOPInfo(i+" 获取数字通道成功！"),t()},error:function(){t()}})})),new Promise((function(t){WebVideoCtrl.I_GetZeroChannelInfo(i,{async:!1,success:function(a){var s=$(a).find("ZeroVideoChannel");$.each(s,(function(t,a){var s=parseInt($(a).find("id").eq(0).text(),10),l=$(a).find("name").eq(0).text();""==l&&(l="Zero Channel "+(s<9?"0"+s:s)),"true"==$(a).find("enabled").eq(0).text()&&(e.oSel[i]={id:s,name:l})})),e.showOPInfo(i+" 获取零通道成功！"),t()},error:function(){t()}})}))]).then((function(){console.log("通道===",e.oSel),t()}))}))},clickLogin:function(t){var e=this;return new Promise((function(a,s){var i=t.ip,l=t.port,n=t.userName,r=t.pwd;""!=i&&""!=l||s(new Error("ip和端口不能为空")),e.showOPInfo(i+" 登录！",l);var o=WebVideoCtrl.I_Login(i,1,l,n,r,{success:function(){e.showOPInfo(i+" 登录成功！"),setTimeout((function(){e.getChannelInfo(t).then((function(){a()}))}),10)},error:function(){e.showOPInfo(i+" 登录失败！")}});-1==o?(e.showOPInfo(i+" 已登录过！"),a()):e.showOPInfo(i+"等待登录结果",o)}))},initHKPlugin:function(){var t=this;return new Promise((function(e,a){-1==WebVideoCtrl.I_CheckPluginInstall()&&(ELEMENT.Message("您还未安装过插件，双击开发包目录里的WebComponents.exe安装！"),a()),WebVideoCtrl.I_InitPlugin(t.width.replace("px",""),t.height.replace("px",""),{iWndowType:3,cbSelWnd:function(a){St=$(a).find("SelectWnd").eq(0).text(),t.showCBInfo("插件初始化成功,"+St),e()}}),WebVideoCtrl.I_InsertOBJECTPlugin(t.id),WebVideoCtrl.I_ChangeWndNum(t.size),console.log(-1==WebVideoCtrl.I_CheckPluginVersion(),"是否是最新插件"),$(window).bind({resize:function(){console.log("窗口发生变化")}})}))}}},jt=kt,Tt=(a("b753"),Object(u["a"])(jt,_t,xt,!1,null,"2bdf973e",null)),It=Tt.exports,Ot=null,Dt={data:function(){return{activeNameTab:"全部",itemIndex:1,mainUrls:[],cancelList:[],keyWord1:"",curVedioNum:1,vedioHeight:800,StrategyLocation:{},initStrategyLocation:[],list:{selectItemsUnworked:[],buildingClassTabs:[],buildingClass:[]},control:{width:0,height:0,panelNum:1}}},components:{classList:yt,hikvisionPlayerMutil:It},mounted:function(){this.changeVideoNum(2),this.initClassrooms();var t=Object(M["a"])({cb_broadcastMessage:function(t){var e=t.name,a=t.message,s=t.from;console.log(e,a,s)}});Ot=t.chat},methods:{updateMainUrls:function(t){this.mainUrls=t},doAction:function(t){switch(console.log("name",t),t){case"up":$(".btn.btnU").click();break;case"down":$(".btn.btnD").click();break;case"left":$(".btn.btnL").click();break;case"right":$(".btn.btnR").click();break;case"auto":$(".btn.btnAuto").click();break;case"zoom+":$(".btn.btnZoomUp").click();break;case"zoom-":$(".btn.btnZoomDown").click();break;case"focus+":$(".btn.btnFoucusUp").click();break;case"focus-":$(".btn.btnFoucusDown").click();break}-1!==["focus-","focus+"].indexOf(t)&&setTimeout((function(){$(".btn.btnFoucusStop").click()}),200),-1!==["zoom-","zoom+"].indexOf(t)&&setTimeout((function(){$(".btn.btnZoomStop").click()}),200),-1!==["up","down","left","right"].indexOf(t)&&setTimeout((function(){$(".btn.btnKeyUp").click()}),200)},shutdownSystem:function(){console.log(this.list.selectItemsUnworked,"list.selectItemsUnworked"),this.list.selectItemsUnworked.map((function(t){Ot.server.sendControlKeys(t.CCMac,"SystemOffWeb",JSON.stringify(Object(o["a"])({},E.a.get())))}))},gotoDetailVedio:function(t,e){console.log(t,e,"goto detail"),window.location.href="./home.html#equipmentmenu/showclassdetail/".concat(t.ClassId),window.location.reload()},getVedioIndex:function(t,e,a){var s=(e-1)*this.control.panelNum+a-1;return s},playVedio:function(t,e){this.$refs["hikvisionPlayerMutil"].play(t,e)},getCameraDetails:function(t){var e="/Services/GetOrganisationData.asmx/GetCameraByClassId";return axios.post(e,{id:t}).then((function(t){return t.data.d.value}))},initClassrooms:function(){var t=this;return Object(v["b"])().then((function(e){return Promise.all(e.map((function(t){return Object(v["c"])(t.value).then((function(e){var a=0;return e&&(e=e.map((function(t){return t.ClassNames?a<t.ClassNames.length&&(t.ClassNames=t.ClassNames.map((function(t){return t.status=!1,t})),a=t.ClassNames.length):a=0,t.status=!1,t}))),{status:!1,buildingInfo:t,floorClassInfo:e||[],maxClassrooNum:a}}))}))).then((function(e){t.list.buildingClass=e,t.filterBuildings({location:t.initStrategyLocation,buildings:t.list.buildingClass})})).catch((function(){t.list.buildingClass=[]}))}))},filterBuildings:function(t){var e=t.location,a=t.buildings;for(var s in this.list.buildingClassTabs=[],a){var i,n=_.map(_.flatten(_.map(a[s].floorClassInfo,"ClassNames")),"Id"),r=Object(l["a"])(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(-1!==n.indexOf(o)){this.list.buildingClassTabs.push(a[s]);break}}}catch(c){r.e(c)}finally{r.f()}}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo,s=[];a.map((function(t){t.ClassNames&&t.ClassNames.map((function(t){t.status&&s.push(t.Id)}))})),this.StrategyLocation[e.value]=s},changeVideoNum:function(t){var e=this;this.curVedioNum=1,this.control.panelNum=t,console.log(this.control.panelNum),this.$nextTick((function(){e.vedioHeight=.75*$(".coldiv").width()}))}}},At=Dt,Pt=(a("12c1"),Object(u["a"])(At,ft,pt,!1,null,"5b88077e",null)),Nt=Pt.exports,$t={data:function(){return{detailItme:{},subBody:"deviceControl"}},components:{deviceControl:z,showclassdetail:mt,videoLoop:Nt},mounted:function(){},created:function(){var t=window.location.hash.substr(1).split("/");3==t.length&&(this.subBody=t[1],this.detailItme={RowNum:"",ClassName:"",Floor:"",ClassId:parseInt(t[2]),CCEquipIP:"",MacAddress:"",ScheduleId:"",CourseId:"",CourseName:"",message:{InstructionStatus:"",WorkStatus:"",PcStatus:"",ProjectorStatus:"",Screen:"",Curtain:"",LightStatus:"",MediaSignal:"",IsSystemLock:"",IsClassLock:"",IsPodiumLock:"",Temperature:"0",Humidity:"0",Volume:0,Mic1Volume:"",Mic2Volume:"",Voltage:"",Power:"0"}})},methods:{updateSubbody:function(t){var e=t.action,a=t.item;switch(this.detailItme=a,this.subBody=e,e){case"showclassdetail":window.location.href="./home.html#equipmentmenu/showclassdetail/".concat(a.ClassId);break;case"deviceControl":window.location.href="./home.html#equipmentmenu/deviceControl";break}}}},Lt=$t,Et=(a("a1bf"),Object(u["a"])(Lt,O,D,!1,null,"a955bc92",null)),Mt=Et.exports,Bt=a("e634"),Ut=a("5d9f"),Wt=a("4682"),Vt=a("f224"),Ft=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-cog"}),t._v(" 运维管理 ")]),a("div",{staticClass:"float-left ml-4 nav_page JCHANNAV",staticStyle:{"margin-top":"33px"}},[a("div",{staticClass:"jbtn JCHANMENU JURL TEST active",staticStyle:{display:"none"},attrs:{id:"operatesubmenu1","j-page-href":"window/p-operate/001-1.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-operate-01.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-filter"}),t._v(" 故障管理 "),a("i",{staticClass:"jdown fa fa-caret-down"})]),a("div",{staticClass:"jbtn JCHANMENU JURL TEST",staticStyle:{display:"none"},attrs:{id:"operatesubmenu2","j-page-href":"window/p-operate/002-1.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-operate-02.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-wrench"}),t._v(" 维修管理 "),a("i",{staticClass:"jdown fa fa-caret-down"})]),a("div",{staticClass:"jbtn JCHANMENU JURL TEST",staticStyle:{display:"none"},attrs:{id:"operatesubmenu3","j-page-href":"window/p-operate/003-1.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-operate-03.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-repeat"}),t._v(" 巡检管理 "),a("i",{staticClass:"jdown fa fa-caret-down"})]),a("div",{staticClass:"jbtn JCHANMENU JURL TEST",staticStyle:{display:"none"},attrs:{id:"operatesubmenu4","j-page-href":"window/p-operate/004-1.html","j-page-box":"#sec_box","j-menu-href":"window/menus/m-operate-04.html","j-menu-box":"#jpagetitle"}},[a("i",{staticClass:"fa fa-paint-brush"}),t._v(" 维保管理 "),a("i",{staticClass:"jdown fa fa-caret-down"})])]),a("div",{staticClass:"stat-card col-12 float-left"},[a("div",{staticClass:"bar01",attrs:{id:"jpagetitle"}}),a("div",{staticClass:"sec_box",attrs:{id:"sec_box"}})])])}],zt={data:function(){return{titleComponents:"",bodyComponents:""}},mounted:function(){this.initPage()},methods:{initPage:function(){$("#sec_box").loadPageScript("window/p-operate/001-1.html"),$("#jpagetitle").loadPageScript("window/menus/m-operate-01.html"),this.initEvent()},initEvent:function(){$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserSubMenu",data:JSON.stringify({subMenuType:"operatesubmenu"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var e=t.d.SubMenu,a=e.join(",");-1!=a.indexOf("operatesubmenu1")&&$("#operatesubmenu1").attr("style","display:block"),-1!=a.indexOf("operatesubmenu2")&&$("#operatesubmenu2").attr("style","display:block"),-1!=a.indexOf("operatesubmenu3")&&$("#operatesubmenu3").attr("style","display:block"),-1!=a.indexOf("operatesubmenu4")&&$("#operatesubmenu4").attr("style","display:block")}})}}},Jt=zt,qt=Object(u["a"])(Jt,Ft,Rt,!1,null,null,null),Gt=qt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._m(1),a("div",{staticClass:"stat-card2 col-12 float-left"},[a("div",{staticClass:"sec_box"},[a("div",{staticClass:"row col-12 no-gutters"},[t._m(2),a("div",{staticClass:"col-7"},[t._m(3),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"700px"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{property:"UserId",label:"用户ID"}}),a("el-table-column",{attrs:{property:"UserName",label:"用户名"}}),a("el-table-column",{attrs:{property:"BuildingName",label:"教学楼栋"}}),a("el-table-column",{attrs:{property:"ClassName",label:"课室"}}),a("el-table-column",{attrs:{property:"ActionCn",label:"操作名称"}}),a("el-table-column",{attrs:{property:"ActionTime",label:"时间"}})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:t.TotalRows},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1)])])])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-book"}),t._v(" 日志管理 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox bar01 float-right",staticStyle:{width:"600px","border-bottom":"none","padding-top":"40px","padding-right":"0"}},[a("div",{staticClass:"float-right",staticStyle:{width:"auto"}},[a("div",{staticClass:"searchbox2"},[a("div",{staticClass:"name"},[t._v("请选择查询方式")]),a("div",{staticClass:"list"},[a("div",{staticClass:"option",attrs:{"drop-target":"DROP-01"}},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按用户名")])]),a("div",{staticClass:"option",attrs:{"drop-target":"DROP-02"}},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按动作")])]),a("div",{staticClass:"option",attrs:{"drop-target":"DROP-03"}},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按教学楼")])]),a("div",{staticClass:"option",attrs:{"drop-target":"DROP-04"}},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按日期")])])])]),a("a",{staticClass:"jbtn_sm text-center searchbox2 bg_green"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-5"},[a("h6",{staticClass:"black my-4"},[a("i",{staticClass:"fa fa-pie-chart mr-2"}),t._v("日志总览 ")]),a("div",{staticClass:"col-10 align-self-center"},[a("div",{staticClass:"mt-3",staticStyle:{width:"100%",height:"300px"},attrs:{id:"myChart06"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"black my-4"},[a("i",{staticClass:"fa fa-pie-chart mr-2"}),t._v("日志明细 ")])}],Zt={data:function(){return{myChart:null,tableData:[],TotalRows:0,datalist:[],pageSize:100,currentPage:1}},mounted:function(){this.getUserLogDetails()},methods:{onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){this.getUserLogDetails(this.pageSize,t)},getUserLogDetails:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;$.ajax({type:"POST",url:"../Services/UserLogs.asmx/GetUserLogDetails",data:JSON.stringify({data:{pageIndex:a,pageSize:e}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.pageIndex=a,t.tableData=e.d.value.map((function(t){return t.ActionCn=v["a"][t.Action]?v["a"][t.Action]:t.Action||"--",t})),t.TotalRows=e.d.TotalRows,t.getLogGraphData()}})},getLogGraphData:function(){var t=this;$.ajax({type:"POST",url:"../Services/UserLogs.asmx/GetLogGraphData",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=e.d.value,s=[],i=[];for(var l in t.datalist=[],a){var n=v["a"][l]?v["a"][l]:l||"--";s.push(n),i.push(a[l]),t.datalist.push({value:parseFloat(a[l]),name:"".concat(n," ").concat(a[l],"/").concat(t.TotalRows)})}t.datalist=_.sortBy(t.datalist,"value"),t.datalist=t.datalist.reverse();var r=$("#myChart06").width();$("#myChart06").css("height",r),t.myChart=echarts.init(document.getElementById("myChart06"));var o={legend:{type:"scroll",orient:"vertical",left:10,data:t.datalist.map((function(t){return"".concat(t.name)}))},series:[{type:"pie",radius:["40%","56%"],center:["70%","50%"],data:t.datalist,label:{show:!1,position:"center"},labelLine:{show:!1},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}}}]};t.myChart.setOption(o)}})}}},Qt=Zt,Kt=Object(u["a"])(Qt,Ht,Yt,!1,null,null,null),Xt=Kt.exports,te={data:function(){return{SchoolInfo:{SchoolEngName:"",SchoolName:"",LogoLocation:""},isExtend:"true"==window.localStorage.getItem("isExtend"),subPageComp:"",topHeight:$("#top_menu").height(),loading:{mainPage:!1},menuList:[{id:"homemenu",title:"主页",fa:"fa-home",href:"homemenu",isApp:!0},{id:"machinetopmenu",title:"设备管理",fa:"fa-sliders",href:"equipmentmenu",isApp:!0},{id:"coursetopmenu",title:"课程管理",fa:"fa-calendar",href:"courseapp",isApp:!0},{id:"strategytopmenu",title:"策略管理",fa:"fa-paper-plane",href:"strategyapp",isApp:!0},{id:"operationtopmenu",title:"运维管理",fa:"fa-briefcase",href:"operateapp",isApp:!0},{id:"basicdatatopmenu",title:"基础数据",fa:"fa-database",href:"dataapp",isApp:!0},{id:"systemsettingtopmenu",title:"系统设置",fa:"fa-cog",href:"settingsyapp",isApp:!0},{id:"logstopmenu",title:"日志管理",fa:"fa-book",href:"logapp",isApp:!0}]}},components:{buildtree:f,topMenu:x,homemenu:I,equipmentmenu:Mt,dataapp:Bt["a"],strategyapp:Ut["a"],operateapp:Gt,logapp:Xt,settingsyapp:Wt["a"],courseapp:Vt["a"]},watch:{isExtend:function(t){window.localStorage.setItem("isExtend",t)}},mounted:function(){var t=this;window.sessionStorage.getItem("lastURL")?this.loadPage(window.sessionStorage.getItem("lastURL")):(this.subPageComp="homemenu",console.log("加载系统首页")),this.topHeight=$("#top_menu").height(),$("window").on("resize",(function(){t.topHeight=$("#top_menu").height()})),window.onhashchange=this.locationHashChanged,this.getSchooLInfo()},methods:{getSchooLInfo:function(){var t=this;axios.post("../Services/SystemSetting.asmx/GetSchoolInfo",{}).then((function(e){var a=e.data.d.SchoolInfo;console.log(a,"xxxxxx"),t.SchoolInfo=a}))},locationHashChanged:function(){console.log(location.hash,0xa1b01d4b1c7);var t=window.location.hash.substr(1).split("/");t[0]&&(this.subPageComp=t[0])},getMenuItemByUrl:function(t){var e,a=Object(l["a"])(this.menuList);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(s.href===t)return s}}catch(i){a.e(i)}finally{a.f()}return null},loadPage:function(t){var e=this;this.loading.mainPage=!0,this.$nextTick((function(){var a=e.getMenuItemByUrl(t);a.isApp?(e.subPageComp=t,e.loading.mainPage=!1):$("#main_box").loadPageScript(t,(function(){console.log("page loading ok"),e.loading.mainPage=!1}))}))},updatePage:function(t){console.log(t,1111111111),t.isApp?(window.sessionStorage.setItem("lastURL",t.href),window.location.href="./home.html#"+t.href,this.subPageComp=t.href,this.loading.mainPage=!1):(this.subPageComp="",this.loadPage(t.href))}}},ee=te,ae=(a("0f4b"),Object(u["a"])(ee,s,i,!1,null,"2535ea6a",null)),se=ae.exports;Vue.config.productionTip=!0,Vue.use(ELEMENT,{size:"small",zIndex:3e3}),window.CSJ,window.tempData={},new Vue({el:"#homebody",render:function(t){return t(se)}})},d2c2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAB7klEQVRYR9WX/VHbQBDF91UQU0HsCnAqiFNB9iqAVBCoIFBB6CBOBbeuINCB6QAqSKjgMavBHnE+SWdLIGdn9NdJt7/bj3crqGoEoDKikbxECOGfiHwYkcNdr6CqSwBnY4KQ/OYg5wB+jQxy4iATAH9HBFnFGBUOEEIwEfk6BoynxcyWFUhDeh5Jzs3Mi7m3qeoVgB/pRiRP3McGJJeeKmTe3iIy6Uly7d8D+JPscx9jnFdrm4VMeu5ijIsQAntCCMnwAuKH2prrh5ndvAJJ00PywcxmIYS1iJz2gSH5RUQWaWpIzszsIQXZSU+M0QXvVkQ+vwHINi2vQHLd44UEYNm3o3IHqqdlB0RV5wA8ApXkN4V03+hkQO5JLuoduS3WzeaqOhURf9y8Pi5ybbcHzGOMceqHrHXfOpWFHZDUwQBXQNV9XeAlIF7taf937VtfPw4QktdmdtVF3hmRl246WNSOCWSrnm1RKY2Iq9/HrvDm1l0CzMwlodVKQQ5W12MCqa75QSKiqjcAvndtllt3VS35ruilpqGmxMHQIC7zP0scJ+8UidnOpdfkSFUPVdfjACH528zOSyLZWiN+EwNw/fCZ1Sf9vYyk/7wtST6Zmd/kjdYKMsR0tvFM8lMbzHuCtCrsfwMy2B9gfWLPFcozTxMag7g4LjoAAAAASUVORK5CYII="},d5da:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 row stat-card no-gutters overflow-hidden border-white jtab-comp",class:["status-"+t.isOnLine]},[a("div",{class:["bg_gray2 pt-3 float-left j-eqm-tabs",t.isMin?"":"col-4"],staticStyle:{height:"154px"}},[a("div",{staticClass:"ml-3"},[a("label",[a("input",{attrs:{type:"checkbox",name:"classipAddress",mac:t.item.MacAddress},domProps:{value:t.item.CCEquipIP}}),a("i",{staticClass:"fa fa-check jcheckbox mr-2"})]),a("a",{on:{click:function(e){return t.$emit("update",{action:"showclassdetail",item:t.item})}}},[t._v(" "+t._s(t.curBuilding.name)+" "),a("div",{staticClass:"ml-3 pl-2 mb-2 float-left col-12 p-0 jfont22"},[1==t.isOnLine?a("span",{staticClass:"j-status-light light-grey mr-2 status-dot",staticStyle:{display:"inline-block"},attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:"该教室有设备故障"}}):2==t.isOnLine?a("span",{staticClass:"j-status-light light-green mr-2 status-dot",staticStyle:{display:"inline-block"},attrs:{"data-toggle":"tooltip","data-placement":"bottom"}}):a("span",{staticClass:"j-status-light light-orange mr-2 status-dot",staticStyle:{display:"inline-block"},attrs:{"data-toggle":"tooltip","data-placement":"bottom"}}),t._v(" "+t._s(t.item.ClassName)+" ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMin,expression:"!isMin"}],staticClass:"mt-3 ml-3 row clearfix col-12 p-0"},[a("span",{staticClass:"jf-12 font-weight-normal",staticStyle:{display:"none"}},[a("label",[a("input",{staticClass:"j-single ipaddressclassname",attrs:{type:"checkbox"},domProps:{checked:"Closed"!=t.item.message.WorkStatus,value:t.item.MacAddress}}),t._m(0)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMin,expression:"!isMin"}],staticClass:"jtab-2"},[t._m(1),t._m(2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMin,expression:"!isMin"}],staticClass:"col-8 row pt-3 float-left"},[a("div",{staticClass:"row jtab-box-2",staticStyle:{"margin-left":"5%",display:"flex",width:"100%"}},[a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 projectorclass deviceSymble",t.statusProjectorPower?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-lg align-middle my-2",staticStyle:{width:"20px",height:"12px"}},[a("svg",{staticClass:"fa fill-gray",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 12"}},[a("g",[a("circle",{staticClass:"cls-1",attrs:{cx:"5.96",cy:"5.35",r:"1.95"}}),a("path",{attrs:{d:"M17.42,1.2H9.3a5.26,5.26,0,0,0-6.69,0H1.19A1.19,1.19,0,0,0,0,2.39V8.31A1.19,1.19,0,0,0,1.19,9.5H2.61a5.26,5.26,0,0,0,6.69,0h8.12a1.19,1.19,0,0,0,1.19-1.19V2.39A1.2,1.2,0,0,0,17.42,1.2ZM6,9.17A3.82,3.82,0,1,1,9.77,5.35,3.82,3.82,0,0,1,6,9.17ZM16,7.84h-3.1a1,1,0,1,1,0-2H16a1,1,0,0,1,0,2Zm0-3h-3.1a1,1,0,0,1,0-2H16a1,1,0,0,1,0,2Z"}})])])]),a("div",{staticClass:"align-middle mb-1"},[t._v("投影")])])]),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 computerclass deviceSymble",t.statusComputerPower?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-desktop fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("电脑")])])]),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 volumeclass deviceSymble",t.statusVolume?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-volume-up fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("音响")])])]),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 curtainclassicon deviceSymble",""!==t.item.message.Screen&&"Down"===t.item.message.Screen?"j-eqm-green":"Up"===t.item.message.Screen?"j-eqm-gray":"j-eqm-yellow"]},[a("i",{staticClass:"fa fa-lg align-middle my-2",staticStyle:{width:"20px",height:"12px"}},[a("svg",{staticClass:"icon fill-gray",attrs:{t:"1610501197422",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1615",width:"20",height:"20"}},[a("path",{attrs:{d:"M288 288h448v268.8H288z","p-id":"1616"}}),a("path",{attrs:{d:"M825.6 153.6H153.6v89.6h44.8V601.6H153.6v44.8h313.6V704c-25.6 16-44.8 44.8-44.8 76.8 0 48 41.6 89.6 89.6 89.6 48 0 89.6-41.6 89.6-89.6 0-32-19.2-60.8-44.8-76.8v-57.6h313.6v-44.8h-44.8V243.2h44.8V153.6h-44.8z m-313.6 672c-25.6 0-44.8-19.2-44.8-44.8 0-25.6 19.2-44.8 44.8-44.8 25.6 0 44.8 19.2 44.8 44.8 0 25.6-19.2 44.8-44.8 44.8z m268.8-224H243.2V243.2h537.6v358.4z","p-id":"1617"}})])]),a("div",{staticClass:"align-middle mb-1"},[t._v("幕布")])])]),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 signalclass deviceSymble",t.item.message.MediaSignal?"j-eqm-blue":"j-eqm-gray",t.getIconMediaSign(t.item.message.MediaSignal)]},[a("i",{staticClass:"fa fa-signal fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},["Laptop"==t.item.message.MediaSignal?[t._v("笔记本")]:"Desktop"==t.item.message.MediaSignal?[t._v("电脑")]:"DigitalBooth"==t.item.message.MediaSignal?[t._v("HDMI")]:"DigitalEquipment"==t.item.message.MediaSignal?[t._v("数字设备")]:[t._v("信号源")]],2)])]),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 systemlockclass deviceSymble","True"===t.item.message.IsSystemLock?1!==t.isOnLine?"j-eqm-red":"j-eqm-gray":1!==t.isOnLine?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-lg align-middle systemlockclassfa my-2",class:["True"===t.item.message.IsSystemLock?"fa-lock":"fa-unlock-alt"]}),a("div",{staticClass:"align-middle mb-1"},[t._v("面板锁")])])])]),a("div",{staticClass:"row jtab-box-2",staticStyle:{"margin-left":"5%",display:"none"}},[a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 lightclass1 deviceSymble","On"==t.item.message.LightStatus?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-lightbulb-o fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("课室灯光")])])]),t._m(3),t._m(4),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{class:["col-12 podiumlightclass deviceSymble","On"==t.item.message.LightStatus?"j-eqm-green":"j-eqm-gray"]},[a("i",{staticClass:"fa fa-lightbulb-o fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("讲台灯光")])])]),t._m(5),a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{staticClass:"col-12 j-eqm-gray freshairclass deviceSymble"},[a("i",{staticClass:"fa align-middle my-2"},[a("svg",{staticClass:"svg-2 fill-gray",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.56 16.81"}},[a("g",[a("path",{attrs:{d:"M15,7.2H0v-2H15a1.6,1.6,0,1,0-1.6-1.6h-2A3.6,3.6,0,1,1,15,7.2Z"}}),a("rect",{staticClass:"cls-1",attrs:{y:"10",width:"17.55",height:"2"}}),a("rect",{staticClass:"cls-1",attrs:{y:"14.81",width:"17.55",height:"2"}})])])]),a("div",{staticClass:"align-middle mb-1"},[t._v("新风系统")])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"jswift",staticStyle:{width:"60px"}},[a("i",{staticClass:"jswift-btn"}),a("i",{staticClass:"on"}),a("i",{staticClass:"off"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabbox-2 active",attrs:{"jtab-order":"0"}},[t._v(" 教 "),a("br"),t._v("辅 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabbox-2",attrs:{"jtab-order":"1"}},[t._v(" 环 "),a("br"),t._v("境 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{staticClass:"col-12 j-eqm-gray deviceSymble classroomcurtainsclass"},[a("i",{staticClass:"fa fa-columns fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("课室窗帘")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{staticClass:"col-12 j-eqm-gray deviceSymble acclass"},[a("i",{staticClass:"fa fa-snowflake-o fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("空调")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 pb-3 text-center"},[a("div",{staticClass:"col-12 j-eqm-gray podiumcurtainclass deviceSymble"},[a("i",{staticClass:"fa fa-columns fa-lg align-middle my-2"}),a("div",{staticClass:"align-middle mb-1"},[t._v("讲台窗帘")])])])}],l={props:{item:{type:Object,default:function(){return{}}},curBuilding:{type:Object,default:function(){return{}}},isMin:{type:Boolean,default:!1}},computed:{isOnLine:function(){var t=this.item;return t.message&&!t.message["WirelessMicVolume"]?1:t.message&&("Closed"!==t.message.WorkStatus&&"Closing"!==t.message.WorkStatus||!("On"===t.message.PcStatus||"On"===t.message.ProjectorStatus||"Down"===t.message.Screen||t.message.Power>0))?"Closed"===t.message.WorkStatus||"Closing"===t.message.WorkStatus?4:2:3},statusProjectorPower:function(){return 1===this.isOnLine||4===this.isOnLine?"On"===this.item.message.ProjectorStatus&&"On"==this.item.message.ProjectorPowerStatus:"On"===this.item.message.ProjectorStatus},statusComputerPower:function(){return 1===this.isOnLine||4===this.isOnLine?"On"===this.item.message.PcStatus&&"On"==this.item.message.ComputerPowerStatus:"On"===this.item.message.PcStatus},statusVolume:function(){return 1===this.isOnLine||4===this.isOnLine?"On"==this.item.message.AmplifierPowerStatus:"0"!=this.item.message.Volume&&"0"!=this.item.message.WirelessMicVolume&&"0"!=this.item.message.WiredMicVolume}},methods:{getIconMediaSign:function(t){switch(t){case"desktop":return"fa-desktop";case"laptop":case"hdmi":return"fa-laptop";default:return"fa-signal"}}}},n=l,r=(a("6c3b"),a("9ca4")),o=Object(r["a"])(n,s,i,!1,null,"40bbf3b2",null);e["a"]=o.exports},df7c:function(t,e,a){},e078:function(t,e,a){var s={"./col2.png":"508d","./col3.png":"6810","./dev.png":"6f3f","./electFun.png":"a332","./keyboarding.png":"0b86","./keyboardingNo.png":"3563","./loginbg.png":"570f","./logo.png":"9d64","./mouseNo.png":"5a00","./mouseing.png":"4868","./newElectFun.png":"8ed0","./teachNo.png":"d2c2","./teaching.png":"92f8"};function i(t){var e=l(t);return a(e)}function l(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=l,t.exports=i,i.id="e078"},e2d1:function(t,e,a){"use strict";var s=a("ec4b"),i=a.n(s);i.a},e634:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContainer"},[t._m(0),a("div",{staticClass:"float-left ml-4 nav_page JCHANNAV vuepage",staticStyle:{"margin-top":"33px"}},t._l(t.menuList,(function(e,s){return a("div",{key:s,staticClass:"jbtn JCHANMENU JURL TEST",class:{active:t.curPage===e.num},on:{click:function(a){return t.loadPage(e)}}},[a("i",{class:[e.fa,"fa"]}),t._v(" "+t._s(e.title)),a("i",{staticClass:"jdown fa fa-caret-down"})])})),0),a("div",{staticClass:"stat-card2 col-12 float-left",staticStyle:{display:"block"}},[a("keep-alive",[a(t.curCompent,{tag:"component"})],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-database"}),t._v(" 基础数据 ")])}],l=(a("2eeb"),a("e35a"),a("5e9f"),a("7b5f")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userList"},[a("div",{staticClass:"bar01"},[a("div",{attrs:{id:"m-data-02"}},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"jbtn2 bg_blue",on:{click:t.openForm}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加数据 ")]),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" Excel数据导入 ")]),a("a",{staticClass:"jbtn2 bg_red",on:{click:function(e){return t.removeBatch(t.multipleSelection)}}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 批量删除 ")])]),t._m(1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1)],1)]),a("div",{staticClass:"sec_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","max-height":t.maxHeight},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"行号"}}),a("el-table-column",{attrs:{prop:"UserName",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"LoginID",label:"登录名",width:"120"}}),a("el-table-column",{attrs:{prop:"PersonType",label:"人员类型",width:"120"}}),a("el-table-column",{attrs:{prop:"PersonnelStatus",label:"人员状态",width:"120"}}),a("el-table-column",{attrs:{prop:"Phone",label:"电话号码",width:"120"}}),a("el-table-column",{attrs:{prop:"Notes",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.LoginID?a("div",[a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(a){return t.editUserData(e.row)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"JURL jbtn_xs hover_orange",on:{click:function(a){return t.editAuthData(e.row)}}},[a("i",{staticClass:"fa fa-cog"})]),a("a",{staticClass:"JURL jbtn_xs hover_red",on:{click:function(a){return t.removeBatch([e.row])}}},[a("i",{staticClass:"fa fa-trash"})])]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}}),a("el-dialog",{attrs:{title:(t.tempData?"编辑":"新增")+"人员",visible:t.visible.isShowFormUser,width:"35%"},on:{"update:visible":function(e){return t.$set(t.visible,"isShowFormUser",e)}}},[a("el-form",{ref:"formUser",attrs:{rules:t.rules.formUser,model:t.form.formUser,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"人员名称",prop:"userName"}},[a("el-input",{model:{value:t.form.formUser.userName,callback:function(e){t.$set(t.form.formUser,"userName",e)},expression:"form.formUser.userName"}})],1),a("el-form-item",{attrs:{label:"登录账户",prop:"loginId"}},[a("el-input",{model:{value:t.form.formUser.loginId,callback:function(e){t.$set(t.form.formUser,"loginId",e)},expression:"form.formUser.loginId"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.formUser.password,callback:function(e){t.$set(t.form.formUser,"password",e)},expression:"form.formUser.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.formUser.rePassword,callback:function(e){t.$set(t.form.formUser,"rePassword",e)},expression:"form.formUser.rePassword"}})],1),a("el-form-item",{attrs:{label:"人员类型",prop:"personType"}},[a("el-select",{attrs:{placeholder:"活动区域"},model:{value:t.form.formUser.personType,callback:function(e){t.$set(t.form.formUser,"personType",e)},expression:"form.formUser.personType"}},[a("el-option",{attrs:{label:"长期",value:"longterm"}}),a("el-option",{attrs:{label:"临时",value:"temporary"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"temporary"==t.form.formUser.personType,expression:"form.formUser.personType == 'temporary'"}],attrs:{label:"有效期",prop:"expireDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd hh:mm",format:"yyyy-MM-dd hh:mm",placeholder:"选择日期"},model:{value:t.form.formUser.expireDate,callback:function(e){t.$set(t.form.formUser,"expireDate",e)},expression:"form.formUser.expireDate"}})],1),a("el-form-item",{attrs:{label:"人员状态",prop:"personnelStatus"}},[a("el-select",{attrs:{placeholder:"活动区域"},model:{value:t.form.formUser.personnelStatus,callback:function(e){t.$set(t.form.formUser,"personnelStatus",e)},expression:"form.formUser.personnelStatus"}},[a("el-option",{attrs:{label:"激活",value:"激活"}}),a("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"notes"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.formUser.notes,callback:function(e){t.$set(t.form.formUser,"notes",e)},expression:"form.formUser.notes"}})],1),a("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[a("el-input",{model:{value:t.form.formUser.phone,callback:function(e){t.$set(t.form.formUser,"phone",e)},expression:"form.formUser.phone"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFormUser}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveFormUser}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.userAuth.UserName+"权限配置",visible:t.visible.isShowUserAuthCfg,width:"35%"},on:{"update:visible":function(e){return t.$set(t.visible,"isShowUserAuthCfg",e)}}},[t.visible.isShowUserAuthCfg?a("UserAuthCfg",{attrs:{userAuth:t.userAuth},on:{close:function(e){t.visible.isShowUserAuthCfg=!1}}}):t._e()],1)],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-users mr-1"}),t._v("用户数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],o=(a("b4fb"),a("56ea"),a("dbb3"),a("232a")),c=a("6c6d"),d=a("82ae"),u=a.n(d),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"授权管理",name:"menu"}},[a("menuTree",{model:{value:t.menuData,callback:function(e){t.menuData=e},expression:"menuData"}})],1),a("el-tab-pane",{attrs:{label:"授权范围",name:"class"}},[a("selectClassroomTabs",{attrs:{width:"100%",initData:t.initStrategyLocation,buildingClasses:t.list.buildingClassTabs,allBuildClasses:t.list.buildingClass},on:{change:t.udpateClassroomStatus}})],1)],1),a("div",{staticClass:"btns btns_auto border-top w-100"},[a("el-button",{attrs:{type:"primary"},on:{click:t.SaveUserAuthentication}},[t._v("确定")]),a("el-button",{on:{click:function(){return t.$emit("close")}}},[t._v("取消")])],1)],1)},f=[],p=(a("ecb4"),a("9302"),a("e18c"),a("96db"),a("af86"),a("19d5")),h=a("8c1b"),v=a("fe4a"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"buildingTree",staticStyle:{margin:"0.5rem 0rem"},attrs:{data:t.dataTree,"show-checkbox":"","default-expand-all":"","node-key":"value","default-checked-keys":t.checkData,"filter-node-method":t.filterNode,props:t.defaultProps},on:{"check-change":t.updateCheck}})],1)},b=[],C={data:function(){return{filterText:"",dataTree:[{label:"设备管理 ",value:"-1000",children:[{label:" 设备管理",value:"17",name:"authenticationmenu"}]},{label:"课程管理 ",value:"-2000",children:[{label:"课程表",value:"8",name:"authenticationmenu"},{label:" 调课申请",value:"9",name:"authenticationmenu"},{label:" 预约申请",value:"10",name:"authenticationmenu"},{label:" 调课审批",value:"30",name:"authenticationmenu"},{label:" 预约审批",value:"31",name:"authenticationmenu"}]},{label:"策略管理 ",value:"-3000",children:[{label:" 策略管理",value:"26",name:"authenticationmenu"},{label:" 策略关键词设置",value:"27",name:"authenticationmenu"}]},{label:"运维管理 ",value:"-4000",children:[{label:" 故障管理",value:"19",name:"authenticationmenu"},{label:" 维修管理",value:"20",name:"authenticationmenu"},{label:" 巡检管理",value:"21",name:"authenticationmenu"},{label:" 维保管理",value:"22",name:"authenticationmenu"}]},{label:" 基础数据 ",value:"-5000",children:[{label:" 组织机构数据",value:"11",name:"authenticationmenu"},{label:" 用户数据",value:"12",name:"authenticationmenu"},{label:" 教室数据",value:"13",name:"authenticationmenu"},{label:" 教师数据",value:"14",name:"authenticationmenu"},{label:" 学生数据",value:"15",name:"authenticationmenu"},{label:" 运维数据",value:"16",name:"authenticationmenu"}]},{label:"系统设置 ",value:"-6000",children:[{label:" 常规设置",value:"23",name:"authenticationmenu"},{label:" 控制设备设置",value:"24",name:"authenticationmenu"},{label:" 录播设备设置",value:"25",name:"authenticationmenu"}]},{label:" 日志管理 ",value:"-7000",children:[{label:" 日志管理",value:"18",name:"authenticationmenu"}]}],defaultProps:{children:"children",label:"label"}}},model:{prop:"checkData",event:"change"},props:{checkData:{type:Array,default:function(){return[]}}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},mounted:function(){console.log(this.$props,"checkData")},methods:{updateCheck:function(){this.$emit("change",this.$refs.tree.getCheckedKeys())},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)}}},y=C,x=(a("fe37"),a("9ca4")),S=Object(x["a"])(y,g,b,!1,null,"8e77cc90",null),w=S.exports,k={data:function(){return{activeName:"menu",menuData:[],curUserName:sessionStorage.getItem("userName"),StrategyLocation:{},initStrategyLocation:[],list:{buildingClassTabs:[],buildingClass:[]}}},components:{menuTree:w,selectClassroomTabs:v["a"]},props:["userAuth"],mounted:function(){var t=this;this.initClassrooms(),$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserLocationPermissions",data:JSON.stringify({userid:this.userAuth.LoginID}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=e.d.ClassNameList;console.log(a,"-------------"),t.initStrategyLocation=a}}),$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserPermissions",data:JSON.stringify({userid:this.userAuth.LoginID}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=e.d.SubMenuId;t.menuData=a}})},methods:{getLocationsInfoList:function(){var t=[];for(var e in this.StrategyLocation)t=[].concat(Object(o["a"])(t),Object(o["a"])(this.StrategyLocation[e]));return t},initClassrooms:function(){var t=this;return Object(h["b"])().then((function(e){return Promise.all(e.map((function(t){return Object(h["c"])(t.value).then((function(e){var a=0;return e&&(e=e.map((function(t){return t.ClassNames?a<t.ClassNames.length&&(t.ClassNames=t.ClassNames.map((function(t){return t.status=!1,t})),a=t.ClassNames.length):a=0,t.status=!1,t}))),{status:!1,buildingInfo:t,floorClassInfo:e||[],maxClassrooNum:a}}))}))).then((function(e){t.list.buildingClass=e,t.buildingClassTabs=t.filterBuildings({location:t.initStrategyLocation,buildings:t.list.buildingClass})})).catch((function(){t.list.buildingClass=[]}))}))},filterBuildings:function(t){var e=t.location,a=t.buildings;for(var s in this.list.buildingClassTabs=[],a){var i,l=_.map(_.flatten(_.map(a[s].floorClassInfo,"ClassNames")),"Id"),n=Object(p["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==l.indexOf(r)){this.list.buildingClassTabs.push(a[s]);break}}}catch(o){n.e(o)}finally{n.f()}}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo,s=[];a.map((function(t){t.ClassNames.map((function(t){t.status&&s.push(t.Id)}))})),this.StrategyLocation[e.value]=s},SaveUserAuthentication:function(){var t=this.menuData.filter((function(t){return parseFloat(t)>0}));0!=t.length&&"{}"!=JSON.stringify(this.StrategyLocation)?$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/SaveUserAuthentications",data:JSON.stringify({data:{personId:this.userAuth.LoginID,AuthMenu:t.join(","),classNames:this.getLocationsInfoList().join(",")}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){alert("配置成功！")},error:function(){alert("配置失败！")}}):alert("请添加菜单权限和权限范围")}}},j=k,T=Object(x["a"])(j,m,f,!1,null,null,null),I=T.exports,O={data:function(){var t=this,e=function(e,a,s){""===a?s(new Error("请再次输入密码")):t.form.formUser.rePassword!==t.form.formUser.password?s(new Error("两次输入密码不一致!")):s()},a=function(e,a,s){console.log(a,"---------",t.form.formUser.personType),"temporary"!==t.form.formUser.personType||a?s():s(new Error("必填!"))};return{CurUser:sessionStorage.getItem("LoginId"),fileList:[],dialogVisible:!1,currentPage:1,pageSize:50,total:0,maxHeight:600,tableData:[],multipleSelection:[],form:{formUser:{loginId:"",userName:"",personType:"",departmentName:"",personnelStatus:"",phone:"",notes:"",password:"",rePassword:"",expireDate:"",expireTime:""}},rules:{formUser:{loginId:[{required:!0,message:"必填",trigger:"blur"}],userName:[{required:!0,message:"必填",trigger:"blur"}],departmentName:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"},{message:"密码/确认密码不一致",trigger:"blur",validator:e}],rePassword:[{message:"密码/确认密码不一致",trigger:"blur",validator:e}],expireDate:[{message:"必填",trigger:"blur",validator:a}],expireTime:[{message:"必填",trigger:"blur",validator:a}]}},tempData:{},userAuth:{},visible:{isShowFormUser:!1,isShowUserAuthCfg:!1},buildingList:[]}},components:{UserAuthCfg:I},mounted:function(){this.initData()},methods:{editAuthData:function(t){this.userAuth=t,this.visible.isShowUserAuthCfg=!0},editUserData:function(t){var e=this;this.openForm().then((function(){console.log("编辑build数据",t);var a=e.tempData=t,s=a.DepartmentId,i=a.ExpireTime,l=a.LoginID,n=a.Notes,r=a.Password,o=a.PersonType,c=a.PersonnelStatus,d=a.Phone,u=a.UserName,m=a.ValidityDate;m=moment(m)._d,e.form.formUser={departmentName:s,expireDate:m,loginId:l,password:r,personType:o,personnelStatus:c,notes:n,phone:d,userName:u,expireTime:i},e.visible.isShowFormUser=!0}))},openForm:function(){var t=this;return $.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.form.formUser={loginId:"",userName:"",personType:"",departmentName:"",personnelStatus:"",phone:"",notes:"",password:"",expireDate:[moment().format("YYYY-MM-DD HH:mm"),moment().add(3,"days").format("YYYY-MM-DD HH:mm")],expireTime:""},"success"===e.d.status&&(t.tempData=null,t.buildingList=e.d.value,t.visible.isShowFormUser=!0)}})},cancelFormUser:function(){this.visible.isShowFormUser=!1,this.form.formUser={loginId:"",userName:"",personType:"",departmentName:"",personnelStatus:"",phone:"",notes:"",password:"",expireDate:"",expireTime:""}},saveFormUser:function(){var t=this;this.$refs["formUser"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.tempData&&t.tempData.LoginID){var a=t.form.formUser,s=a.departmentName,i=a.loginId,l=a.notes,n=a.password,r=a.personType,o=a.personnelStatus,d=a.phone,u=a.userName;console.log(t.form.formUser),$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateUserData",data:JSON.stringify({data:{departmentId:s,departmentName:s,loginId:i,notes:l,password:n,personType:r,personnelStatus:o,phone:d,userName:u,startDate:"temporary"==o?t.form.formUser.expireDate[0]:"2020-10-01 01:10",expireDate:"temporary"==o?t.form.formUser.expireDate[1]:"2020-10-01 01:12"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){setTimeout(t.initData(),1e3),t.cancelFormUser()}})}else $.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/AddUserData",data:JSON.stringify({data:Object(c["a"])(Object(c["a"])({},t.form.formUser),{},{departmenid:t.form.formUser.departmentName,startDate:t.form.formUser.expireDate[0],expireDate:t.form.formUser.expireDate[1]})}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){setTimeout(t.initData(),1e3),t.cancelFormUser()}})}))},handleSelectionChange:function(t){this.multipleSelection=t},removeBatch:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return $.ajax({type:"POST",url:"/Services/DeleteOrgData.asmx/DeleteMultipleUser",data:JSON.stringify({data:t.filter((function(t){return t.LoginID})).map((function(t){return t.LoginID}))}),contentType:"application/json; charset=utf-8",dataType:"json"})})).then((function(){e.$message({type:"success",message:"删除成功!"}),setTimeout(e.initData(),1e3)})).catch((function(t){console.log(t,111111),e.$message({type:"info",message:"已取消删除"})}))},deleteItemData:function(t){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteUser",data:JSON.stringify({id:t.LoginID}),contentType:"application/json; charset=utf-8",dataType:"json"})},downloadTemplate:function(){window.open("/Uploads/ImportUserCSVTemplate.xlsx","_blank")},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetUserData",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.tableData=[].concat(Object(o["a"])(t.d.value),Object(o["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({}))),e.total=parseInt(t.d.totalRows)}})},initData:function(){this.onloadData(this.currentPage)},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadUserData"),["LoginID","UserName","PersonnelStatus","PersonType","Notes","Password","Phone","StartDate","ExpireDate"].map((function(t){a.append("FieldList",t)})),u.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.currentPage=1,e.onloadData(e.currentPage),t}))}}},D=O,A=Object(x["a"])(D,n,r,!1,null,null,null),P=A.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classList"},[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"jbtn2 bg_blue",on:{click:t.openClsroom}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加数据 ")]),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" Excel数据导入 ")]),a("a",{staticClass:"jbtn2 bg_red",on:{click:function(e){return t.removeBatch(t.multipleSelection)}}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 批量删除 ")])]),t._m(1)]),a("div",{staticClass:"sec_box",staticStyle:{width:"100%",display:"block"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.maxHeight,border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"行号"}}),a("el-table-column",{attrs:{prop:"Classname",label:"教室名称",width:"120"}}),a("el-table-column",{attrs:{prop:"Building",label:"教学楼栋",width:"120"}}),a("el-table-column",{attrs:{prop:"Floor",label:"楼层",width:"120"}}),a("el-table-column",{attrs:{prop:"Seat",label:"席位",width:"120"}}),a("el-table-column",{attrs:{prop:"Ccip",label:"中控设备",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.CCmac))]),a("p",[t._v("IP: "+t._s(e.row.Ccip))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.Ccip))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"CamipT",label:"摄像头（T）",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.CamTmac))]),a("p",[t._v("IP: "+t._s(e.row.CamipT))]),a("p",[t._v("用户名: "+t._s(e.row.Camuserid))]),a("p",[t._v("密码: "+t._s(e.row.Campass))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.CamipT))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"CamipS",label:"摄像头（S）",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.CamSmac))]),a("p",[t._v("IP: "+t._s(e.row.CamipS))]),a("p",[t._v("用户名: "+t._s(e.row.Camuserid))]),a("p",[t._v("密码: "+t._s(e.row.Campass))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.CamipS))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"DesktopIp",label:"台式机",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.Desktopmac))]),a("p",[t._v("IP: "+t._s(e.row.DesktopIp))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.DesktopIp))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"RecorderIp",label:"录播设备",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.Recordermac))]),a("p",[t._v("IP: "+t._s(e.row.RecorderIp))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.RecorderIp))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"CallHelpIP",label:"呼叫求助",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("MAC: "+t._s(e.row.CallHelpmac))]),a("p",[t._v("IP: "+t._s(e.row.CallHelpIP))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.CallHelpIP))])],1)])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.Classname?a("div",[a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(a){return t.editClsroomData(e.row)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"JURL jbtn_xs hover_red",on:{click:function(a){return t.removeBatch([e.row])}}},[a("i",{staticClass:"fa fa-trash"})])]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1),a("el-dialog",{attrs:{title:(t.tempData?"编辑":"新增")+"教室",visible:t.visible.isShowAddClassroom,width:"60%",center:""},on:{"update:visible":function(e){return t.$set(t.visible,"isShowAddClassroom",e)}}},[a("el-form",{ref:"formClassroom",attrs:{rules:t.rules.formClassroom,model:t.form.formClassroom,"label-width":"120px"}},[a("hr"),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("课室信息")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"教室名称",prop:"className"}},[t._v(" "+t._s(t.clsnamePrefix)+" "),a("el-input",{staticStyle:{width:"40%"},model:{value:t.form.formClassroom.className,callback:function(e){t.$set(t.form.formClassroom,"className",e)},expression:"form.formClassroom.className"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"教学楼栋",prop:"buildingName"}},[a("el-select",{attrs:{placeholder:"教学楼栋"},on:{change:t.updateFloorList},model:{value:t.form.formClassroom.buildingName,callback:function(e){t.$set(t.form.formClassroom,"buildingName",e)},expression:"form.formClassroom.buildingName"}},t._l(t.buildingList,(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{offset:3,span:10}},[a("el-form-item",{attrs:{label:"课室楼层",prop:"floor"}},[a("el-select",{attrs:{placeholder:"课堂楼层"},model:{value:t.form.formClassroom.floor,callback:function(e){t.$set(t.form.formClassroom,"floor",e)},expression:"form.formClassroom.floor"}},t._l(t.floorList,(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"课室席位",prop:"seat"}},[a("el-input-number",{attrs:{min:1},model:{value:t.form.formClassroom.seat,callback:function(e){t.$set(t.form.formClassroom,"seat",e)},expression:"form.formClassroom.seat"}})],1)],1)],1),a("hr"),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("摄像头信息")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"MAC(S)",prop:"camSmac"}},[a("el-input",{model:{value:t.form.formClassroom.camSmac,callback:function(e){t.$set(t.form.formClassroom,"camSmac",e)},expression:"form.formClassroom.camSmac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP(S)",prop:"camIpS"}},[a("el-input",{model:{value:t.form.formClassroom.camIpS,callback:function(e){t.$set(t.form.formClassroom,"camIpS",e)},expression:"form.formClassroom.camIpS"}})],1)],1),a("el-col",{attrs:{offset:3,span:10}},[a("el-form-item",{attrs:{label:"MAC(T)",prop:"camTmac"}},[a("el-input",{model:{value:t.form.formClassroom.camTmac,callback:function(e){t.$set(t.form.formClassroom,"camTmac",e)},expression:"form.formClassroom.camTmac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP(T)",prop:"camIpT"}},[a("el-input",{model:{value:t.form.formClassroom.camIpT,callback:function(e){t.$set(t.form.formClassroom,"camIpT",e)},expression:"form.formClassroom.camIpT"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{offset:3,span:10}},[a("el-form-item",{attrs:{label:"登录名",prop:"camId"}},[a("el-input",{model:{value:t.form.formClassroom.camId,callback:function(e){t.$set(t.form.formClassroom,"camId",e)},expression:"form.formClassroom.camId"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"密码",prop:"camPass"}},[a("el-input",{model:{value:t.form.formClassroom.camPass,callback:function(e){t.$set(t.form.formClassroom,"camPass",e)},expression:"form.formClassroom.camPass"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{offset:3,span:10}},[a("el-form-item",{attrs:{label:"端口",prop:"camPort"}},[a("el-input",{model:{value:t.form.formClassroom.camPort,callback:function(e){t.$set(t.form.formClassroom,"camPort",e)},expression:"form.formClassroom.camPort"}})],1)],1)],1),a("hr"),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("中控设备")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"MAC",prop:"centralControlMac"}},[a("el-input",{model:{value:t.form.formClassroom.centralControlMac,callback:function(e){t.$set(t.form.formClassroom,"centralControlMac",e)},expression:"form.formClassroom.centralControlMac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP",prop:"centralControlIp"}},[a("el-input",{model:{value:t.form.formClassroom.centralControlIp,callback:function(e){t.$set(t.form.formClassroom,"centralControlIp",e)},expression:"form.formClassroom.centralControlIp"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("录课设备")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"MAC",prop:"recorderMac"}},[a("el-input",{model:{value:t.form.formClassroom.recorderMac,callback:function(e){t.$set(t.form.formClassroom,"recorderMac",e)},expression:"form.formClassroom.recorderMac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP",prop:"recorderIp"}},[a("el-input",{model:{value:t.form.formClassroom.recorderIp,callback:function(e){t.$set(t.form.formClassroom,"recorderIp",e)},expression:"form.formClassroom.recorderIp"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("呼叫求助")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"MAC",prop:"callHelpMac"}},[a("el-input",{model:{value:t.form.formClassroom.callHelpMac,callback:function(e){t.$set(t.form.formClassroom,"callHelpMac",e)},expression:"form.formClassroom.callHelpMac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP",prop:"callHelpIp"}},[a("el-input",{model:{value:t.form.formClassroom.callHelpIp,callback:function(e){t.$set(t.form.formClassroom,"callHelpIp",e)},expression:"form.formClassroom.callHelpIp"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("label",{staticClass:"el-form-item__label",staticStyle:{float:"right"}},[t._v("台式电脑")])]),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"MAC",prop:"desktopMac"}},[a("el-input",{model:{value:t.form.formClassroom.desktopMac,callback:function(e){t.$set(t.form.formClassroom,"desktopMac",e)},expression:"form.formClassroom.desktopMac"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"IP",prop:"desktopIp"}},[a("el-input",{model:{value:t.form.formClassroom.desktopIp,callback:function(e){t.$set(t.form.formClassroom,"desktopIp",e)},expression:"form.formClassroom.desktopIp"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFormClsroom}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitFormClsroom}},[t._v("确 定")])],1)],1)],1)},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-calendar-check-o mr-1"}),t._v(" 教室数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],E={data:function(){return{fileList:[],dialogVisible:!1,currentPage:1,pageSize:50,total:0,maxHeight:600,tableData:[],multipleSelection:[],rules:{formClassroom:{className:[{required:!0,message:"必填",trigger:"blur"}],floor:[{required:!0,message:"必填",trigger:"blur"}],buildingName:[{required:!0,message:"必填",trigger:"blur"}],seat:[{required:!0,message:"必填",trigger:"blur"}],camIpS:[{required:!0,message:"必填",trigger:"blur"}],camIpT:[{required:!0,message:"必填",trigger:"blur"}],camSmac:[{required:!0,message:"必填",trigger:"blur"}],camTmac:[{required:!0,message:"必填",trigger:"blur"}],camPort:[{required:!0,message:"必填",trigger:"blur"}],camId:[{required:!0,message:"必填",trigger:"blur"}],camPass:[{required:!0,message:"必填",trigger:"blur"}],centralControlMac:[{required:!0,message:"必填",trigger:"blur"}],centralControlIp:[{required:!0,message:"必填",trigger:"blur"}],desktopIp:[{required:!0,message:"必填",trigger:"blur"}],desktopMac:[{required:!0,message:"必填",trigger:"blur"}]}},form:{formClassroom:{className:"",floor:"",buildingName:"",seat:50,camIpS:"",camIpT:"",camSmac:"",camTmac:"",camPort:"",camId:"",camPass:"",centralControlMac:"",centralControlIp:"",desktopIp:"",desktopMac:"",recorderIp:"",recorderMac:"",callHelpIp:"",callHelpMac:""}},floorList:[],buildingList:[],tempData:null,visible:{isShowAddClassroom:!1}}},computed:{clsnamePrefix:function(){return this.form.formClassroom.floor?this.getBuildByName(this.form.formClassroom.buildingName).label+"-"+this.getFloorByName(this.form.formClassroom.floor).label+"-":this.form.formClassroom.buildingName?this.getBuildByName(this.form.formClassroom.buildingName).label+"-[]":"[]-[]"}},mounted:function(){this.initData()},methods:{editClsroomData:function(t){var e=this;console.log(t,1);var a=this.tempData=t,s=a["Classname"],i=a["Building"],l=a["Floor"],n=a["Seat"],r=a["Ccip"],o=a["CamipS"],c=a["CamipT"],d=a["DesktopIp"],u=a["RecorderIp"],m=a["CCmac"],f=a["CamSmac"],h=a["CamTmac"],v=a["CamPort"],g=a["Camuserid"],b=a["Campass"],C=a["Desktopmac"],y=a["Recordermac"],_=a["CallHelpIP"],x=a["CallHelpmac"];this.form.formClassroom={className:s,floor:l,buildingName:i,seat:n,camIpS:o,camIpT:c,camSmac:f,camTmac:h,camPort:v,camId:g,camPass:b,centralControlMac:m,centralControlIp:r,desktopIp:d,desktopMac:C,recorderIp:u,recorderMac:y,callHelpIp:_,callHelpMac:x},this.openClsroom().then((function(){var t=e.getBuildByName(e.form.formClassroom.buildingName),a=e.form.formClassroom.floor;e.updateFloorList(t.value).then((function(){var t,s=Object(p["a"])(e.floorList);try{for(s.s();!(t=s.n()).done;){var i=t.value;console.log(i,e.form.formClassroom,a),i.label===a&&(e.form.formClassroom.floor=i.value)}}catch(l){s.e(l)}finally{s.f()}}))}))},getBuildByName:function(t){var e,a=Object(p["a"])(this.buildingList);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(s.label===t||s.value===t)return s}}catch(i){a.e(i)}finally{a.f()}return{}},getFloorByName:function(t){var e,a=Object(p["a"])(this.floorList);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(s.label===t||s.value===t)return s}}catch(i){a.e(i)}finally{a.f()}return{}},openClsroom:function(){var t=this;return $.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"success"===e.d.status&&(t.buildingList=e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}})),t.visible.isShowAddClassroom=!0)}})},updateFloorList:function(t){var e=this;return this.form.formClassroom.floor="",this.floorList=[],$.ajax({type:"POST",url:"../Services/GetOrganisationData.asmx/GetFloorlist",data:JSON.stringify({building:t}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.floorList=t.d.value.map((function(t){return{value:t.FloorId,label:t.FloorName}}))}})},cancelFormClsroom:function(){this.tempData=null,this.form.formClassroom={className:"",floor:"",buildingName:"",seat:50,camIpS:"",camIpT:"",camSmac:"",camTmac:"",camPort:"",camId:"",camPass:"",centralControlMac:"",centralControlIp:"",desktopIp:"",desktopMac:"",recorderIp:"",recorderMac:"",callHelpIp:"",callHelpMac:""},this.visible.isShowAddClassroom=!1},submitFormClsroom:function(){var t=this;this.$refs["formClassroom"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.tempData){var a=Object(c["a"])(Object(c["a"])({},t.form.formClassroom),{},{classID:t.tempData.Classid,building:t.getBuildByName(t.form.formClassroom.buildingName).value});$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateClassData",data:JSON.stringify({data:a}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){setTimeout(t.initData(),1e3),t.cancelFormClsroom(),window.CSJ.updateTree=Math.random()}))}else $.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/SaveClassData",data:JSON.stringify({data:Object(c["a"])(Object(c["a"])({},t.form.formClassroom),{},{building:t.getBuildByName(t.form.formClassroom.buildingName).value})}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){setTimeout(t.initData(),1e3),t.cancelFormClsroom(),window.CSJ.updateTree=Math.random()}})}))},handleSelectionChange:function(t){this.multipleSelection=t},removeBatch:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleClass",data:JSON.stringify({data:t.filter((function(t){return t.Classid})).map((function(t){return t.Classid}))}),contentType:"application/json; charset=utf-8",dataType:"json"})})).then((function(){e.$message({type:"success",message:"删除成功!"}),setTimeout(e.initData(),1e3)})).catch((function(t){console.log(t,111111),e.$message({type:"info",message:"已取消删除"})}))},deleteItemData:function(t){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteClass",data:JSON.stringify({id:t.Classid}),contentType:"application/json; charset=utf-8",dataType:"json"})},downloadTemplate:function(){window.open("/Uploads/ImportClassCSVTemplate.xlsx","_blank")},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetClassData",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.tableData=[].concat(Object(o["a"])(t.d.value),Object(o["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({}))),e.total=parseInt(t.d.totalRow)}})},initData:function(){this.onloadData(this.currentPage)},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadClassData"),["ClassName","TeachingBuilding","Floor","Seats","camipS","camipT","camSmac","camTmac","camport","camuserid","campass","CCEquipIP","ccmac","desktopip","deskmac","recordingEquip","recordermac","callhelpip","callhelpmac"].map((function(t){a.append("FieldList",t)})),u.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.onloadData(e.currentPage),t}))}}},M=E,B=(a("4f08"),Object(x["a"])(M,N,L,!1,null,null,null)),U=B.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teacherList"},[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"jbtn2 bg_blue",on:{click:t.openTeacher}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加数据 ")]),t._m(1),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" 批量导入 ")]),a("a",{staticClass:"jbtn2 bg_red",on:{click:function(e){return t.removeBatch(t.multipleSelection)}}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 批量删除 ")])]),t._m(2)]),a("div",{staticClass:"sec_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"600",border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"行号"}}),a("el-table-column",{attrs:{prop:"TeacherID",label:"教师工号",width:"120"}}),a("el-table-column",{attrs:{prop:"TeacherName",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"Gender",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"Age",label:"生日",width:"120"}}),a("el-table-column",{attrs:{prop:"DeptName",label:"院系",width:"120"}}),a("el-table-column",{attrs:{prop:"Phone",label:"电话",width:"120"}}),a("el-table-column",{attrs:{prop:"IdCard",label:"身份证",width:"120"}}),a("el-table-column",{attrs:{prop:"OneCard",label:"一卡通",width:"120"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.TeacherID?a("div",[a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(){return t.editTeacherData(e.row)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"JURL jbtn_xs hover_red",on:{click:function(){return t.removeBatch([e.row])}}},[a("i",{staticClass:"fa fa-trash"})]),a("a",{staticClass:"JURL",on:{click:function(){return t.sendCardTeacherData(e.row)}}},[a("i",{staticClass:"fa fa-share-square-o",attrs:{"aria-hidden":"true"}})])]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v(" 1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可 ")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1),a("el-dialog",{attrs:{title:(t.tempData?"编辑":"新增")+"教师",visible:t.visible.isShowAddTeacher,width:"40%",center:""},on:{"update:visible":function(e){return t.$set(t.visible,"isShowAddTeacher",e)}}},[a("el-form",{ref:"formTeacher",attrs:{rules:t.rules.formTeacher,model:t.form.formTeacher,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"教师工号",prop:"teacherId"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{readonly:!!t.tempData&&!!t.tempData.TeacherID},model:{value:t.form.formTeacher.teacherId,callback:function(e){t.$set(t.form.formTeacher,"teacherId",e)},expression:"form.formTeacher.teacherId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formTeacher.phone,callback:function(e){t.$set(t.form.formTeacher,"phone",e)},expression:"form.formTeacher.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"teacherName"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formTeacher.teacherName,callback:function(e){t.$set(t.form.formTeacher,"teacherName",e)},expression:"form.formTeacher.teacherName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formTeacher.idCard,callback:function(e){t.$set(t.form.formTeacher,"idCard",e)},expression:"form.formTeacher.idCard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{attrs:{placeholder:"教学楼栋"},model:{value:t.form.formTeacher.gender,callback:function(e){t.$set(t.form.formTeacher,"gender",e)},expression:"form.formTeacher.gender"}},t._l([{value:"男",label:"男"},{value:"女",label:"女"}],(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"一卡通",prop:"oneCard"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{readonly:""},model:{value:t.form.formTeacher.oneCard,callback:function(e){t.$set(t.form.formTeacher,"oneCard",e)},expression:"form.formTeacher.oneCard"}},[a("template",{slot:"append"},[a("el-button",[t._v("读取一卡通号")])],1)],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生日",prop:"Age"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date","value-format":"yyyy-MM-DD",placeholder:"选择日期"},model:{value:t.form.formTeacher.Age,callback:function(e){t.$set(t.form.formTeacher,"Age",e)},expression:"form.formTeacher.Age"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"院系",prop:"faculty"}},[a("el-select",{attrs:{placeholder:"院系"},model:{value:t.form.formTeacher.faculty,callback:function(e){t.$set(t.form.formTeacher,"faculty",e)},expression:"form.formTeacher.faculty"}},t._l(t.facultyList,(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFormTeacher}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitFormTeacher}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"一卡通数据下发",visible:t.visible.isShowSendCard,width:"40%",center:""},on:{"update:visible":function(e){return t.$set(t.visible,"isShowSendCard",e)}}},[a("el-form",{ref:"formSendCardTeacher",attrs:{rules:t.rules.formSendTeacher,model:t.form.formSendTeacher,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"教师工号",prop:"TeacherID"}},[t._v(" "+t._s(t.form.formSendTeacher.TeacherID)+" ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发卡方式",prop:"sendCardType"}},[a("el-radio-group",{model:{value:t.form.formSendTeacher.sendCardType,callback:function(e){t.$set(t.form.formSendTeacher,"sendCardType",e)},expression:"form.formSendTeacher.sendCardType"}},[a("el-radio",{attrs:{label:"按教室"}}),a("el-radio",{attrs:{label:"按课表"}}),a("el-radio",{attrs:{label:"全部"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"TeacherName"}},[t._v(" "+t._s(t.form.formSendTeacher.TeacherName)+" ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"一卡通号码",prop:"OneCard"}},[t._v(" "+t._s(t.form.formSendTeacher.OneCard)+" ")])],1)],1),a("h5",[a("i",{staticClass:"fa fa-th mr-1"}),t._v("发卡范围")]),"按教室"==t.form.formSendTeacher.sendCardType?a("div",{staticClass:"col-12 row jfont12 d-table",staticStyle:{"line-height":"24px"}},[a("selectClassroomTabs",{attrs:{initData:t.initStrategyLocation,buildingClasses:t.list.buildingClassTabs,allBuildClasses:t.list.buildingClass,width:"38vw"},on:{change:t.udpateClassroomStatus}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFormSendTeacher}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitFormSendTeacher}},[t._v("确 定")])],1)],1)],1)},V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-address-book-o mr-1"}),t._v(" 教师数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn2 bg_blue JURL show_jmodal",attrs:{"j-page-href":"window/alert/data/synchro.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-refresh"}),t._v(" 同步数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],F=(a("053b"),a("183d")),R=null,z={data:function(){return{StrategyLocation:{},initStrategyLocation:[],fileList:[],dialogVisible:!1,currentPage:1,pageSize:50,total:0,tableData:[],multipleSelection:[],facultyList:["经济与管理学院","机电工程学院","国土资源学院","材料与冶金学院"].map((function(t){return{value:t,label:t}})),rules:{formTeacher:{className:[{required:!0,message:"必填",trigger:"blur"}],teacherId:[{required:!0,message:"必填",trigger:"blur"}],teacherName:[{required:!0,message:"必填",trigger:"blur"}],gender:[{required:!0,message:"必填",trigger:"blur"}],Age:[{required:!0,message:"必填",trigger:"blur"}],faculty:[{required:!0,message:"必填",trigger:"blur"}],phone:[{required:!0,message:"必填",trigger:"blur"}],idCard:[{required:!0,message:"必填",trigger:"blur"}],oneCard:[{required:!0,message:"必填",trigger:"blur"}]},formSendTeacher:{OneCard:[{required:!0,message:"必填",trigger:"blur"}],sendCardType:[{required:!0,message:"必填",trigger:"blur"}],TeacherID:[{required:!0,message:"必填",trigger:"blur"}],TeacherName:[{required:!0,message:"必填",trigger:"blur"}]}},tempData:{},form:{formTeacher:{teacherId:"",teacherName:"",gender:"男",Age:"",faculty:"",phone:"",idCard:"",oneCard:""},formSendTeacher:{OneCard:"",TeacherID:"",TeacherName:"",sendCardType:"按教室"}},list:{buildingClassTabs:[],buildingClass:[]},visible:{isShowAddTeacher:!1,isShowSendCard:!1}}},components:{selectClassroomTabs:v["a"]},mounted:function(){this.initWebsocket(),this.initData(),this.initClassrooms()},methods:{initWebsocket:function(){var t=this,e=Object(F["a"])({cb_broadcastMessage:function(e){var a=e.name,s=e.message,i=e.from;console.log(a,s,i),""===a&&"broadcastMessage"===i&&(console.log(a,s,"broadcastMessage"),"Reader"===s.Command&&(t.form.formTeacher.oneCard=s.Data.CardValue),t.$forceUpdate())}});R=e.chat,console.log(R,111111)},initClassrooms:function(){var t=this;return Object(h["b"])().then((function(e){return Promise.all(e.map((function(t){return Object(h["c"])(t.value).then((function(e){var a=0;return e&&(e=e.map((function(t){return t.ClassNames?a<t.ClassNames.length&&(t.ClassNames=t.ClassNames.map((function(t){return t.status=!1,t})),a=t.ClassNames.length):a=0,t.status=!1,t}))),{status:!1,buildingInfo:t,floorClassInfo:e||[],maxClassrooNum:a}}))}))).then((function(e){t.list.buildingClass=e,t.buildingClassTabs=t.filterBuildings({location:t.initStrategyLocation,buildings:t.list.buildingClass})})).catch((function(){t.list.buildingClass=[]}))}))},filterBuildings:function(t){var e=t.location,a=t.buildings;for(var s in this.list.buildingClassTabs=[],a){var i,l=_.map(_.flatten(_.map(a[s].floorClassInfo,"ClassNames")),"Id"),n=Object(p["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==l.indexOf(r)){this.list.buildingClassTabs.push(a[s]);break}}}catch(o){n.e(o)}finally{n.f()}}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo,s=[];a.map((function(t){t.ClassNames.map((function(t){t.status&&s.push(t.Id)}))})),this.StrategyLocation[e.value]=s},cancelFormSendTeacher:function(){this.visible.isShowSendCard=!1},getLocationsInfoList:function(){var t=[];for(var e in this.StrategyLocation)t=[].concat(Object(o["a"])(t),Object(o["a"])(this.StrategyLocation[e]));return t.map((function(t){return parseInt(t)}))},submitFormSendTeacher:function(){var t=this,e=this.form.formSendTeacher.TeacherID,a=this.form.formSendTeacher.OneCard,s="按教室"===this.form.formSendTeacher.sendCardType?this.getLocationsInfoList():"*";$.ajax({type:"POST",url:"../Services/CardRegistration.asmx/RegisterCard",data:JSON.stringify({data:{teacherId:e,cardId:a,classids:s}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){t.$message({type:"success",message:"发卡成功!"}),t.cancelFormTeacher()}}),this.visible.isShowSendCard=!1},sendCardTeacherData:function(t){this.form.formSendTeacher=Object(c["a"])(Object(c["a"])({},t),{},{sendCardType:"按教室"}),this.visible.isShowSendCard=!0},openTeacher:function(){this.visible.isShowAddTeacher=!0},editTeacherData:function(t){console.log(t,1);var e=this.tempData=t,a=e.TeacherID,s=e.TeacherName,i=e.Gender,l=e.DeptName,n=e.Phone,r=e.Age,o=e.IdCard,c=e.OneCard;this.form.formTeacher={teacherId:a,teacherName:s,gender:i,faculty:l,phone:n,Age:r,idCard:o,oneCard:c},this.visible.isShowAddTeacher=!0},cancelFormTeacher:function(){this.tempData={},this.form.formTeacher={teacherId:"",teacherName:"",gender:"男",Age:"",faculty:"",phone:"",idCard:"",oneCard:""},this.visible.isShowAddTeacher=!1},submitFormTeacher:function(){var t=this;this.$refs["formTeacher"].validate((function(e){if(!e)return console.log("error submit!!",e,t.form.formTeacher),!1;if(t.tempData.TeacherID){var a=Object(c["a"])({},t.form.formTeacher);$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateTeacherData",data:JSON.stringify({data:a}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){setTimeout(t.initData(),1e3),t.cancelFormTeacher()}))}else $.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/SaveTeacherData",data:JSON.stringify({data:t.form.formTeacher}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){setTimeout(t.initData(),1e3),t.cancelFormTeacher()}})}))},handleSelectionChange:function(t){this.multipleSelection=t},removeBatch:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleTeacherData",data:JSON.stringify({data:t.filter((function(t){return t.TeacherID})).map((function(t){return t.TeacherID}))}),contentType:"application/json; charset=utf-8",dataType:"json"})})).then((function(){e.$message({type:"success",message:"删除成功!"}),setTimeout(e.initData(),1e3)})).catch((function(t){console.log(t,111111),e.$message({type:"info",message:"已取消删除"})}))},deleteItemData:function(t){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteTeacher",data:JSON.stringify({id:t.TeacherID}),contentType:"application/json; charset=utf-8",dataType:"json"})},downloadTemplate:function(){window.open("/Uploads/ImportTeacherCSVTemplate.xlsx","_blank")},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetTeacherData",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.total=parseInt(t.d.totalRows),e.tableData=[].concat(Object(o["a"])(t.d.value),Object(o["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({})))}})},initData:function(){this.onloadData(this.currentPage)},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadTeacherData"),["Teacherid","Teachername","Gender","Age","Faculty","Phone","Idcard","Onecard"].map((function(t){a.append("FieldList",t)})),u.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.currentPage=1,e.onloadData(e.currentPage),t}))}}},J=z,q=Object(x["a"])(J,W,V,!1,null,null,null),G=q.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teacherList"},[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"jbtn2 bg_blue",on:{click:t.openTeacher}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加数据 ")]),t._m(1),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" 批量导入 ")]),a("a",{staticClass:"jbtn2 bg_red",on:{click:function(e){return t.removeBatch(t.multipleSelection)}}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 批量删除 ")])]),t._m(2)]),a("div",{staticClass:"sec_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"600",border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"行号"}}),a("el-table-column",{attrs:{prop:"StudentID",label:"学生学号",width:"120"}}),a("el-table-column",{attrs:{prop:"StudentName",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"Gender",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"Age",label:"年龄",width:"120"}}),a("el-table-column",{attrs:{prop:"DeptName",label:"院系",width:"120"}}),a("el-table-column",{attrs:{prop:"Phone",label:"电话",width:"120"}}),a("el-table-column",{attrs:{prop:"IdCard",label:"身份证",width:"120"}}),a("el-table-column",{attrs:{prop:"OneCard",label:"一卡通",width:"120"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.StudentID?a("div",[a("a",{staticClass:"jbtn_xs hover_blue",on:{click:function(a){return t.editTeacherData(e.row)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("a",{staticClass:"JURL jbtn_xs hover_red",on:{click:function(a){return t.removeBatch([e.row])}}},[a("i",{staticClass:"fa fa-trash"})])]):t._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1),a("el-dialog",{attrs:{title:(t.tempData&&t.tempData.StudentID?"编辑":"新增")+"学生",visible:t.visible.isShowAddTeacher,width:"40%",center:""},on:{"update:visible":function(e){return t.$set(t.visible,"isShowAddTeacher",e)}}},[a("el-form",{ref:"formStudent",attrs:{rules:t.rules.formStudent,model:t.form.formStudent,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学生学号",prop:"studentId"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{readonly:!!t.tempData&&!!t.tempData.StudentID},model:{value:t.form.formStudent.studentId,callback:function(e){t.$set(t.form.formStudent,"studentId",e)},expression:"form.formStudent.studentId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formStudent.phone,callback:function(e){t.$set(t.form.formStudent,"phone",e)},expression:"form.formStudent.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"studentName"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formStudent.studentName,callback:function(e){t.$set(t.form.formStudent,"studentName",e)},expression:"form.formStudent.studentName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formStudent.idCard,callback:function(e){t.$set(t.form.formStudent,"idCard",e)},expression:"form.formStudent.idCard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{attrs:{placeholder:"教学楼栋"},model:{value:t.form.formStudent.gender,callback:function(e){t.$set(t.form.formStudent,"gender",e)},expression:"form.formStudent.gender"}},t._l([{value:"男",label:"男"},{value:"女",label:"女"}],(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"一卡通",prop:"oneCard"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.form.formStudent.oneCard,callback:function(e){t.$set(t.form.formStudent,"oneCard",e)},expression:"form.formStudent.oneCard"}},[a("template",{slot:"append"},[a("el-button",[t._v("读取一卡通号")])],1)],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生日",prop:"Age"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date","value-format":"yyyy-MM-DD",placeholder:"选择日期"},model:{value:t.form.formStudent.Age,callback:function(e){t.$set(t.form.formStudent,"Age",e)},expression:"form.formStudent.Age"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"院系",prop:"faculty"}},[a("el-select",{attrs:{placeholder:"院系"},model:{value:t.form.formStudent.faculty,callback:function(e){t.$set(t.form.formStudent,"faculty",e)},expression:"form.formStudent.faculty"}},t._l(t.facultyList,(function(t){var e=t.value,s=t.label;return a("el-option",{key:e,attrs:{label:s,value:e}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFormTeacher}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitFormTeacher}},[t._v("确 定")])],1)],1)],1)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-address-book-o mr-1"}),t._v(" 学生数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn2 bg_blue JURL show_jmodal",attrs:{"j-page-href":"window/alert/data/synchro.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-refresh"}),t._v(" 同步数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],Z={data:function(){return{fileList:[],dialogVisible:!1,currentPage:1,pageSize:50,total:0,tableData:[],multipleSelection:[],facultyList:["经济与管理学院","机电工程学院","国土资源学院","材料与冶金学院"].map((function(t){return{value:t,label:t}})),rules:{formStudent:{studentId:[{required:!0,message:"必填",trigger:"blur"}],studentName:[{required:!0,message:"必填",trigger:"blur"}],gender:[{required:!0,message:"必填",trigger:"blur"}],Age:[{required:!0,message:"必填",trigger:"blur"}],faculty:[{required:!0,message:"必填",trigger:"blur"}],phone:[{required:!0,message:"必填",trigger:"blur"}],idCard:[{required:!0,message:"必填",trigger:"blur"}],oneCard:[{required:!0,message:"必填",trigger:"blur"}]}},tempData:{},form:{formStudent:{studentId:"",studentName:"",gender:"男",Age:"",faculty:"",phone:"",idCard:"",oneCard:""}},visible:{isShowAddTeacher:!1}}},mounted:function(){this.initData()},methods:{openTeacher:function(){this.visible.isShowAddTeacher=!0},editTeacherData:function(t){console.log(t,1);var e=this.tempData=t,a=e["StudentID"],s=e["StudentName"],i=e["Gender"],l=e["DeptName"],n=e["Phone"],r=e["Age"],o=e["IdCard"],c=e["OneCard"];this.form.formStudent={studentId:a,studentName:s,gender:i,faculty:l,phone:n,Age:r,idCard:o,oneCard:c},this.visible.isShowAddTeacher=!0},cancelFormTeacher:function(){this.tempData={},this.form.formStudent={studentId:"",studentName:"",gender:"男",Age:"",faculty:"",phone:"",idCard:"",oneCard:""},this.visible.isShowAddTeacher=!1},submitFormTeacher:function(){var t=this;this.$refs["formStudent"].validate((function(e){if(!e)return console.log("error submit!!",e,t.form.formStudent),!1;if(t.tempData.StudentID){var a=Object(c["a"])({},t.form.formStudent);$.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/UpdateStudentData",data:JSON.stringify({data:a}),contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(){setTimeout(t.initData(),1e3),t.cancelFormTeacher()}))}else $.ajax({type:"POST",url:"../Services/SaveOrganisationData.asmx/SaveStudentData",data:JSON.stringify({data:t.form.formStudent}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){setTimeout(t.initData(),1e3),t.cancelFormTeacher()}})}))},handleSelectionChange:function(t){this.multipleSelection=t},removeBatch:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteMultipleStudentData",data:JSON.stringify({data:t.filter((function(t){return t.StudentID})).map((function(t){return t.StudentID}))}),contentType:"application/json; charset=utf-8",dataType:"json"})})).then((function(){e.$message({type:"success",message:"删除成功!"}),setTimeout(e.initData(),1e3)})).catch((function(t){console.log(t,111111),e.$message({type:"info",message:"已取消删除"})}))},deleteItemData:function(t){return $.ajax({type:"POST",url:"../Services/DeleteOrgData.asmx/DeleteStudent",data:JSON.stringify({id:t.StudentID}),contentType:"application/json; charset=utf-8",dataType:"json"})},downloadTemplate:function(){window.open("/Uploads/ImportStudentCSVTemplate.xlsx","_blank")},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetStudentData",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.tableData=[].concat(Object(o["a"])(t.d.value),Object(o["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({}))),e.total=parseInt(t.d.totalRows)}})},initData:function(){this.onloadData(this.currentPage)},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadStudentData"),["Studentid","Studentname","Gender","Age","Faculty","Phone","Idcard","Onecard"].map((function(t){a.append("FieldList",t)})),u.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.currentPage=1,e.onloadData(e.currentPage),t}))}}},Q=Z,K=Object(x["a"])(Q,H,Y,!1,null,null,null),X=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teacherList"},[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[t._m(1),t._m(2),t._m(3),a("a",{staticClass:"jbtn2 bg_blue",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-sign-in"}),t._v(" Excel数据导入 ")])]),t._m(4)]),a("div",{staticClass:"sec_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"600",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"行号"}}),a("el-table-column",{attrs:{prop:"Devicename",label:"设备名称",width:"120"}}),a("el-table-column",{attrs:{prop:"Assetno",label:"资产编号",width:"120"}}),a("el-table-column",{attrs:{prop:"Model",label:"型号",width:"120"}}),a("el-table-column",{attrs:{prop:"Spec",label:"规格",width:"120"}}),a("el-table-column",{attrs:{prop:"Devicetype",label:"设备类型",width:"120"}}),a("el-table-column",{attrs:{prop:"Price",label:"购置价",width:"120"}}),a("el-table-column",{attrs:{prop:"Factory",label:"厂家",width:"120"}}),a("el-table-column",{attrs:{prop:"Mfd",label:"出厂日期",width:"120"}}),a("el-table-column",{attrs:{prop:"Dopurchase",label:"购置日期",width:"120"}}),a("el-table-column",{attrs:{prop:"Dod",label:"交付使用日期",width:"120"}}),a("el-table-column",{attrs:{prop:"Warrantytime",label:"保质期",width:"120"}}),a("el-table-column",{attrs:{prop:"Locationtype",label:"位置类型",width:"120"}}),a("el-table-column",{attrs:{prop:"EquipStat",label:"设备状态",width:"120"}})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v("1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1)],1)},et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-book mr-1"}),t._v(" 运维数据")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn2 bg_blue JURL show_jmodal",attrs:{"j-page-href":"window/alert/data/distribute.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-random"}),t._v(" 分配")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn2 bg_blue JURL show_jmodal",attrs:{"j-page-href":"window/alert/data/transfer.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-retweet"}),t._v(" 移交")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"jbtn2 bg_blue JURL show_jmodal",attrs:{"j-page-href":"window/alert/data/storage.html","j-page-box":"#jcontent"}},[a("i",{staticClass:"fa fa-dropbox"}),t._v(" 存放位置")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"searchbox2"},[a("div",{staticClass:"name"},[t._v("按设备名称")]),a("div",{staticClass:"list"},[a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按设备名称")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按设备型号")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按设备类型")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按生产厂家")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按存放位置")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按设备接收人")])]),a("div",{staticClass:"option"},[a("input",{attrs:{type:"radio",name:"xuenian"}}),a("label",{attrs:{for:""}},[t._v("按资产编号")])])])]),a("div",{staticClass:"float-left"},[a("input",{staticClass:"inputgray",attrs:{type:"text",name:"",value:""}})]),a("a",{staticClass:"jbtn_sm text-center"},[a("i",{staticClass:"fa fa-search",staticStyle:{"margin-top":"10px"}})])])}],at={data:function(){return{fileList:[],dialogVisible:!1,pageSize:50,currentPage:1,total:0,tableData:[]}},mounted:function(){this.initData()},methods:{downloadTemplate:function(){window.open("/Uploads/ImportCapitalCSVTemplate.xlsx","_blank")},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/getOrganisationData.asmx/GetOpedata",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.total=parseInt(t.d.totalRows),e.tableData=[].concat(Object(o["a"])(t.d.value),Object(o["a"])(t.d.value.length==e.pageSize?[]:new Array(e.pageSize-t.d.value.length).fill({})))}})},initData:function(){this.onloadData(this.currentPage)},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadCapitalData"),["devicename","assetno","model","specification","devicetype","price","factory","dateofmanufacture","dateofpurchase","dateofdelivery","warrantytime","locationType","equipmentstatus"].map((function(t){a.append("FieldList",t)})),u.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.currentPage=1,e.onloadData(e.currentPage),t}))}}},st=at,it=Object(x["a"])(st,tt,et,!1,null,null,null),lt=it.exports,nt={data:function(){return{curPage:1,menuList:[]}},components:{dataBuildList:l["a"],dataUserList:P,dataClassroomList:U,dataTeacherList:G,dataStudentList:X,dataMaintainList:lt},mounted:function(){console.log("datalist ----------",new Date),this.initMenu()},computed:{curCompent:function(){return console.log(this.curPage,"this.curPage"),this.getCompentById(this.curPage-1)}},methods:{getCompentById:function(t){console.log(t,"which one");var e=["dataBuildList","dataUserList","dataClassroomList","dataTeacherList","dataStudentList","dataMaintainList"];return e[t]},loadPage:function(t){this.curPage=t.num},initMenu:function(){var t=this;return $.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserSubMenu",data:JSON.stringify({subMenuType:"basicdatasubmenu"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=[{title:"组织机构数据",num:1,fa:"fa-sitemap"},{title:"用户数据",num:2,fa:"fa-users"},{title:"教室数据",num:3,fa:"fa-calendar-check-o"},{title:"教师数据",num:4,fa:"fa-address-book-o"},{title:"学生数据",num:5,fa:"fa-address-book-o"},{title:"运维数据",num:6,fa:"fa-book"}];e.d.SubMenu.map((function(e){var s=e.replace("basicdatasubmenu","");t.menuList.push(a[s-1])})),t.menuList[0]&&t.curPage!==t.menuList[0].num&&(t.curPage=t.menuList[0].num)}})}}},rt=nt,ot=(a("b2ef"),Object(x["a"])(rt,s,i,!1,null,"72b74bb3",null));e["a"]=ot.exports},e7ab:function(t,e,a){},e9ff:function(t,e,a){},ec4b:function(t,e,a){},ec70:function(t,e,a){"use strict";var s=a("f63a"),i=a.n(s);i.a},f224:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"float-left ml-4 nav_page JCHANNAV vuepage",staticStyle:{"margin-top":"33px"}},t._l(t.menuList,(function(e,s){return a("div",{key:s,staticClass:"jbtn JCHANMENU JURL TEST",class:{active:t.curPage===e.num},on:{click:function(a){return t.loadPage(e)}}},[a("i",{class:[e.fa,"fa"]}),t._v(" "+t._s(e.title)),a("i",{staticClass:"jdown fa fa-caret-down"})])})),0),a("div",{staticClass:"stat-card2 col-12 float-left"},[a("keep-alive",[t.curPage>0?a(t.getCompentById(t.curPage-1),{tag:"component"}):t._e()],1)],1),a("input",{attrs:{type:"hidden",id:"schid"}}),a("input",{attrs:{type:"hidden",id:"newschid"}})])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"h3tt float-left"},[a("i",{staticClass:"fa fa-calendar"}),t._v(" 课程管理 ")])}],l=(a("2eeb"),a("e35a"),a("5e9f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2"}),a("div",{staticClass:"searchbox"},[a("div",[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:t.forms.formWeekday}},[a("el-form-item",{attrs:{label:""}},[a("el-switch",{attrs:{"active-text":"按星期","inactive-text":"按日期"},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"楼栋"},model:{value:t.building,callback:function(e){t.building=e},expression:"building"}},t._l(t.lists.buildings,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"学期"},model:{value:t.forms.formWeekday.termValue,callback:function(e){t.$set(t.forms.formWeekday,"termValue",e)},expression:"forms.formWeekday.termValue"}},t._l(["上学期","下学期"].map((function(t,e){return{value:e+1,label:t}})),(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"周"},model:{value:t.forms.formWeekday.weekValue,callback:function(e){t.$set(t.forms.formWeekday,"weekValue",e)},expression:"forms.formWeekday.weekValue"}},t._l(new Array(t.weeklistMaxNum).fill(1).map((function(t,e){return{value:e+1,label:"第"+(e+1)+"周"}})),(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"星期"},model:{value:t.forms.formWeekday.weekday,callback:function(e){t.$set(t.forms.formWeekday,"weekday",e)},expression:"forms.formWeekday.weekday"}},t._l(t.weekdays,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:e}})})),1)],1):t._e(),t.searchType?t._e():a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{"picker-options":t.monthdayOptions,type:"date",placeholder:"选择日期"},model:{value:t.forms.formWeekday.monthday,callback:function(e){t.$set(t.forms.formWeekday,"monthday",e)},expression:"forms.formWeekday.monthday"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.SearchFilter}},[t._v("查询")])],1)],1)],1)])]),a("div",{staticClass:"sec_box"},[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table",staticStyle:{"table-layout":"fixed"},attrs:{id:"scheduletable"}},[a("tr",[a("th",[t._v("教室编号")]),t._l(new Array(12).fill(1),(function(e,s){return a("th",{key:s,staticStyle:{width:"7/692%"}},[t._v(" 第"+t._s(s+1)+"节 ")])}))],2),t._l(t.dataList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(e.Classname))]),t._l(e.classList,(function(e,s){return a("td",{key:s},[e.isBlank?a("div",[a("div",{staticClass:"coursebox"})]):a("div",{staticClass:"coursebox",class:e.classcolor,attrs:{title:-1!==e.d.indexOf("BOriginal")?"已经被调课":""}},[t._v(" "+t._s(e.d.replace("BOriginal",""))+" "),a("span",{staticClass:"intro"},[t._v("课")]),t._m(1,!0)])])}))],2)}))],2),a("div",{staticClass:"w-100 line01 clearfix float-left",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[t._m(2),a("a",{staticClass:"jbtn_sm",on:{click:function(e){t.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-file-excel-o",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v(" 手动导入Excel课表 ")])]),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[t._v(" 1. 请下载模板文件。2.根据模板文件模板添加相关数据保存后，选择上传即可 ")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:t.Upload,"http-request":t.uploadFile,limit:1,data:{Type:"UploadUserData"},"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("el-button",{attrs:{type:"text"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1)],1)],1)])])}),n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-calendar mr-1"}),t._v("课程表")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"action",attrs:{"data-toggle":"modal",datatarget:"#tk_modal"}},[a("i",{staticClass:"fa fa-exchange"}),t._v(" 调课 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox2 float-left"},[a("div",{staticClass:"name"},[t._v("同步课表数据")]),a("div",{staticClass:"list up"},[a("div",{staticClass:"option"},[a("a",{staticClass:"show_jmodal JURL",attrs:{"j-page-href":"window/alert/tongbu-day.html","j-page-box":"#jcontent"}},[t._v("同步当天课表")])]),a("div",{staticClass:"option"},[a("a",{staticClass:"show_jmodal JURL",attrs:{"j-page-href":"window/alert/tongbu-week.html","j-page-box":"#jcontent"}},[t._v("同步当周课表")])]),a("div",{staticClass:"option"},[a("a",{staticClass:"show_jmodal JURL",attrs:{"j-page-href":"window/alert/tongbu-month.html","j-page-box":"#jcontent"}},[t._v("同步当月课表")])])])])}],r=(a("56ea"),a("ecb4"),a("0d7a"),a("82ae")),o=a.n(r);function c(t){console.log(t)}var d="";function u(t){return d=-1!=t.indexOf("reserve")?-1!=t.indexOf("Pending")?"state7":"state4":-1!=t.indexOf("transfer")?-1!=t.indexOf("pending")?"state9":"state2":"state1",d}var m={data:function(){return{dialogVisible:!1,dataList:[],weekdays:moment.weekdays().map((function(t,e){return{value:0!=e?e:7,label:t}})),searchType:!1,building:"",weeklistMaxNum:0,lists:{buildings:[]},forms:{formWeekday:{building:"",termValue:1,weekValue:1,weekday:1,monthday:moment()},formMonthDay:{}},monthdayOptions:{disabledDate:function(t){var e=moment(t.getTime()).day();return 0==e||6==e}}}},mounted:function(){this.init()},methods:{init:function(){this.initBuildings(),this.initWeekNum()},initBuildings:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(e){"success"===e.d.status&&(t.lists.buildings=e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}})),t.building=t.lists.buildings[0].value,t.getSchedule())}))},initWeekNum:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTotalWeek",data:JSON.stringify({semNum:this.forms.formWeekday.termValue}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.weeklistMaxNum=parseInt(e.d.value)},error:c})},SearchFilter:function(){this.searchType?$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetScheduleByDay",data:JSON.stringify({data:{building:this.building,semNum:this.forms.formWeekday.termValue,weekNum:this.forms.formWeekday.weekValue,dayNum:this.forms.formWeekday.weekday,pageIndex:"1",pageSize:"100"}}),contentType:"application/json; charset=utf-8",dataType:"json"}).then(this.drawTable):this.getSchedule()},getSchedule:function(){$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetScheduleByDate",data:JSON.stringify({data:{building:this.building,date:moment(this.forms.formWeekday.monthday).format("YYYY-MM-DD"),pageIndex:"1",pageSize:"10"}}),contentType:"application/json; charset=utf-8",dataType:"json"}).then(this.drawTable)},drawTable:function(t){this.dataList=t.d.value.map((function(t){return{Classname:t.Classname,classList:new Array(12).fill(1).map((function(e,a){var s=t["Section"+(a+1)];a%2==1&&(s=t["Section"+a]);var i=!0,l="",n="";return" "!=s&&-1==s.indexOf("rejected")&&(i=!1,-1!=s.indexOf(":")?(l=s.split(",")[1].split(":")[1],n=u(s),-1!==l.indexOf("BOriginal","")&&(n="state4")):(l=s,n="state1")),{d:l,isBlank:i,classcolor:n}}))}}))},downloadTemplate:function(){window.open("/Uploads/ImportScheduleCSVTemplate.xlsx","_blank")},uploadFile:function(t){var e=this,a=new FormData;return a.append("Upload",t.file),a.append("Type","UploadScheduleData"),["Year","Sem","Teacherid","Teachername","Courseid","Classname","Coursename","Weekstart","Weekend","Dayno","Section","TeachingBuilding","Floor"].map((function(t){a.append("FieldList",t)})),o.a.post("/api/Document/UploadFiles",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return e.init(),t})).catch((function(t){console.log(t)}))}}},f=m,p=(a("e2d1"),a("9ca4")),h=Object(p["a"])(f,l,n,!1,null,"00cb344b",null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[t.visible.isScheduleTable?"active":""],on:{click:function(e){return t.exchangePage("table")}}},[t._v("调课申请")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[t.visible.isScheduleTable?"":"active"],attrs:{"page-href":"window/p-course/002-2.html","page-box":"#sec_box"},on:{click:function(e){return t.exchangePage("list")}}},[t._v("调课审批")])]),a("div",{staticClass:"searchbox"},[a("div",[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:t.forms.formWeekday}},[a("el-form-item",{attrs:{label:""}},[a("el-switch",{attrs:{"active-text":"按星期","inactive-text":"按日期"},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"楼栋"},model:{value:t.building,callback:function(e){t.building=e},expression:"building"}},t._l(t.lists.buildings,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"学期"},model:{value:t.forms.formWeekday.termValue,callback:function(e){t.$set(t.forms.formWeekday,"termValue",e)},expression:"forms.formWeekday.termValue"}},t._l(["上学期","下学期"].map((function(t,e){return{value:e+1,label:t}})),(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"周"},model:{value:t.forms.formWeekday.weekValue,callback:function(e){t.$set(t.forms.formWeekday,"weekValue",e)},expression:"forms.formWeekday.weekValue"}},t._l(new Array(t.weeklistMaxNum).fill(1).map((function(t,e){return{value:e+1,label:"第"+(e+1)+"周"}})),(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t.searchType?a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"星期"},model:{value:t.forms.formWeekday.weekday,callback:function(e){t.$set(t.forms.formWeekday,"weekday",e)},expression:"forms.formWeekday.weekday"}},t._l(t.weekdays,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:e}})})),1)],1):t._e(),t.searchType?t._e():a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{"picker-options":t.monthdayOptions,type:"date",placeholder:"选择日期"},model:{value:t.forms.formWeekday.monthday,callback:function(e){t.$set(t.forms.formWeekday,"monthday",e)},expression:"forms.formWeekday.monthday"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.searchFilter}},[t._v("查询")])],1)],1)],1)])]),a("div",{staticClass:"sec_box"},[t.visible.isScheduleTable?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.isScheduleTable,expression:"loading.isScheduleTable"}]},[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),t._m(1),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table",staticStyle:{"table-layout":"fixed"},attrs:{id:"scheduletable"}},[a("tr",[a("th",[t._v("教室编号")]),t._l(new Array(12).fill(1),(function(e,s){return a("th",{key:s},[t._v(" 第"+t._s(s+1)+"节 ")])}))],2),t._l(t.dataList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(e.Classname))]),t._l(e.classList,(function(e,s){return a("td",{key:s},[e.isBlank?e.lessInfo?a("div",[a("div",{staticClass:"coursebox tk",class:e.classcolor})]):a("div",[t._m(2,!0)]):a("div",{staticClass:"coursebox tk",class:e.classcolor},[t._v(" "+t._s(e.course)+" "),t.isBeforeNow?t._e():a("span",{staticClass:"intro"},[t._v("课")]),t.isBeforeNow?a("sapn",{staticClass:"intro expire"},[t._v("已上课")]):t._e(),t.isBeforeNow?t._e():a("a",{staticClass:"action JURL",attrs:{"j-page-box":"#sec_box"},on:{click:function(a){return t.initTransForm(e)}}},[a("i",{staticClass:"fa fa-exchange"}),t._v(" 调课 ")])],1)])}))],2)}))],2),a("div",{staticClass:"w-100 line01 clearfix float-left",staticStyle:{height:"30px"}})]):t.visible.isTransForm?a("div",[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),t._m(3),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(4),a("table",{staticClass:"info_normal maxw900 w-100"},[a("tr",[a("td",[a("span",[t._v("课程名称：")]),a("span",{attrs:{id:"coursename"}},[t._v(t._s(t.forms.formCourse.CourseName))])]),a("td",[a("span",[t._v("上课地点：")]),a("span",{attrs:{id:"location"}},[t._v(t._s(t.forms.formCourse.Building)+"/"+t._s(t.forms.formCourse.ClassName))])]),a("td",[a("span",[t._v("上课时长：")]),a("span",{attrs:{id:"lessoncount"}},[t._v(t._s(t.forms.formCourse.Section)+"节")])]),a("td")]),a("tr",[a("td",{attrs:{colspan:"4"}},[a("span",[t._v("调课原因：")]),a("br"),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.trans.txtreason,expression:"trans.txtreason"}],staticClass:"info_input w-100",attrs:{id:"txtreason",name:"name",rows:"3",placeholder:"请输入您的调课原因",required:""},domProps:{value:t.trans.txtreason},on:{input:function(e){e.target.composing||t.$set(t.trans,"txtreason",e.target.value)}}})])])]),a("div",{staticClass:"w-100 clearfix float-left bbgray",staticStyle:{height:"30px"}}),t._m(5),a("table",{staticClass:"main_table table_list text-left"},[t._m(6),a("tr",{staticClass:"bbgray"},[t._m(7),a("td",[t._v("周次")]),a("td",{attrs:{id:"oldweek"}},[t._v(t._s(t.forms.formCourse.SelectedWeekStart))]),a("td",[a("div",{staticClass:"searchbox float-left"},[a("el-select",{attrs:{placeholder:"周"},model:{value:t.trans.weekValue,callback:function(e){t.$set(t.trans,"weekValue",e)},expression:"trans.weekValue"}},t._l(new Array(t.forms.formCourse.TotalWeeks-t.forms.formCourse.SelectedWeekStart+1).fill(1).map((function(e,a){return{value:a+parseInt(t.forms.formCourse.SelectedWeekStart),label:"第"+(a+parseInt(t.forms.formCourse.SelectedWeekStart))+"周"}})),(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),a("tr",{staticClass:"bbgray"},[t._m(8),a("td",[t._v("地点")]),a("td",{attrs:{id:"beforelocation"}},[t._v(" "+t._s(t.forms.formCourse.Building)+"/"+t._s(t.forms.formCourse.ClassName)+" ")]),a("td",[a("div",{staticClass:"searchbox float-left"},[a("el-select",{attrs:{placeholder:"楼栋"},on:{change:t.initClassInfo},model:{value:t.trans.building,callback:function(e){t.$set(t.trans,"building",e)},expression:"trans.building"}},t._l(t.lists.buildings,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{attrs:{placeholder:"教室"},on:{change:t.initAvailDay},model:{value:t.trans.classname,callback:function(e){t.$set(t.trans,"classname",e)},expression:"trans.classname"}},t._l(t.lists.classnames,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),a("tr",{staticClass:"bbgray"},[t._m(9),a("td",[t._v("节次")]),a("td",{attrs:{id:"oldsession"}},[t._v(" "+t._s(t.weekdays[t.forms.formCourse.DayNum].label)+"/第"+t._s(t.forms.formCourse.Section)+"节 ")]),a("td",[a("div",{staticClass:"searchbox float-left"},[a("el-select",{attrs:{placeholder:"星期"},on:{change:t.updateSectionlist},model:{value:t.trans.weekday,callback:function(e){t.$set(t.trans,"weekday",e)},expression:"trans.weekday"}},t._l(t.lists.transWeekdays,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label.label,value:e+1}})})),1)],1),a("div",{staticClass:"searchbox2 float-left"},[a("el-select",{attrs:{placeholder:"节"},model:{value:t.trans.section,callback:function(e){t.$set(t.trans,"section",e)},expression:"trans.section"}},t._l(t.lists.currentsec,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)])]),a("tr",{staticClass:"bbgray"},[t._m(10),a("td",[t._v("任课教师")]),a("td",{attrs:{id:"oldteacher"}},[t._v(t._s(t.forms.formCourse.TeacherName))]),a("td",[a("el-select",{attrs:{placeholder:"教师"},model:{value:t.trans.teacher,callback:function(e){t.$set(t.trans,"teacher",e)},expression:"trans.teacher"}},t._l(t.lists.TeacherNames,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm",on:{click:t.SaveTransfer}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v("确定提交申请 ")]),a("a",{staticClass:"jbtn_sm ml-2",on:{click:t.exitTransForm}},[a("i",{staticClass:"fa fa-times",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v("取消")])])])]):t.visible.isShowApproveList?a("div",[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table table_list text-left",attrs:{id:"pendingSchedule"}},[t._m(11),t._l(t.tablelist,(function(e,s){return a("tr",{key:s,class:["bbwhite",e.c]},[t._m(12,!0),a("td",[t._v(t._s(s+1))]),a("td",[t._v(" "+t._s(e.OldClassName)+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(e.NewClassName)+" ")]),a("td",[t._v(" "+t._s(e.oldtime[0])+" "+t._s(e.oldtime[1])+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(e.newtime[0])+" "+t._s(e.newtime[1])+" ")]),a("td",[t._v(" "+t._s(e.OldTeacherName)+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(e.NewTeacherName)+" ")]),a("td",[t._v(t._s(e.Reason))]),a("td",[t._v("多媒体教室")]),a("td",{class:e.statusclass},[t._v(t._s(e.CurrentStatus))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.Reason))]),a("td",[t._v(t._s(e.CourseName))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.ID))]),a("td",[a("a",{staticClass:"jbtn_xs btn_blue vis",attrs:{name:"viewdetails"},on:{click:function(a){return t.openInfo(e)}}},[a("i",{staticClass:"fa fa-eye"}),t._v(" 查看 ")])])])}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible.isTransReadOnly,expression:"visible.isTransReadOnly"}],staticClass:"w3-modalx",attrs:{id:"taskmodal"}},[a("div",{staticClass:"w3-modalx-content"},[a("div",{staticClass:"tt border-bottom",staticStyle:{"padding-bottom":"10px"}},[a("i",{staticClass:"fa fa-file"}),a("span",[t._v(t._s(t.curUserName)+"的调课申请")])]),a("table",{staticClass:"main_table my-4"},[a("tr",[a("td",{staticClass:"text-right font-weight-bold",staticStyle:{width:"100px"}},[t._v(" 课程名称 ")]),a("td",{staticClass:"gray",attrs:{id:"coursename"}},[t._v(" "+t._s(t.readOnlyItem.CourseName)+" ")])]),a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("课室调整")]),a("td",{staticClass:"gray",attrs:{id:"class"}},[t._v(" "+t._s(t.readOnlyItem.OldClassName)+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(t.readOnlyItem.NewClassName)+" ")])]),a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("时间调整")]),t.readOnlyItem.oldtime&&t.readOnlyItem.newtime?a("td",{staticClass:"gray",attrs:{id:"time"}},[t._v(" "+t._s(t.readOnlyItem.oldtime[0])+" "+t._s(t.readOnlyItem.oldtime[1])+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(t.readOnlyItem.newtime[0])+" "+t._s(t.readOnlyItem.newtime[1])+" ")]):t._e()]),a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("教师调整")]),a("td",{staticClass:"gray",attrs:{id:"teacher"}},[t._v(" "+t._s(t.readOnlyItem.OldTeacherName)+" "),a("i",{staticClass:"fa fa-arrow-circle-right gray"}),t._v(" "+t._s(t.readOnlyItem.NewTeacherName)+" ")])]),t._m(13),a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("调课原因")]),a("td",{staticClass:"gray",attrs:{id:"reason"}},[t._v(t._s(t.readOnlyItem.Reason))])]),a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("审批意见")]),a("td",{staticClass:"gray",attrs:{id:"reason"}},["待审批"==t.readOnlyItem.CurrentStatus?a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"审批意见"},model:{value:t.rejectReason,callback:function(e){t.rejectReason=e},expression:"rejectReason"}}):a("div",[t._v(" "+t._s(""==t.rejectReason?"无":t.rejectReason)+" ")])],1)]),t._m(14)]),a("div",{staticClass:"btns btns_auto border-top w-100",staticStyle:{"padding-top":"10px"}},["待审批"==t.readOnlyItem.CurrentStatus?a("a",{staticClass:"bg_green text-white",attrs:{id:"savesuccess"},on:{click:function(e){return t.savenewstat(t.readOnlyItem.ID)}}},[a("i",{staticClass:"fa fa-check"}),t._v("通过")]):t._e(),"待审批"==t.readOnlyItem.CurrentStatus?a("a",{staticClass:"bg_red text-white",attrs:{id:"rejectapplication"},on:{click:function(e){return t.Rejectnewstat(t.readOnlyItem.ID)}}},[a("i",{staticClass:"fa fa-check"}),t._v(" 驳回")]):t._e(),a("a",{staticClass:"bg_gray text-white",on:{click:function(e){t.visible.isTransReadOnly=!1}}},[a("i",{staticClass:"fa fa-close"}),t._v(" 取消")])])])]),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1):t._e()])])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-calendar mr-1"}),t._v("调课管理")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jbread"},[a("div",{staticClass:"step active"},[a("span",[t._v("1")]),t._v("选择课程")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("2")]),t._v("填写申请")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("3")]),t._v("等待审批")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coursebox state0"},[a("span",{staticClass:"intro"},[t._v("课")]),a("a",{staticClass:"action JURL"},[a("i",{staticClass:"fa fa-exchange"}),t._v(" 调课")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jbread"},[a("div",{staticClass:"step"},[a("span",[t._v("1")]),t._v("选择课程")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step active"},[a("span",[t._v("2")]),t._v("填写申请")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("3")]),t._v("等待审批")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("课程信息")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("i",{staticClass:"fa fa-cog"}),t._v("调课信息")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})]),a("th",{staticClass:"text-left"},[t._v("项目")]),a("th",{staticClass:"text-left"},[t._v("调课前")]),a("th",{staticClass:"text-left"},[t._v("调课要求")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})]),a("th",{staticClass:"text-left"},[t._v("序号")]),a("th",{staticClass:"text-left"},[t._v("课室调整")]),a("th",{staticClass:"text-left"},[t._v("时间调整")]),a("th",{staticClass:"text-left"},[t._v("教师调整")]),a("th",{staticClass:"text-left"},[t._v("原因")]),a("th",{staticClass:"text-left"},[t._v("教室类型")]),a("th",{staticClass:"text-left"},[t._v("当前状态")]),a("th",{staticStyle:{display:"none"}},[t._v("reason")]),a("th",[t._v("课程名称")]),a("th",{staticStyle:{display:"none"}},[t._v("id")]),a("th",{staticClass:"text-left"},[t._v("操作")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right font-weight-bold"},[t._v("教室类型")]),a("td",{staticClass:"gray",attrs:{id:"classtype"}},[t._v("多媒体教室")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{display:"none"}},[a("input",{attrs:{type:"hidden",id:"scheduleid"}})])])}],C=(a("4194"),a("6c6d"));function y(t){console.log(t)}var _="";function x(t){return _=-1!=t.indexOf("reserve")?-1!=t.indexOf("Pending")?"state7":"state4":-1!=t.indexOf("transfer")?-1!=t.indexOf("pending")?"state9":"state2":"state1",_}var S=[],w={data:function(){return{rejectReason:"",readOnlyItem:{},tablelist:[],currentPage:1,pageSize:50,total:0,isBeforeNow:!1,curUserName:sessionStorage.getItem("userName"),trans:{building:"",classname:"",txtreason:"原因"},dataList:[],weekdays:moment.weekdays().map((function(t,e){return{value:0!=e?e:7,label:t}})),searchType:!1,building:"",weeklistMaxNum:0,visible:{isScheduleTable:!0,isTransForm:!1,isTransReadOnly:!1},loading:{isScheduleTable:!1},lists:{buildings:[],classnames:[],currentsec:[],transWeekdays:[]},forms:{formWeekday:{building:"",termValue:1,weekValue:1,weekday:1,monthday:moment()},formCourse:{id:"",CourseName:"",Building:"",Section:"",SemNum:"",weekValue:1,SelectedWeekStart:1,teacher:""}},monthdayOptions:{disabledDate:function(t){var e=moment(t.getTime()).day();return 0==e||6==e}}}},mounted:function(){var t=this;$(document).ready((function(){t.initMenu(),t.initTable()}))},methods:{savenewstat:function(t){this.SaveCurrentStatus("approved",t),console.log("save func worked"),this.visible.isTransReadOnly=!1},Rejectnewstat:function(t){var e=this.rejectReason;""!==this.rejectReason?(this.SaveCurrentStatus("rejected",t,e),console.log("Reject func worked"),this.visible.isTransReadOnly=!1):this.$message("请输入审批意见")},SaveCurrentStatus:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/UpdateTransferScheduleStatus",data:JSON.stringify({data:{status:t,id:e,reason:s}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){a.onloadData(a.currentPage),a.$message("操作成功")}})},openInfo:function(t){this.visible.isTransReadOnly=!0,this.readOnlyItem=t},getSelectedWeekStart:function(){var t=this;return $.ajax({type:"POST",url:"/Services/ScheduleData.asmx/GetWeekYearSemester",data:JSON.stringify({date:moment(this.forms.formWeekday.monthday).format("YYYY-MM-DD")}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.forms.formCourse.SelectedWeekStart=e.d.weekNum}})},exchangePage:function(t){"table"===t?(this.visible.isTransForm=!1,this.visible.isShowApproveList=!1,this.visible.isScheduleTable=!0):"list"===t&&(this.visible.isTransForm=!1,this.visible.isScheduleTable=!1,this.visible.isShowApproveList=!0,this.initProcessList())},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTransferScheduleList",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.refreshTable(t.d.value),e.total=t.d.totalRows}})},refreshTable:function(t){for(var e=0;e<t.length;e++){var a="",s="",i=t[e],l=i.OldTime.split(","),n=i.NewTime.split(",");switch(i.CurrentStatus=i.CurrentStatus.toLocaleLowerCase(),i.CurrentStatus){case"pending":a="tr_bg_alert",s="orange",i.CurrentStatus="待审批";break;case"approved":a="tr_bg_suc",i.CurrentStatus="通过",s="green";break;case"expired":a="tr_bg_disable",i.CurrentStatus="过期",s="gray";break;case"rejected":a="tr_bg_danger",i.CurrentStatus="驳回",s="red";break}t[e].c=a,t[e].statusclass=s,t[e].oldtime=l,t[e].newtime=n}console.log(t,"idata"),this.tablelist=t},initProcessList:function(){this.onloadData(1),$(document).off("click").on("click",".taskmodal",(function(){console.log("finish...");var t=this,e=$(t).parents("tr");"pending"!=e.find("td:eq(6)").html()&&($("#savesuccess").attr("onclick",""),$("#rejectapplication").attr("onclick","")),$("#coursename").html(e.find("td:eq(8)").html()),$("#class").html(e.find("td:eq(2)").html()),$("#time").html(e.find("td:eq(3)").html()),$("#teacher").html(e.find("td:eq(4)").html()),$("#reason").html(e.find("td:eq(7)").html()),$("#scheduleid").html(e.find("td:eq(9)").html()),document.getElementById("taskmodal").style.display="block"}))},initTable:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"success"===e.d.status&&(t.lists.buildings=e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}})),t.building=t.lists.buildings[0].value,t.getSchedule())}}),$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTotalWeek",data:JSON.stringify({semNum:this.forms.formWeekday.termValue}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.weeklistMaxNum=parseInt(e.d.value)},error:y})},searchFilter:function(){var t=this;this.exchangePage("table"),this.loading.isScheduleTable=!0,this.searchType?$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTransferScheduleByDay",data:JSON.stringify({data:{building:this.building,semNum:this.forms.formWeekday.termValue,weekNum:this.forms.formWeekday.weekValue,dayNum:this.forms.formWeekday.weekday,pageIndex:"1",pageSize:"100"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:this.updateTable,error:function(){t.loading.isScheduleTable=!1,t.$message("查询报错")}}):this.getSchedule()},initMenu:function(){getCourseSubMenu()},GetData:function(t){var e=JSON.stringify({id:t});$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetCourseDetailsForTransferID",data:e,contentType:"application/json; charset=utf-8",dataType:"json",success:this.FillEditSchedule,error:y})},FillEditSchedule:function(t){var e=this,a=t.d.value;""!==a?(this.forms.formCourse=Object(C["a"])({id:"",CourseName:"",Building:"",Section:"",SemNum:"",weekValue:1,SelectedWeekStart:1,teacher:""},t.d.value),this.searchType?(this.forms.formCourse.SelectedWeekStart=this.forms.formWeekday.weekValue,this.GetTeacherDetail(a)):this.getSelectedWeekStart().then((function(){e.GetTeacherDetail(a)}))):this.$message("获取课程名称失败")},GetTeacherDetail:function(t){var e=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTeacherDetail",data:JSON.stringify({courseName:t.CourseName}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.visible.isScheduleTable=!1,e.visible.isTransForm=!0,e.lists.TeacherNames=t.d.value.map((function(t){return{value:t.TeacherId,label:t.TeacherName}}))}})},exitTransForm:function(){this.forms.formCourse={id:"",CourseName:"",Building:"",Section:"",SemNum:"",weekValue:1,SelectedWeekStart:1,teacher:""},this.trans={building:"",classname:"",txtreason:"原因"},this.visible.isScheduleTable=!0,this.visible.isTransForm=!1},checkFormVail:function(){var t=!0;return t&&!this.trans.txtreason&&(this.$message("请填写调课原因"),t=!1),t&&!this.trans.weekValue&&(this.$message("请选择调周次"),t=!1),t&&!this.trans.weekday&&(this.$message("请选择调课星期"),t=!1),t&&!this.trans.section&&(this.$message("请选择调课节次"),t=!1),t&&!this.trans.building&&(this.$message("请选择调课教学楼"),t=!1),t&&!this.trans.teacher&&(this.$message("请选择调课教室"),t=!1),t&&!this.trans.classname&&(this.$message("请填写课程名称"),t=!1),t},SaveTransfer:function(){var t=this;if(this.checkFormVail()){console.log(this.trans.id,"this.trans.id");var e=JSON.stringify({data:{courseName:this.forms.formCourse.CourseName,currentClassId:this.forms.formCourse.ClassId,reason:this.trans.txtreason,oldWeek:this.forms.formCourse.SelectedWeekStart,oldDay:this.forms.formCourse.DayNum,sem:this.forms.formCourse.SemNum,newWeek:this.trans.weekValue,newday:this.trans.weekday,newSection:this.trans.section,newBuilding:this.trans.building,newClassId:this.trans.classname,newTeacherID:this.trans.teacher,currentRefrenceID:this.trans.id}});$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/AddTransferSchedule",data:e,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=e.d;"fail"!==a.status?t.exitTransForm():t.$message.error("提交失败，请联系管理员")}})}},initClassInfo:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetAvailClasses",data:JSON.stringify({data:{building:this.trans.building,semNum:this.forms.formCourse.SemNum,weekNum:this.trans.weekValue}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.lists.classnames=e.d.value.map((function(t){return{label:t.ClassName,value:t.ClassId}})),t.trans.classname=""}})},updateSectionlist:function(){var t=parseInt(this.trans.weekday);console.log(t,111,S[t],S),this.lists.currentsec=S[t]},initAvailDay:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetAvailDay",data:JSON.stringify({data:{classId:this.trans.classname,semNum:this.forms.formCourse.SemNum,weekNum:this.trans.weekValue}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=e.d.value;""!==a?(S=a.map((function(t){return t["Section"]})),t.lists.transWeekdays=a.map((function(e){return{label:t.weekdays[7===e["Day"]?0:e["Day"]],value:e["Day"]}}))):t.$message("此教室第".concat(t.trans.weekValue,"周，没有可用时间段"))}})},initTransForm:function(t){this.trans.id=t.d;var e=t.datatype;"reserve"==e||"transfer"==e?(alert("you are not allowed to transfer this"),this.exitTransForm()):this.GetData(this.trans.id,e)},updateTable:function(t){this.isBeforeNow=moment(this.forms.formWeekday.monthday).isBefore(moment().add(-1,"d")),""===t.d.value?(this.dataList=[],this.$message("当天没有课程")):this.dataList=t.d.value.map((function(t){return{Classname:t.Classname,classList:new Array(12).fill(1).map((function(e,a){var s=t["Section"+(a+1)];a%2==1&&(s=t["Section"+a]);var i=!0,l="",n="",r="",o=!1,c="";return" "!=s&&-1==s.indexOf("rejected")&&(i=!1,-1!=s.indexOf(":")?(l=s.split(",")[0].split(":")[1],console.log(s,l),n=s.split(":")[2],-1!=s.indexOf("reserve")?r="reserve":-1!=s.indexOf("transfer")&&(r="transfer"),c=x(s),n.indexOf(",")&&(n=n.split(",")[0]),-1!==n.indexOf("BOriginal","")&&(c="state4"),n=n.replace("BOriginal","")):(o=!0,l=s,c="state1")),{d:l,datatype:r,course:n,lessInfo:o,isBlank:i,classcolor:c}}))}})),this.loading.isScheduleTable=!1},getSchedule:function(){console.log(this.building,"xxxxxxxxxxxx"),$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetTransferScheduleByDate",data:JSON.stringify({data:{building:this.building,date:moment(this.forms.formWeekday.monthday).format("YYYY-MM-DD"),pageIndex:"1",pageSize:"10"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:this.updateTable})}}},k=w,j=(a("9897"),Object(p["a"])(k,g,b,!1,null,null,null)),T=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bar01"},[t._m(0),a("div",{staticClass:"nav2 JPAGENAV JPAGENAV-01"},[a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray JURL",class:[t.visible.isScheduleTable?"active":""],attrs:{"j-page-href":"window/p-course/003-1.html","j-page-box":"#sec_box"},on:{click:function(e){return t.exchangePage("table")}}},[t._v("预约申请")]),a("a",{staticClass:"JPAGEMENU jbtn2 bg_gray",class:[t.visible.isScheduleTable?"":"active"],attrs:{"page-href":"window/p-course/003-2.html","page-box":"#sec_box",id:"coursesubmenu5"},on:{click:function(e){return t.exchangePage("list")}}},[t._v("预约审批")])]),a("div",{staticClass:"searchbox"},[a("div",[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:t.forms.formWeekday}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{placeholder:"楼栋"},model:{value:t.building,callback:function(e){t.building=e},expression:"building"}},t._l(t.lists.buildings,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{"picker-options":t.monthdayOptions,type:"date",placeholder:"选择日期"},model:{value:t.forms.formWeekday.monthday,callback:function(e){t.$set(t.forms.formWeekday,"monthday",e)},expression:"forms.formWeekday.monthday"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.searchFilter}},[t._v("查询")])],1)],1)],1)]),a("input",{attrs:{type:"hidden",id:"section"}}),a("input",{attrs:{type:"hidden",id:"classroom"}})]),a("div",{staticClass:"sec_box"},[t.visible.isScheduleTable?a("div",[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),t._m(1),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table",staticStyle:{"table-layout":"fixed"},attrs:{id:"scheduletable"}},[a("tr",[a("th",[t._v("教室编号")]),t._l(new Array(12).fill(1),(function(e,s){return a("th",{key:s,staticStyle:{width:"7/692%"}},[t._v(" 第"+t._s(s+1)+"节 ")])}))],2),t._l(t.dataList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(e.Classname))]),t._l(e.classList,(function(s,i){return a("td",{key:i},[s.isBlank?a("div",[t.isBeforeNow?t._e():a("div",{staticClass:"coursebox state3 JURL",attrs:{"page-href":"window/p-course/003-1-1.html?section=1,2&class=' + data['Classname'] + '","j-page-box":"#sec_box"},on:{click:function(a){return t.showBookLesson(e,s,i+1)}}},[a("span",{staticClass:"intro"},[t._v("可预约")])]),t.isBeforeNow?a("div",{staticClass:"coursebox state3 JURL"},[a("sapn",{staticClass:"intro expire"},[t._v("已过期")])],1):t._e()]):a("div",{staticClass:"coursebox",class:s.classcolor},[t._v(" "+t._s(s.d)+" "),a("span",{staticClass:"intro"},[t._v(t._s("state4"==s.classcolor?"已预约-成功":"state7"==s.classcolor?"已预约-处理中":"课"))]),t.isBeforeNow?t._e():a("a",{staticClass:"action",attrs:{"data-toggle":"modal",datatarget:"#tk_modal"}},[a("i",{staticClass:"fa fa-exchange"}),t._v(" 调课 ")])])])}))],2)}))],2),a("div",{staticClass:"w-100 line01 clearfix float-left",staticStyle:{height:"30px"}})]):t._e(),t.visible.isScheduleForm?a("div",[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),t._m(2),a("div",{staticClass:"w-100 clearfix float-left line01",staticStyle:{height:"30px"}}),a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"w-100 cell-10"},[t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约设备")]),a("td",{attrs:{colspan:"5"}},t._l(["系统","投影","电脑","面板","扩音设备","空调","灯光"],(function(e,s){return a("label",{key:s,staticClass:"mr-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reserveEquipMode,expression:"reserveEquipMode"}],attrs:{type:"checkbox",name:"reserveEquip"},domProps:{value:e,checked:Array.isArray(t.reserveEquipMode)?t._i(t.reserveEquipMode,e)>-1:t.reserveEquipMode},on:{change:[function(a){var s=t.reserveEquipMode,i=a.target,l=!!i.checked;if(Array.isArray(s)){var n=e,r=t._i(s,n);i.checked?r<0&&(t.reserveEquipMode=s.concat([n])):r>-1&&(t.reserveEquipMode=s.slice(0,r).concat(s.slice(r+1)))}else t.reserveEquipMode=l},t.updateReserveEquip]}}),a("i",{staticClass:"fa fa-check jcheckbox"}),t._v(" "+t._s(e)+" ")])})),0)])]),a("div",{staticClass:"w-100 line01 clearfix float-left",staticStyle:{height:"30px"}}),a("div",{staticClass:"bar01"},[a("div",{staticClass:"searchbox float-left"},[a("a",{staticClass:"jbtn_sm",attrs:{"page-href":"window/alert/state_suc_2.html","page-box":"#jcontent"},on:{click:t.SaveReserveApplication}},[a("i",{staticClass:"fa fa-check",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v("确定提交申请")]),a("a",{staticClass:"jbtn_sm ml-2 bg_red JURL",attrs:{"page-href":"window/p-course/003-1.html","page-box":"#sec_box"},on:{click:function(e){return t.exchangePage("table")}}},[a("i",{staticClass:"fa fa-times",staticStyle:{"margin-top":"10px","margin-right":"5px"}}),t._v("取消")])])])]):t.visible.isShowApproveList?a("div",[a("div",{staticClass:"w-100 clearfix float-left",staticStyle:{height:"30px"}}),a("table",{staticClass:"main_table text-left",attrs:{id:"table_reserveList"}},[t._m(9),t._l(t.tablelist,(function(e,s){return a("tr",{key:s,class:["bbwhite",e.c]},[t._m(10,!0),a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.PersonName)+"/"+t._s(e.PersonID)+"-教室预约")]),a("td",[t._v(t._s(e.Date))]),a("td",[t._v(t._s(e.PersonName))]),a("td",[t._v(t._s(e.Classroom))]),a("td",[t._v(t._s(e.Section)+" - "+t._s(parseInt(e.Section)+1))]),a("td",[t._v(t._s(e.ReservationPurpose))]),a("td",{class:e.statusclass},[t._v(t._s(e.CurrentStatus))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.ID))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.SchoolYear))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.Semester))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.Week))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.BorrowingUnit))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.WorkPhone))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.ContactNum))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.Purpose))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.Equipments))]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.PersonID))]),a("td",[a("a",{staticClass:"jbtn_xs btn_blue vis",class:e.disabledclass,attrs:{name:"viewdetails"},on:{click:function(a){return t.openInfo(e)}}},[a("i",{staticClass:"fa fa-eye"}),t._v(" 查看 ")])])])}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible.isTransReadOnly,expression:"visible.isTransReadOnly"}],staticClass:"w3-modalx",attrs:{id:"taskmodal"}},[a("div",{staticClass:"w3-modalx-content"},[a("div",{staticClass:"tt border-bottom"},[a("i",{staticClass:"fa fa-file"}),a("span",[t._v(t._s(t.curUserName)+"的预约申请")])]),a("table",{staticClass:"main_table gray my-4"},[a("tr",[a("td",{staticClass:"text-right black"},[t._v("学年")]),a("td",{attrs:{id:"schoolyeardisc"}},[t._v(t._s(t.readOnlyItem.SchoolYear))]),a("td",{staticClass:"text-right black"},[t._v("学期")]),a("td",{attrs:{id:"semesterdisc"}},[t._v(t._s(t.readOnlyItem.Semester))]),a("td",{staticClass:"text-right black"}),a("td",{staticStyle:{display:"none"},attrs:{id:"iddisc"}})]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("星期")]),a("td",{attrs:{id:"daydisc"}},[t._v(t._s(t.readOnlyItem.weekdaystr))]),a("td",{staticClass:"text-right black"},[t._v("时段")]),a("td",{attrs:{id:"sectiondisc"}},[t._v(" 第"+t._s(t.readOnlyItem.Section)+"-"+t._s(t.readOnlyItem.Section- -1)+"节 ")]),a("td",{staticClass:"text-right black"}),a("td")]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("开始周")]),a("td",{attrs:{id:"weekdisc"}},[t._v(t._s(t.readOnlyItem.Week))]),a("td",{staticClass:"text-right black"},[t._v("开始日期")]),a("td",{attrs:{id:"datedisc"}},[t._v(t._s(t.readOnlyItem.Date))]),a("td",{staticClass:"text-right black"}),a("td")]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("借用教室")]),a("td",{attrs:{id:"classdisc"}},[t._v(t._s(t.readOnlyItem.Classroom))]),a("td",{staticClass:"text-right black"},[t._v("借用单位")]),a("td",{attrs:{id:"unitdisc"}},[t._v(t._s(t.readOnlyItem.BorrowingUnit))]),a("td",{staticClass:"text-right black"},[t._v("单位电话")]),a("td",{attrs:{id:"phonedisc"}},[t._v(t._s(t.readOnlyItem.WorkPhone))])]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约人")]),a("td",{attrs:{id:"namedisc"}},[t._v(t._s(t.readOnlyItem.PersonName))]),a("td",{staticClass:"text-right black"},[t._v("教师工号/学生学号")]),a("td",{attrs:{id:"personiddisc"}},[t._v(t._s(t.readOnlyItem.PersonID))]),a("td",{staticClass:"text-right black"},[t._v("联系电话")]),a("td",{attrs:{id:"mobiledisc"}},[t._v(t._s(t.readOnlyItem.ContactNum))])]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约原因")]),a("td",{attrs:{id:"purposedisc"}},[t._v(t._s(t.readOnlyItem.Purpose))]),a("td",{staticClass:"text-right black"},[t._v("预约用途")]),a("td",{attrs:{id:"reasondisc",colspan:"3"}},[t._v(" "+t._s(t.readOnlyItem.ReservationPurpose)+" ")])]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约设备")]),a("td",{attrs:{id:"equipdisc",colspan:"5"}},[t._v(" "+t._s(t.readOnlyItem.Equipments)+" ")])]),a("tr",[a("td",{staticClass:"text-right black"},[t._v("审批意见")]),a("td",{attrs:{colspan:"5"}},["待审批"==t.readOnlyItem.CurrentStatus?a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"审批意见"},model:{value:t.rejectReason,callback:function(e){t.rejectReason=e},expression:"rejectReason"}}):a("div",[t._v(" "+t._s(""==t.rejectReason?"无":t.rejectReason)+" ")])],1)])]),a("div",{staticClass:"btns btns_auto border-top w-100",staticStyle:{"padding-top":"10px"}},["待审批"==t.readOnlyItem.CurrentStatus?a("a",{staticClass:"bg_green text-white",attrs:{id:"savesuccess"},on:{click:function(e){return t.savenewstat(t.readOnlyItem.ID)}}},[a("i",{staticClass:"fa fa-check"}),t._v("通过")]):t._e(),"待审批"==t.readOnlyItem.CurrentStatus?a("a",{staticClass:"bg_red text-white",attrs:{id:"rejectapplication"},on:{click:function(e){return t.Rejectnewstat(t.readOnlyItem.ID)}}},[a("i",{staticClass:"fa fa-check"}),t._v(" 驳回")]):t._e(),a("a",{staticClass:"bg_gray text-white",attrs:{onclick:"document.getElementById('taskmodal').style.display = 'none';"},on:{click:function(e){t.visible.isTransReadOnly=!1}}},[a("i",{staticClass:"fa fa-close"}),t._v(" 取消")])])])]),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,300],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.onloadData,"size-change":t.onloadDataWithSize}})],1):t._e()])])},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"tt01"},[a("i",{staticClass:"fa fa-calendar mr-1"}),t._v("预约管理")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jbread"},[a("div",{staticClass:"step active"},[a("span",[t._v("1")]),t._v("选择课时")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("2")]),t._v("填写申请")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("3")]),t._v("等待审批")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jbread"},[a("div",{staticClass:"step"},[a("span",[t._v("1")]),t._v("选择课时")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step active"},[a("span",[t._v("2")]),t._v("填写申请")]),a("i",{staticClass:"fa fa-angle-double-right"}),a("div",{staticClass:"step"},[a("span",[t._v("3")]),t._v("等待审批")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("学年")]),a("td",{attrs:{id:"schoolyear"}},[t._v("2019-2020")]),a("td",{staticClass:"text-right black"},[t._v("学期")]),a("td",{attrs:{id:"semestername"}},[t._v("上学期")]),a("td",{staticClass:"text-right black"}),a("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("星期")]),a("td",{attrs:{id:"day"}},[t._v("星期一 双周")]),a("td",{staticClass:"text-right black"},[t._v("时段")]),a("td",{attrs:{id:"selectedsection"}},[t._v("第1-2节")]),a("td",{staticClass:"text-right black"}),a("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("开始周")]),a("td",{attrs:{id:"week"}},[t._v("22")]),a("td",{staticClass:"text-right black"},[t._v("开始日期")]),a("td",{attrs:{id:"selecteddate"}},[t._v("2019-00-00")]),a("td",{staticClass:"text-right black"}),a("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("借用教室")]),a("td",[a("input",{attrs:{type:"text",id:"borrowingclass",disabled:""}})]),a("td",{staticClass:"text-right black"},[t._v("借用单位")]),a("td",[a("input",{attrs:{type:"text",id:"borrowingunit"}})]),a("td",{staticClass:"text-right black"},[t._v("单位电话")]),a("td",[a("input",{attrs:{type:"text",id:"workphone"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约人")]),a("td",[a("input",{attrs:{type:"text",id:"appointment"}})]),a("td",{staticClass:"text-right black"},[t._v("教师工号/学生学号")]),a("td",[a("input",{attrs:{type:"text",id:"personid"}})]),a("td",{staticClass:"text-right black"},[t._v("联系电话")]),a("td",[a("input",{attrs:{type:"text",id:"contactnumber"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-right black"},[t._v("预约原因")]),a("td",[a("input",{attrs:{type:"text",id:"purpose"}})]),a("td",{staticClass:"text-right black"},[t._v("预约用途")]),a("td",{attrs:{colspan:"3"}},[a("input",{attrs:{type:"text",id:"ReservationPurpose"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})]),a("th",{staticClass:"text-left"},[t._v("序号")]),a("th",{staticClass:"text-left"},[t._v("预约名称")]),a("th",{staticClass:"text-left"},[t._v("预约日期")]),a("th",{staticClass:"text-left"},[t._v("预约人")]),a("th",{staticClass:"text-left"},[t._v("预约课室")]),a("th",{staticClass:"text-left"},[t._v("课时")]),a("th",{staticClass:"text-left"},[t._v("预约用途")]),a("th",{staticClass:"text-left"},[t._v("当前状态")]),a("th",{staticStyle:{display:"none"}},[t._v("id")]),a("th",{staticStyle:{display:"none"}},[t._v("schoolyear")]),a("th",{staticStyle:{display:"none"}},[t._v("semester")]),a("th",{staticStyle:{display:"none"}},[t._v("week")]),a("th",{staticStyle:{display:"none"}},[t._v("unit")]),a("th",{staticStyle:{display:"none"}},[t._v("workph")]),a("th",{staticStyle:{display:"none"}},[t._v("contact")]),a("th",{staticStyle:{display:"none"}},[t._v("reason")]),a("th",{staticStyle:{display:"none"}},[t._v("devices")]),a("th",{staticStyle:{display:"none"}},[t._v("personid")]),a("th",{staticClass:"text-left"},[t._v("详情")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticStyle:{width:"50px","text-align":"center"}},[a("input",{attrs:{type:"checkbox",name:"tiaoke"}})])}],D=(a("b4fb"),a("dbb3"),a("9302"),a("f4e3"),["星期天","星期一","星期二","星期三","星期四","星期五","星期六"]);function A(t){console.log(t)}var P="";function N(t){return P=-1!=t.indexOf("reserve")?-1!=t.indexOf("Pending")?"state7":"state4":-1!=t.indexOf("transfer")?-1!=t.indexOf("pending")?"state9":"state2":"state1",P}function L(t){console.log(t)}var E={data:function(){return{reserveEquipMode:[],rejectReason:"",readOnlyItem:{},tablelist:[],currentPage:1,pageSize:50,total:0,isBeforeNow:!1,curUserName:sessionStorage.getItem("userName"),trans:{building:"",classname:"",txtreason:"原因"},dataList:[],weekdays:moment.weekdays().map((function(t,e){return{value:0!=e?e:7,label:t}})),searchType:!1,building:"",weeklistMaxNum:0,loading:{isScheduleTable:!1},visible:{isTransReadOnly:!1,isScheduleTable:!0,isScheduleForm:!1},lists:{buildings:[],classnames:[],currentsec:[],transWeekdays:[]},forms:{formWeekday:{building:"",termValue:1,weekValue:1,weekday:1,monthday:moment()},formCourse:{id:"",CourseName:"",Building:"",Section:"",SemNum:"",weekValue:1,WeekStart:1,teacher:""}},monthdayOptions:{disabledDate:function(t){var e=moment(t.getTime()).day();return 0==e||6==e}}}},watch:{reserveEquipMode:function(t){console.log("reserveEquipMode",t)}},mounted:function(){this.initTableData(),this.initMenu()},methods:{updateReserveEquip:function(t){console.log(t.target.defaultValue,111,t.target.defaultChecked),"系统"!=t.target.defaultValue||t.target.defaultChecked?this.reserveEquipMode=this.reserveEquipMode.filter((function(t){return"系统"!=t})):this.reserveEquipMode=["系统"]},openInfo:function(t){this.visible.isTransReadOnly=!0,t.weekdaystr=moment(t.Date).format("dddd"),this.readOnlyItem=t},exchangePage:function(t){"table"===t?(this.visible.isScheduleForm=!1,this.visible.isShowApproveList=!1,this.visible.isScheduleTable=!0,this.initTableData(),this.initMenu()):"list"===t&&(this.visible.isScheduleForm=!1,this.visible.isScheduleTable=!1,this.visible.isShowApproveList=!0,this.GetOrgData())},onloadDataWithSize:function(t){this.pageSize=t,this.currentPage=1,this.onloadData(this.currentPage)},onloadData:function(t){var e=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetReserveScheduleList",data:JSON.stringify({data:{pageIndex:t,pageSize:this.pageSize}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.refreshTable(t.d.value),e.total=t.d.totalRows}})},refreshTable:function(t){for(var e="",a="",s="",i=0;i<t.length;i++){switch(t[i].Status){case"Pending":s="tr_bg_alert",a="orange",t[i].CurrentStatus="待审批";break;case"Approved":s="tr_bg_suc",a="green",t[i].CurrentStatus="通过";break;case"Expired":s="tr_bg_disable",a="gray",t[i].CurrentStatus="过期";break;case"Rejected":s="tr_bg_danger",t[i].CurrentStatus="驳回",a="red";break}t[i].c=s,t[i].statusclass=a,e="orange"==a?"":"disabled",t[i].disabledclass=e}this.tablelist=t},GetOrgData:function(){this.onloadData(1),$(document).off("click").on("click",".taskmodal",(function(){console.log("finish...");var t=this,e=$(t).parents("tr");console.log(e.find("td:eq(8)").text()),"Pending"!=e.find("td:eq(8)").text()&&($("#savesuccess").attr("onclick",""),$("#rejectapplication").attr("onclick","")),console.log(e.find("td:eq(2)").html()),console.log(e.find("td:eq(3)").text()),$("#schoolyeardisc").html(e.find("td:eq(10)").html()),$("#semesterdisc").html(e.find("td:eq(11)").html()),$("#daydisc").html(e.find("td:eq(3)").html()),$("#sectiondisc").html(e.find("td:eq(6)").html()),$("#weekdisc").html(e.find("td:eq(12)").html()),$("#datedisc").html(e.find("td:eq(3)").html()),$("#classdisc").html(e.find("td:eq(5)").html()),$("#unitdisc").html(e.find("td:eq(13)").html()),$("#phonedisc").html(e.find("td:eq(14)").html()),$("#namedisc").html(e.find("td:eq(4)").html()),$("#personiddisc").html(e.find("td:eq(18)").html()),$("#mobiledisc").html(e.find("td:eq(15)").html()),$("#purposedisc").html(e.find("td:eq(7)").html()),$("#reasondisc").html(e.find("td:eq(16)").html()),$("#equipdisc").html(e.find("td:eq(17)").html()),$("#iddisc").html(e.find("td:eq(9)").html()),document.getElementById("taskmodal").style.display="block"}))},SaveCurrentStatus:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/UpdateReserveScheduleStatus",data:JSON.stringify({data:{status:t,id:e,reason:s}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){a.onloadData(a.currentPage),a.$message("操作成功")},error:L})},savenewstat:function(t){this.SaveCurrentStatus("Approved",t),console.log("save func worked"),this.visible.isTransReadOnly=!1},Rejectnewstat:function(t){var e=this.rejectReason;""!==this.rejectReason?(this.SaveCurrentStatus("Rejected",t,e),this.visible.isTransReadOnly=!1):this.$message("请输入审批意见")},showBookLesson:function(t,e,a){var s=this;this.isScheduleTable=!1,this.isScheduleForm=!0;var i=moment(this.forms.formWeekday.monthday).format("YYYY-MM-DD"),l=moment(this.forms.formWeekday.monthday).day();$.ajax({type:"POST",url:"/Services/ScheduleData.asmx/GetWeekYearSemester",data:JSON.stringify({date:i}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var n=e.d;console.log(n,"xxxxxxxxxxxxx"),s.visible.isScheduleTable=!1,s.visible.isShowApproveList=!1,s.visible.isScheduleForm=!0,s.$nextTick((function(){$("#schoolyear").html(n.yearNum),$("#semestername").html({1:"上学期",2:"下学期"}[n.semNum]),$("#selecteddate").html(i);var e=D[l];$("#day").html(e),$("#selectedsection").html(a%2===1?"第".concat(a,"-").concat(a+1,"节"):"第".concat(a-1,"-").concat(a,"节")),$("#week").html(n.weekNum),console.log(t.Classnam,$("#borrowingclass"),0xbd7a625405555),$("#borrowingclass").val(t.Classname),$("#borrowingclass").data("classroom",t)}))}})},checkFormVail:function(){var t=!0;return t&&!$("#borrowingunit").val()&&(this.$message("请填写预约单位"),t=!1),t&&!$("#purpose").val()&&(this.$message("请填写预约原因"),t=!1),t&&!$("#ReservationPurpose").val()&&(this.$message("请填写预约用途"),t=!1),t},SaveReserveApplication:function(){var t=this;this.checkFormVail()&&$.ajax({type:"POST",url:"/Services/ScheduleData.asmx/AddReserveSchedule",data:JSON.stringify({data:{schoolYear:$("#schoolyear").text(),semNum:{"上学期":1,"下学期":2}[$("#semestername").text()],week:$("#week").text(),reservedate:$("#selecteddate").text(),section:$("#selectedsection").text().match(/\d+/g)[0],classId:$("#borrowingclass").data("classroom").ClassId,borrowingUnit:$("#borrowingunit").val(),phoneNum:$("#workphone").val(),personName:$("#appointment").val(),personID:$("#personid").val(),contactNum:$("#contactnumber").val(),purpose:$("#purpose").val(),reservationPurpose:$("#ReservationPurpose").val(),equipment:this.reserveEquipMode.join(",")}}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){alert("YOur request has been saved."),t.visible.isShowApproveList=!1,t.visible.isScheduleForm=!1,t.visible.isScheduleTable=!0}})},initTableData:function(){var t=JSON.stringify({type:"Reserve"});$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetCalenderDates",data:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:A})},initMenu:function(){var t=this;$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetBuilding",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"success"===e.d.status&&(t.lists.buildings=e.d.value.map((function(t){return{value:t.BuildingId,label:t.BuildingName}})),t.building=t.lists.buildings[0].value,t.getSchedule())}})},searchFilter:function(){this.loading.isScheduleTable=!0,this.getSchedule()},getSchedule:function(){$.ajax({type:"POST",url:"../Services/ScheduleData.asmx/GetScheduleByDate",data:JSON.stringify({data:{building:this.building,date:moment(this.forms.formWeekday.monthday).format("YYYY-MM-DD"),pageIndex:"1",pageSize:"10"}}),contentType:"application/json; charset=utf-8",dataType:"json",success:this.drawTable})},drawTable:function(t){this.isBeforeNow=moment(this.forms.formWeekday.monthday).isBefore(moment().add(-1,"d")),""===t.d.value?(this.dataList=[],this.$message("当天没有课程")):this.dataList=t.d.value.map((function(t){return Object(C["a"])(Object(C["a"])({},t),{},{classList:new Array(12).fill(1).map((function(e,a){var s=t["Section"+(a+1)];a%2==1&&(s=t["Section"+a]);var i=!0,l="",n="";return-1!==s.indexOf("BOriginal")&&(s=" ")," "!=s&&(i=!1,-1!=s.indexOf(":")?(l=s.split(",")[1].split(":")[1],n=N(s)):(l=s,n="state1")),{d:l,isBlank:i,classcolor:n}}))})})),this.loading.isScheduleTable=!1}}},M=E,B=(a("161d"),Object(p["a"])(M,I,O,!1,null,null,null)),U=B.exports,W={data:function(){return{curPage:0,menuList:[]}},components:{ScheduleCard:v,CourseTransMng:T,BookMng:U},mounted:function(){this.getCourseSubMenu()},methods:{getCompentById:function(t){var e=["ScheduleCard","CourseTransMng","BookMng"];return e[t]},loadPage:function(t){this.curPage=t.num},getCourseSubMenu:function(){var t=this;$.ajax({type:"POST",url:"../Services/UserAuthorisation.asmx/GetUserSubMenu",data:JSON.stringify({subMenuType:"coursesubmenu"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=[{title:"课程表",num:1,fa:"fa-calendar"},{title:"调课管理",num:2,fa:"fa-refresh"},{title:"预约管理",num:3,fa:"fa-calendar-check-o"}];e.d.SubMenu.map((function(e){var s=e.replace("coursesubmenu","");a[s-1]&&t.menuList.push(a[s-1])})),t.menuList[0]&&(t.curPage=t.menuList[0].num)}})}}},V=W,F=Object(p["a"])(V,s,i,!1,null,null,null);e["a"]=F.exports},f63a:function(t,e,a){},fc82:function(t,e,a){},fe19:function(t,e,a){"use strict";var s=a("fc82"),i=a.n(s);i.a},fe37:function(t,e,a){"use strict";var s=a("270a"),i=a.n(s);i.a},fe4a:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.readOnly?t._e():a("el-select",{style:"width:"+t.width,attrs:{filterable:"",multiple:"",placeholder:"请选择"},on:{change:t.handleSelectEdit},model:{value:t.selectBuildings,callback:function(e){t.selectBuildings=e},expression:"selectBuildings"}},t._l(t.allBuildClasses,(function(t){return a("el-option",{key:t.buildingInfo.label,attrs:{label:t.buildingInfo.label,value:t.buildingInfo.value}})})),1),a("el-tabs",{staticStyle:{width:"${width}"},attrs:{type:"card",closable:!t.readOnly},on:{edit:t.handleTabsEdit},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.ibuildingClasses,(function(e){return a("el-tab-pane",{key:e.buildingInfo.label,attrs:{label:e.buildingInfo.label,name:e.buildingInfo.label}},[a("selectClassroom",{ref:"ref_"+e.buildingInfo.value,refInFor:!0,attrs:{readOnly:t.readOnly,initData:t.initData,buildingInfo:e},on:{change:t.udpateClassroomStatus}})],1)})),1)],1)},i=[],l=(a("dbb3"),a("fe59"),a("ecb4"),a("2eeb"),a("08ba"),a("19d5")),n=a("232a"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"building_table"},[a("tr",{staticClass:"border-bottom",on:{click:function(e){return t.toggleBuilding(!t.bItem.status)}}},[a("th",{class:["name","building",t.bItem.status?"active":""],attrs:{colspan:"13"}},[a("i",{staticClass:"fa fa-check-circle fa-lg mx-3"}),t._v(t._s(t.bItem.buildingInfo.label)+" ")])]),t._l(t.bItem.floorClassInfo,(function(e,s){return[e.floorFlagEmpty?t._e():a("tr",{key:s,staticClass:"border-bottom"},[a("th",{class:["text-center","level",e.status?"active":""],staticStyle:{width:"100px"},on:{click:function(a){return t.toggleFloor({r:s,status:!e.status})}}},[t._v(" "+t._s(e.Floor)+" ")]),e.ClassNames?a("td",{staticClass:"classroomList noExist"},[t._l(e.ClassNames.length,(function(i){return["Name"in e.ClassNames[i-1]?a("label",{key:i,class:["text-center",{readOnly:t.readOnly},e.ClassNames[i-1]?e.ClassNames[i-1].status?"active":"":"noExist"],staticStyle:{width:"100px"},on:{click:function(a){return t.toggleClassroom({r:s,c:i-1,status:!e.ClassNames[i-1].status})}}},[t._v(" "+t._s(e.ClassNames[i-1]?e.ClassNames[i-1].Name:"")+" ")]):t._e()]}))],2):t._e()])]}))],2)},o=[],c={data:function(){return{bItem:this.buildingInfo}},props:{readOnly:{type:Boolean,default:!1},initData:{type:Array,default:function(){return[]}},buildingInfo:{type:Array,default:function(){return[]}}},mounted:function(){var t=this,e=!1;for(var a in this.bItem.floorClassInfo){var s=!1;for(var i in this.bItem.floorClassInfo[a].ClassNames)-1!==this.initData.indexOf(this.bItem.floorClassInfo[a].ClassNames[i].Id)?(this.bItem.floorClassInfo[a].ClassNames[i].status=!0,e=!0,s=!0):this.readOnly&&(this.bItem.floorClassInfo[a].ClassNames[i]={});this.bItem.floorClassInfo[a].floorFlagEmpty=s}e||this.toggleBuilding(!0),this.$forceUpdate(),this.$nextTick((function(){t.$emit("change",t.bItem,"init")}))},methods:{toggleClassroom:function(t){var e=t.r,a=t.c,s=t.status,i=t.emitflag,l=void 0===i||i;this.bItem.floorClassInfo[e].ClassNames[a].status=s,l&&this.$emit("change",this.bItem,"cell"),this.$forceUpdate()},toggleFloor:function(t){var e=t.r,a=t.status,s=t.emitflag,i=void 0===s||s;for(var l in this.bItem.floorClassInfo[e].status=a,this.bItem.floorClassInfo[e].ClassNames)this.toggleClassroom({r:e,c:l,status:a,emitflag:!1});i&&this.$emit("change",this.bItem,"row")},toggleBuilding:function(t){for(var e in this.bItem.status=t,this.bItem.floorClassInfo)this.toggleFloor({r:e,status:t,emitflag:!1});this.$emit("change",this.bItem,"table")}}},d=c,u=(a("b21c"),a("9ca4")),m=Object(u["a"])(d,r,o,!1,null,null,null),f=m.exports,p={data:function(){return{selectBuildings:this.buildingClasses.map((function(t){return t.buildingInfo.value})),editableTabsValue:"",ibuildingClasses:this.buildingClasses}},props:{width:{type:String,default:"80vw"},isAdd:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},initData:{type:Array,default:function(){return[]}},allBuildClasses:{type:Array,default:function(){return[]}},buildingClasses:{type:Array,default:function(){return[]}}},components:{selectClassroom:f},watch:{initData:function(){console.log(this.initData,"ibc....")},buildingClasses:function(){console.log(this.buildingClasses,"ib...."),this.ibuildingClasses=this.buildingClasses,this.selectBuildings=this.buildingClasses.map((function(t){return t.buildingInfo.value})),this.ibuildingClasses[0]&&(this.editableTabsValue=this.ibuildingClasses[0].buildingInfo.label)}},mounted:function(){console.log(this.ibuildingClasses,"this.ibuildingClasses",this.initData),this.ibuildingClasses[0]&&(this.editableTabsValue=this.ibuildingClasses[0].buildingInfo.label)},methods:{handleSelectEdit:function(t){var e=this,a=Object(n["a"])(t);this.allBuildClasses.filter((function(e){var s=t.indexOf(e.buildingInfo.value);return-1!==s&&(a[s]=e,!0)}));var s=a.map((function(t){var a,s=Object(l["a"])(e.ibuildingClasses);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(i.buildingInfo.label===t.buildingInfo.label)return i}}catch(n){s.e(n)}finally{s.f()}return t}));this.ibuildingClasses=s,this.editableTabsValue=s[s.length-1].buildingInfo.label},handleTabsEdit:function(t,e){var a=this;if("add"===e){var s=this.allBuildClasses[10].buildingInfo.label;this.ibuildingClasses.push(this.allBuildClasses[10]),this.editableTabsValue=s}if("remove"===e){var i=this.ibuildingClasses,l=this.editableTabsValue;l===t?i.forEach((function(e,s){if(e.buildingInfo.label===t){a.$refs["ref_"+e.buildingInfo.value][0].toggleBuilding(!1);var n=i[s+1]||i[s-1];n&&(l=n.buildingInfo.label)}})):i.forEach((function(e){e.buildingInfo.label===t&&a.$refs["ref_"+e.buildingInfo.value][0].toggleBuilding(!1)})),this.$nextTick((function(){a.editableTabsValue=l,a.ibuildingClasses=i.filter((function(e){return e.buildingInfo.label!==t})),a.selectBuildings=a.ibuildingClasses.map((function(t){return t.buildingInfo.value}))}))}},udpateClassroomStatus:function(t){var e=t.buildingInfo,a=t.floorClassInfo;this.$emit("change",{buildingInfo:e,floorClassInfo:a})}}},h=p,v=(a("b6c8"),Object(u["a"])(h,s,i,!1,null,"6167d56a",null));e["a"]=v.exports}}]);